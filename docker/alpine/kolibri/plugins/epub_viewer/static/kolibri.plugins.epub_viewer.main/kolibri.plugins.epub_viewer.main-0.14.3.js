!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=218)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"requestAnimationFrame",(function(){return requestAnimationFrame})),__webpack_require__.d(__webpack_exports__,"uuid",(function(){return uuid})),__webpack_require__.d(__webpack_exports__,"documentHeight",(function(){return documentHeight})),__webpack_require__.d(__webpack_exports__,"isElement",(function(){return isElement})),__webpack_require__.d(__webpack_exports__,"isNumber",(function(){return isNumber})),__webpack_require__.d(__webpack_exports__,"isFloat",(function(){return isFloat})),__webpack_require__.d(__webpack_exports__,"prefixed",(function(){return prefixed})),__webpack_require__.d(__webpack_exports__,"defaults",(function(){return defaults})),__webpack_require__.d(__webpack_exports__,"extend",(function(){return extend})),__webpack_require__.d(__webpack_exports__,"insert",(function(){return insert})),__webpack_require__.d(__webpack_exports__,"locationOf",(function(){return locationOf})),__webpack_require__.d(__webpack_exports__,"indexOfSorted",(function(){return indexOfSorted})),__webpack_require__.d(__webpack_exports__,"bounds",(function(){return bounds})),__webpack_require__.d(__webpack_exports__,"borders",(function(){return borders})),__webpack_require__.d(__webpack_exports__,"nodeBounds",(function(){return nodeBounds})),__webpack_require__.d(__webpack_exports__,"windowBounds",(function(){return windowBounds})),__webpack_require__.d(__webpack_exports__,"indexOfNode",(function(){return indexOfNode})),__webpack_require__.d(__webpack_exports__,"indexOfTextNode",(function(){return indexOfTextNode})),__webpack_require__.d(__webpack_exports__,"indexOfElementNode",(function(){return indexOfElementNode})),__webpack_require__.d(__webpack_exports__,"isXml",(function(){return isXml})),__webpack_require__.d(__webpack_exports__,"createBlob",(function(){return createBlob})),__webpack_require__.d(__webpack_exports__,"createBlobUrl",(function(){return createBlobUrl})),__webpack_require__.d(__webpack_exports__,"revokeBlobUrl",(function(){return revokeBlobUrl})),__webpack_require__.d(__webpack_exports__,"createBase64Url",(function(){return createBase64Url})),__webpack_require__.d(__webpack_exports__,"type",(function(){return type})),__webpack_require__.d(__webpack_exports__,"parse",(function(){return parse})),__webpack_require__.d(__webpack_exports__,"qs",(function(){return qs})),__webpack_require__.d(__webpack_exports__,"qsa",(function(){return qsa})),__webpack_require__.d(__webpack_exports__,"qsp",(function(){return qsp})),__webpack_require__.d(__webpack_exports__,"sprint",(function(){return sprint})),__webpack_require__.d(__webpack_exports__,"treeWalker",(function(){return treeWalker})),__webpack_require__.d(__webpack_exports__,"walk",(function(){return walk})),__webpack_require__.d(__webpack_exports__,"blob2base64",(function(){return blob2base64})),__webpack_require__.d(__webpack_exports__,"defer",(function(){return defer})),__webpack_require__.d(__webpack_exports__,"querySelectorByType",(function(){return querySelectorByType})),__webpack_require__.d(__webpack_exports__,"findChildren",(function(){return findChildren})),__webpack_require__.d(__webpack_exports__,"parents",(function(){return parents})),__webpack_require__.d(__webpack_exports__,"filterChildren",(function(){return filterChildren})),__webpack_require__.d(__webpack_exports__,"getParentByTagName",(function(){return getParentByTagName})),__webpack_require__.d(__webpack_exports__,"RangeObject",(function(){return RangeObject}));var requestAnimationFrame="undefined"!=typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),_URL="undefined"!=typeof URL?URL:"undefined"!=typeof window?window.URL||window.webkitURL||window.mozURL:void 0;function uuid(){var d=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"==c?r:7&r|8).toString(16)}))}function documentHeight(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function isElement(obj){return!(!obj||1!=obj.nodeType)}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function isFloat(n){var f=parseFloat(n);return!1!==isNumber(n)&&("string"==typeof n&&n.indexOf(".")>-1||Math.floor(f)!==f)}function prefixed(unprefixed){var prefixes=["-webkit-","-webkit-","-moz-","-o-","-ms-"],lower=unprefixed.toLowerCase(),length=["Webkit","webkit","Moz","O","ms"].length;if("undefined"==typeof document||void 0!==document.body.style[lower])return unprefixed;for(var i=0;i<length;i++)if(void 0!==document.body.style[prefixes[i]+lower])return prefixes[i]+lower;return unprefixed}function defaults(obj){for(var arguments$1=arguments,i=1,length=arguments.length;i<length;i++){var source=arguments$1[i];for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}return obj}function extend(target){var sources=[].slice.call(arguments,1);return sources.forEach((function(source){source&&Object.getOwnPropertyNames(source).forEach((function(propName){Object.defineProperty(target,propName,Object.getOwnPropertyDescriptor(source,propName))}))})),target}function insert(item,array,compareFunction){var location=locationOf(item,array,compareFunction);return array.splice(location,0,item),location}function locationOf(item,array,compareFunction,_start,_end){var compared,start=_start||0,end=_end||array.length,pivot=parseInt(start+(end-start)/2);return compareFunction||(compareFunction=function(a,b){return a>b?1:a<b?-1:a==b?0:void 0}),end-start<=0?pivot:(compared=compareFunction(array[pivot],item),end-start==1?compared>=0?pivot:pivot+1:0===compared?pivot:-1===compared?locationOf(item,array,compareFunction,pivot,end):locationOf(item,array,compareFunction,start,pivot))}function indexOfSorted(item,array,compareFunction,_start,_end){var compared,start=_start||0,end=_end||array.length,pivot=parseInt(start+(end-start)/2);return compareFunction||(compareFunction=function(a,b){return a>b?1:a<b?-1:a==b?0:void 0}),end-start<=0?-1:(compared=compareFunction(array[pivot],item),end-start==1?0===compared?pivot:-1:0===compared?pivot:-1===compared?indexOfSorted(item,array,compareFunction,pivot,end):indexOfSorted(item,array,compareFunction,start,pivot))}function bounds(el){var style=window.getComputedStyle(el),width=0,height=0;return["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach((function(prop){width+=parseFloat(style[prop])||0})),["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach((function(prop){height+=parseFloat(style[prop])||0})),{height:height,width:width}}function borders(el){var style=window.getComputedStyle(el),width=0,height=0;return["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach((function(prop){width+=parseFloat(style[prop])||0})),["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach((function(prop){height+=parseFloat(style[prop])||0})),{height:height,width:width}}function nodeBounds(node){var elPos,doc=node.ownerDocument;if(node.nodeType==Node.TEXT_NODE){var elRange=doc.createRange();elRange.selectNodeContents(node),elPos=elRange.getBoundingClientRect()}else elPos=node.getBoundingClientRect();return elPos}function windowBounds(){var width=window.innerWidth,height=window.innerHeight;return{top:0,left:0,right:width,bottom:height,width:width,height:height}}function indexOfNode(node,typeId){for(var sib,children=node.parentNode.childNodes,index=-1,i=0;i<children.length&&((sib=children[i]).nodeType===typeId&&index++,sib!=node);i++);return index}function indexOfTextNode(textNode){return indexOfNode(textNode,3)}function indexOfElementNode(elementNode){return indexOfNode(elementNode,1)}function isXml(ext){return["xml","opf","ncx"].indexOf(ext)>-1}function createBlob(content,mime){return new Blob([content],{type:mime})}function createBlobUrl(content,mime){var blob=createBlob(content,mime);return _URL.createObjectURL(blob)}function revokeBlobUrl(url){return _URL.revokeObjectURL(url)}function createBase64Url(content,mime){if("string"==typeof content)return"data:"+mime+";base64,"+btoa(encodeURIComponent(content))}function type(obj){return Object.prototype.toString.call(obj).slice(8,-1)}function parse(markup,mime,forceXMLDom){var Parser;return Parser="undefined"==typeof DOMParser||forceXMLDom?__webpack_require__(63).DOMParser:DOMParser,65279===markup.charCodeAt(0)&&(markup=markup.slice(1)),(new Parser).parseFromString(markup,mime)}function qs(el,sel){var elements;if(!el)throw new Error("No Element Provided");return void 0!==el.querySelector?el.querySelector(sel):(elements=el.getElementsByTagName(sel)).length?elements[0]:void 0}function qsa(el,sel){return void 0!==el.querySelector?el.querySelectorAll(sel):el.getElementsByTagName(sel)}function qsp(el,sel,props){var q,filtered;if(void 0!==el.querySelector){for(var prop in sel+="[",props)sel+=prop+"~='"+props[prop]+"'";return sel+="]",el.querySelector(sel)}if(q=el.getElementsByTagName(sel),filtered=Array.prototype.slice.call(q,0).filter((function(el){for(var prop in props)if(el.getAttribute(prop)===props[prop])return!0;return!1})))return filtered[0]}function sprint(root,func){void 0!==(root.ownerDocument||root).createTreeWalker?treeWalker(root,func,NodeFilter.SHOW_TEXT):walk(root,(function(node){node&&3===node.nodeType&&func(node)}))}function treeWalker(root,func,filter){for(var node,treeWalker=document.createTreeWalker(root,filter,null,!1);node=treeWalker.nextNode();)func(node)}function walk(node,callback){if(callback(node))return!0;if(node=node.firstChild)do{if(walk(node,callback))return!0;node=node.nextSibling}while(node)}function blob2base64(blob){return new Promise((function(resolve,reject){var reader=new FileReader;reader.readAsDataURL(blob),reader.onloadend=function(){resolve(reader.result)}}))}function defer(){var this$1=this;this.resolve=null,this.reject=null,this.id=uuid(),this.promise=new Promise((function(resolve,reject){this$1.resolve=resolve,this$1.reject=reject})),Object.freeze(this)}function querySelectorByType(html,element,type){var query;if(void 0!==html.querySelector&&(query=html.querySelector(element+'[*|type="'+type+'"]')),query&&0!==query.length)return query;query=qsa(html,element);for(var i=0;i<query.length;i++)if(query[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===type||query[i].getAttribute("epub:type")===type)return query[i]}function findChildren(el){for(var result=[],childNodes=el.childNodes,i=0;i<childNodes.length;i++){var node=childNodes[i];1===node.nodeType&&result.push(node)}return result}function parents(node){for(var nodes=[node];node;node=node.parentNode)nodes.unshift(node);return nodes}function filterChildren(el,nodeName,single){for(var result=[],childNodes=el.childNodes,i=0;i<childNodes.length;i++){var node=childNodes[i];if(1===node.nodeType&&node.nodeName.toLowerCase()===nodeName){if(single)return node;result.push(node)}}if(!single)return result}function getParentByTagName(node,tagname){var parent;if(null!==node&&""!==tagname)for(parent=node.parentNode;1===parent.nodeType;){if(parent.tagName.toLowerCase()===tagname)return parent;parent=parent.parentNode}}var RangeObject=function(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0};RangeObject.prototype.setStart=function(startNode,startOffset){this.startContainer=startNode,this.startOffset=startOffset,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()},RangeObject.prototype.setEnd=function(endNode,endOffset){this.endContainer=endNode,this.endOffset=endOffset,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()},RangeObject.prototype.collapse=function(toStart){this.collapsed=!0,toStart?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)},RangeObject.prototype.selectNode=function(referenceNode){var parent=referenceNode.parentNode,index=Array.prototype.indexOf.call(parent.childNodes,referenceNode);this.setStart(parent,index),this.setEnd(parent,index+1)},RangeObject.prototype.selectNodeContents=function(referenceNode){referenceNode.childNodes[referenceNode.childNodes-1];var endIndex=3===referenceNode.nodeType?referenceNode.textContent.length:parent.childNodes.length;this.setStart(referenceNode,0),this.setEnd(referenceNode,endIndex)},RangeObject.prototype._commonAncestorContainer=function(startContainer,endContainer){var startParents=parents(startContainer||this.startContainer),endParents=parents(endContainer||this.endContainer);if(startParents[0]==endParents[0])for(var i=0;i<startParents.length;i++)if(startParents[i]!=endParents[i])return startParents[i-1]},RangeObject.prototype._checkCollapsed=function(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1},RangeObject.prototype.toString=function(){}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return EPUBJS_VERSION})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DOM_EVENTS})),__webpack_require__.d(__webpack_exports__,"c",(function(){return EVENTS}));var EPUBJS_VERSION="0.3",DOM_EVENTS=["keydown","keyup","keypressed","mouseup","mousedown","click","touchend","touchstart","touchmove"],EVENTS={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _utils_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),EpubCFI=function EpubCFI(cfiFrom,base,ignoreClass){var type;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof EpubCFI))return new EpubCFI(cfiFrom,base,ignoreClass);if("string"==typeof base?this.base=this.parseComponent(base):"object"==typeof base&&base.steps&&(this.base=base),"string"===(type=this.checkType(cfiFrom)))return this.str=cfiFrom,Object(_utils_core__WEBPACK_IMPORTED_MODULE_0__.extend)(this,this.parse(cfiFrom));if("range"===type)return Object(_utils_core__WEBPACK_IMPORTED_MODULE_0__.extend)(this,this.fromRange(cfiFrom,this.base,ignoreClass));if("node"===type)return Object(_utils_core__WEBPACK_IMPORTED_MODULE_0__.extend)(this,this.fromNode(cfiFrom,this.base,ignoreClass));if("EpubCFI"===type&&cfiFrom.path)return cfiFrom;if(cfiFrom)throw new TypeError("not a valid argument for EpubCFI");return this};EpubCFI.prototype.checkType=function(cfi){return this.isCfiString(cfi)?"string":!cfi||"object"!=typeof cfi||"Range"!==Object(_utils_core__WEBPACK_IMPORTED_MODULE_0__.type)(cfi)&&void 0===cfi.startContainer?cfi&&"object"==typeof cfi&&void 0!==cfi.nodeType?"node":!!(cfi&&"object"==typeof cfi&&cfi instanceof EpubCFI)&&"EpubCFI":"range"},EpubCFI.prototype.parse=function(cfiStr){var baseComponent,pathComponent,range,cfi={spinePos:-1,range:!1,base:{},path:{},start:null,end:null};return"string"!=typeof cfiStr?{spinePos:-1}:(0===cfiStr.indexOf("epubcfi(")&&")"===cfiStr[cfiStr.length-1]&&(cfiStr=cfiStr.slice(8,cfiStr.length-1)),(baseComponent=this.getChapterComponent(cfiStr))?(cfi.base=this.parseComponent(baseComponent),pathComponent=this.getPathComponent(cfiStr),cfi.path=this.parseComponent(pathComponent),(range=this.getRange(cfiStr))&&(cfi.range=!0,cfi.start=this.parseComponent(range[0]),cfi.end=this.parseComponent(range[1])),cfi.spinePos=cfi.base.steps[1].index,cfi):{spinePos:-1})},EpubCFI.prototype.parseComponent=function(componentStr){var terminal,component={steps:[],terminal:{offset:null,assertion:null}},parts=componentStr.split(":"),steps=parts[0].split("/");return parts.length>1&&(terminal=parts[1],component.terminal=this.parseTerminal(terminal)),""===steps[0]&&steps.shift(),component.steps=steps.map(function(step){return this.parseStep(step)}.bind(this)),component},EpubCFI.prototype.parseStep=function(stepStr){var type,num,index,has_brackets,id;if((has_brackets=stepStr.match(/\[(.*)\]/))&&has_brackets[1]&&(id=has_brackets[1]),num=parseInt(stepStr),!isNaN(num))return num%2==0?(type="element",index=num/2-1):(type="text",index=(num-1)/2),{type:type,index:index,id:id||null}},EpubCFI.prototype.parseTerminal=function(termialStr){var characterOffset,textLocationAssertion,assertion=termialStr.match(/\[(.*)\]/);return assertion&&assertion[1]?(characterOffset=parseInt(termialStr.split("[")[0]),textLocationAssertion=assertion[1]):characterOffset=parseInt(termialStr),Object(_utils_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(characterOffset)||(characterOffset=null),{offset:characterOffset,assertion:textLocationAssertion}},EpubCFI.prototype.getChapterComponent=function(cfiStr){return cfiStr.split("!")[0]},EpubCFI.prototype.getPathComponent=function(cfiStr){var indirection=cfiStr.split("!");if(indirection[1])return indirection[1].split(",")[0]},EpubCFI.prototype.getRange=function(cfiStr){var ranges=cfiStr.split(",");return 3===ranges.length&&[ranges[1],ranges[2]]},EpubCFI.prototype.getCharecterOffsetComponent=function(cfiStr){return cfiStr.split(":")[1]||""},EpubCFI.prototype.joinSteps=function(steps){return steps?steps.map((function(part){var segment="";return"element"===part.type&&(segment+=2*(part.index+1)),"text"===part.type&&(segment+=1+2*part.index),part.id&&(segment+="["+part.id+"]"),segment})).join("/"):""},EpubCFI.prototype.segmentString=function(segment){var segmentString="/";return segmentString+=this.joinSteps(segment.steps),segment.terminal&&null!=segment.terminal.offset&&(segmentString+=":"+segment.terminal.offset),segment.terminal&&null!=segment.terminal.assertion&&(segmentString+="["+segment.terminal.assertion+"]"),segmentString},EpubCFI.prototype.toString=function(){var cfiString="epubcfi(";return cfiString+=this.segmentString(this.base),cfiString+="!",cfiString+=this.segmentString(this.path),this.range&&this.start&&(cfiString+=",",cfiString+=this.segmentString(this.start)),this.range&&this.end&&(cfiString+=",",cfiString+=this.segmentString(this.end)),cfiString+=")"},EpubCFI.prototype.compare=function(cfiOne,cfiTwo){var stepsA,stepsB,terminalA,terminalB;if("string"==typeof cfiOne&&(cfiOne=new EpubCFI(cfiOne)),"string"==typeof cfiTwo&&(cfiTwo=new EpubCFI(cfiTwo)),cfiOne.spinePos>cfiTwo.spinePos)return 1;if(cfiOne.spinePos<cfiTwo.spinePos)return-1;cfiOne.range?(stepsA=cfiOne.path.steps.concat(cfiOne.start.steps),terminalA=cfiOne.start.terminal):(stepsA=cfiOne.path.steps,terminalA=cfiOne.path.terminal),cfiTwo.range?(stepsB=cfiTwo.path.steps.concat(cfiTwo.start.steps),terminalB=cfiTwo.start.terminal):(stepsB=cfiTwo.path.steps,terminalB=cfiTwo.path.terminal);for(var i=0;i<stepsA.length;i++){if(!stepsA[i])return-1;if(!stepsB[i])return 1;if(stepsA[i].index>stepsB[i].index)return 1;if(stepsA[i].index<stepsB[i].index)return-1}return stepsA.length<stepsB.length?-1:terminalA.offset>terminalB.offset?1:terminalA.offset<terminalB.offset?-1:0},EpubCFI.prototype.step=function(node){var nodeType=3===node.nodeType?"text":"element";return{id:node.id,tagName:node.tagName,type:nodeType,index:this.position(node)}},EpubCFI.prototype.filteredStep=function(node,ignoreClass){var nodeType,filteredNode=this.filter(node,ignoreClass);if(filteredNode)return nodeType=3===filteredNode.nodeType?"text":"element",{id:filteredNode.id,tagName:filteredNode.tagName,type:nodeType,index:this.filteredPosition(filteredNode,ignoreClass)}},EpubCFI.prototype.pathTo=function(node,offset,ignoreClass){for(var step,segment={steps:[],terminal:{offset:null,assertion:null}},currentNode=node;currentNode&&currentNode.parentNode&&9!=currentNode.parentNode.nodeType;)(step=ignoreClass?this.filteredStep(currentNode,ignoreClass):this.step(currentNode))&&segment.steps.unshift(step),currentNode=currentNode.parentNode;return null!=offset&&offset>=0&&(segment.terminal.offset=offset,"text"!=segment.steps[segment.steps.length-1].type&&segment.steps.push({type:"text",index:0})),segment},EpubCFI.prototype.equalStep=function(stepA,stepB){return!(!stepA||!stepB)&&(stepA.index===stepB.index&&stepA.id===stepB.id&&stepA.type===stepB.type)},EpubCFI.prototype.fromRange=function(range,base,ignoreClass){var cfi={range:!1,base:{},path:{},start:null,end:null},start=range.startContainer,end=range.endContainer,startOffset=range.startOffset,endOffset=range.endOffset,needsIgnoring=!1;if(ignoreClass&&(needsIgnoring=null!=start.ownerDocument.querySelector("."+ignoreClass)),"string"==typeof base?(cfi.base=this.parseComponent(base),cfi.spinePos=cfi.base.steps[1].index):"object"==typeof base&&(cfi.base=base),range.collapsed)needsIgnoring&&(startOffset=this.patchOffset(start,startOffset,ignoreClass)),cfi.path=this.pathTo(start,startOffset,ignoreClass);else{cfi.range=!0,needsIgnoring&&(startOffset=this.patchOffset(start,startOffset,ignoreClass)),cfi.start=this.pathTo(start,startOffset,ignoreClass),needsIgnoring&&(endOffset=this.patchOffset(end,endOffset,ignoreClass)),cfi.end=this.pathTo(end,endOffset,ignoreClass),cfi.path={steps:[],terminal:null};var i,len=cfi.start.steps.length;for(i=0;i<len&&this.equalStep(cfi.start.steps[i],cfi.end.steps[i]);i++)i===len-1?cfi.start.terminal===cfi.end.terminal&&(cfi.path.steps.push(cfi.start.steps[i]),cfi.range=!1):cfi.path.steps.push(cfi.start.steps[i]);cfi.start.steps=cfi.start.steps.slice(cfi.path.steps.length),cfi.end.steps=cfi.end.steps.slice(cfi.path.steps.length)}return cfi},EpubCFI.prototype.fromNode=function(anchor,base,ignoreClass){var cfi={range:!1,base:{},path:{},start:null,end:null};return"string"==typeof base?(cfi.base=this.parseComponent(base),cfi.spinePos=cfi.base.steps[1].index):"object"==typeof base&&(cfi.base=base),cfi.path=this.pathTo(anchor,null,ignoreClass),cfi},EpubCFI.prototype.filter=function(anchor,ignoreClass){var needsIgnoring,sibling,parent,previousSibling,nextSibling,isText=!1;return 3===anchor.nodeType?(isText=!0,parent=anchor.parentNode,needsIgnoring=anchor.parentNode.classList.contains(ignoreClass)):(isText=!1,needsIgnoring=anchor.classList.contains(ignoreClass)),needsIgnoring&&isText?(previousSibling=parent.previousSibling,nextSibling=parent.nextSibling,previousSibling&&3===previousSibling.nodeType?sibling=previousSibling:nextSibling&&3===nextSibling.nodeType&&(sibling=nextSibling),sibling||anchor):!(needsIgnoring&&!isText)&&anchor},EpubCFI.prototype.patchOffset=function(anchor,offset,ignoreClass){if(3!=anchor.nodeType)throw new Error("Anchor must be a text node");var curr=anchor,totalOffset=offset;for(anchor.parentNode.classList.contains(ignoreClass)&&(curr=anchor.parentNode);curr.previousSibling;){if(1===curr.previousSibling.nodeType){if(!curr.previousSibling.classList.contains(ignoreClass))break;totalOffset+=curr.previousSibling.textContent.length}else totalOffset+=curr.previousSibling.textContent.length;curr=curr.previousSibling}return totalOffset},EpubCFI.prototype.normalizedMap=function(children,nodeType,ignoreClass){var i,currNodeType,prevNodeType,output={},prevIndex=-1,len=children.length;for(i=0;i<len;i++)1===(currNodeType=children[i].nodeType)&&children[i].classList.contains(ignoreClass)&&(currNodeType=3),i>0&&3===currNodeType&&3===prevNodeType?output[i]=prevIndex:nodeType===currNodeType&&(prevIndex+=1,output[i]=prevIndex),prevNodeType=currNodeType;return output},EpubCFI.prototype.position=function(anchor){var children,index;return 1===anchor.nodeType?((children=anchor.parentNode.children)||(children=Object(_utils_core__WEBPACK_IMPORTED_MODULE_0__.findChildren)(anchor.parentNode)),index=Array.prototype.indexOf.call(children,anchor)):index=(children=this.textNodes(anchor.parentNode)).indexOf(anchor),index},EpubCFI.prototype.filteredPosition=function(anchor,ignoreClass){var children,map;return 1===anchor.nodeType?(children=anchor.parentNode.children,map=this.normalizedMap(children,1,ignoreClass)):(children=anchor.parentNode.childNodes,anchor.parentNode.classList.contains(ignoreClass)&&(children=(anchor=anchor.parentNode).parentNode.childNodes),map=this.normalizedMap(children,3,ignoreClass)),map[Array.prototype.indexOf.call(children,anchor)]},EpubCFI.prototype.stepsToXpath=function(steps){var xpath=[".","*"];return steps.forEach((function(step){var position=step.index+1;step.id?xpath.push("*[position()="+position+" and @id='"+step.id+"']"):"text"===step.type?xpath.push("text()["+position+"]"):xpath.push("*["+position+"]")})),xpath.join("/")},EpubCFI.prototype.stepsToQuerySelector=function(steps){var query=["html"];return steps.forEach((function(step){var position=step.index+1;step.id?query.push("#"+step.id):"text"===step.type||query.push("*:nth-child("+position+")")})),query.join(">")},EpubCFI.prototype.textNodes=function(container,ignoreClass){return Array.prototype.slice.call(container.childNodes).filter((function(node){return 3===node.nodeType||!(!ignoreClass||!node.classList.contains(ignoreClass))}))},EpubCFI.prototype.walkToNode=function(steps,_doc,ignoreClass){var step,i,doc=_doc||document,container=doc.documentElement,len=steps.length;for(i=0;i<len&&("element"===(step=steps[i]).type?container=step.id?doc.getElementById(step.id):(container.children||Object(_utils_core__WEBPACK_IMPORTED_MODULE_0__.findChildren)(container))[step.index]:"text"===step.type&&(container=this.textNodes(container,ignoreClass)[step.index]),container);i++);return container},EpubCFI.prototype.findNode=function(steps,_doc,ignoreClass){var container,xpath,doc=_doc||document;return ignoreClass||void 0===doc.evaluate?container=ignoreClass?this.walkToNode(steps,doc,ignoreClass):this.walkToNode(steps,doc):(xpath=this.stepsToXpath(steps),container=doc.evaluate(xpath,doc,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),container},EpubCFI.prototype.fixMiss=function(steps,offset,_doc,ignoreClass){var child,len,container=this.findNode(steps.slice(0,-1),_doc,ignoreClass),children=container.childNodes,map=this.normalizedMap(children,3,ignoreClass),lastStepIndex=steps[steps.length-1].index;for(var childIndex in map){if(!map.hasOwnProperty(childIndex))return;if(map[childIndex]===lastStepIndex){if(!(offset>(len=(child=children[childIndex]).textContent.length))){container=1===child.nodeType?child.childNodes[0]:child;break}offset-=len}}return{container:container,offset:offset}},EpubCFI.prototype.toRange=function(_doc,ignoreClass){var range,start,end,startContainer,endContainer,startSteps,endSteps,missed,doc=_doc||document,needsIgnoring=!!ignoreClass&&null!=doc.querySelector("."+ignoreClass);if(range=void 0!==doc.createRange?doc.createRange():new _utils_core__WEBPACK_IMPORTED_MODULE_0__.RangeObject,this.range?(start=this.start,startSteps=this.path.steps.concat(start.steps),startContainer=this.findNode(startSteps,doc,needsIgnoring?ignoreClass:null),end=this.end,endSteps=this.path.steps.concat(end.steps),endContainer=this.findNode(endSteps,doc,needsIgnoring?ignoreClass:null)):(start=this.path,startSteps=this.path.steps,startContainer=this.findNode(this.path.steps,doc,needsIgnoring?ignoreClass:null)),!startContainer)return console.log("No startContainer found for",this.toString()),null;try{null!=start.terminal.offset?range.setStart(startContainer,start.terminal.offset):range.setStart(startContainer,0)}catch(e){missed=this.fixMiss(startSteps,start.terminal.offset,doc,needsIgnoring?ignoreClass:null),range.setStart(missed.container,missed.offset)}if(endContainer)try{null!=end.terminal.offset?range.setEnd(endContainer,end.terminal.offset):range.setEnd(endContainer,0)}catch(e){missed=this.fixMiss(endSteps,this.end.terminal.offset,doc,needsIgnoring?ignoreClass:null),range.setEnd(missed.container,missed.offset)}return range},EpubCFI.prototype.isCfiString=function(str){return"string"==typeof str&&0===str.indexOf("epubcfi(")&&")"===str[str.length-1]},EpubCFI.prototype.generateChapterComponent=function(_spineNodeIndex,_pos,id){var cfi="/"+2*(_spineNodeIndex+1)+"/";return cfi+=2*(parseInt(_pos)+1),id&&(cfi+="["+id+"]"),cfi},EpubCFI.prototype.collapse=function(toStart){this.range&&(this.range=!1,toStart?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))},__webpack_exports__.a=EpubCFI},function(module,__webpack_exports__,__webpack_require__){"use strict";function normalizeComponent(scriptExports,render,staticRenderFns,functionalTemplate,injectStyles,scopeId,moduleIdentifier,shadowMode){var hook,options="function"==typeof scriptExports?scriptExports.options:scriptExports;if(render&&(options.render=render,options.staticRenderFns=staticRenderFns,options._compiled=!0),functionalTemplate&&(options.functional=!0),scopeId&&(options._scopeId="data-v-"+scopeId),moduleIdentifier?(hook=function(context){(context=context||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(context=__VUE_SSR_CONTEXT__),injectStyles&&injectStyles.call(this,context),context&&context._registeredComponents&&context._registeredComponents.add(moduleIdentifier)},options._ssrRegister=hook):injectStyles&&(hook=shadowMode?function(){injectStyles.call(this,(options.functional?this.parent:this).$root.$options.shadowRoot)}:injectStyles),hook)if(options.functional){options._injectStyles=hook;var originalRender=options.render;options.render=function(h,context){return hook.call(context),originalRender(h,context)}}else{var existing=options.beforeCreate;options.beforeCreate=existing?[].concat(existing,hook):[hook]}return{exports:scriptExports,options:options}}__webpack_require__.d(__webpack_exports__,"a",(function(){return normalizeComponent}))},function(module,exports,__webpack_require__){"use strict";var on,once,off,emit,methods,descriptors,base,d=__webpack_require__(96),callable=__webpack_require__(113),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:!0,enumerable:!1,writable:!0};once=function(type,listener){var once,self;return callable(listener),self=this,on.call(this,type,once=function(){off.call(self,type,once),apply.call(listener,this,arguments)}),once.__eeOnceListener__=listener,this},methods={on:on=function(type,listener){var data;return callable(listener),hasOwnProperty.call(this,"__ee__")?data=this.__ee__:(data=descriptor.value=create(null),defineProperty(this,"__ee__",descriptor),descriptor.value=null),data[type]?"object"==typeof data[type]?data[type].push(listener):data[type]=[data[type],listener]:data[type]=listener,this},once:once,off:off=function(type,listener){var data,listeners,candidate,i;if(callable(listener),!hasOwnProperty.call(this,"__ee__"))return this;if(!(data=this.__ee__)[type])return this;if("object"==typeof(listeners=data[type]))for(i=0;candidate=listeners[i];++i)candidate!==listener&&candidate.__eeOnceListener__!==listener||(2===listeners.length?data[type]=listeners[i?0:1]:listeners.splice(i,1));else listeners!==listener&&listeners.__eeOnceListener__!==listener||delete data[type];return this},emit:emit=function(type){var i,l,listener,listeners,args,arguments$1=arguments;if(hasOwnProperty.call(this,"__ee__")&&(listeners=this.__ee__[type]))if("object"==typeof listeners){for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments$1[i];for(listeners=listeners.slice(),i=0;listener=listeners[i];++i)apply.call(listener,this,args)}else switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments$1[i];apply.call(listeners,this,args)}}},descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)},base=defineProperties({},descriptors),module.exports=exports=function(o){return null==o?create(base):defineProperties(Object(o),descriptors)},exports.methods=methods},function(module,__webpack_exports__,__webpack_require__){"use strict";var path_webpack__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),path_webpack__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(path_webpack__WEBPACK_IMPORTED_MODULE_0__),Path=function(pathString){var parsed;pathString.indexOf("://")>-1&&(pathString=new URL(pathString).pathname),parsed=this.parse(pathString),this.path=pathString,this.isDirectory(pathString)?this.directory=pathString:this.directory=parsed.dir+"/",this.filename=parsed.base,this.extension=parsed.ext.slice(1)};Path.prototype.parse=function(what){return path_webpack__WEBPACK_IMPORTED_MODULE_0___default.a.parse(what)},Path.prototype.isAbsolute=function(what){return path_webpack__WEBPACK_IMPORTED_MODULE_0___default.a.isAbsolute(what||this.path)},Path.prototype.isDirectory=function(what){return"/"===what.charAt(what.length-1)},Path.prototype.resolve=function(what){return path_webpack__WEBPACK_IMPORTED_MODULE_0___default.a.resolve(this.directory,what)},Path.prototype.relative=function(what){return what&&what.indexOf("://")>-1?what:path_webpack__WEBPACK_IMPORTED_MODULE_0___default.a.relative(this.directory,what)},Path.prototype.splitPath=function(filename){return this.splitPathRe.exec(filename).slice(1)},Path.prototype.toString=function(){return this.path},__webpack_exports__.a=Path},function(module,__webpack_exports__,__webpack_require__){"use strict";var _path__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),path_webpack__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8),path_webpack__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(path_webpack__WEBPACK_IMPORTED_MODULE_1__),Url=function(urlString,baseString){var absolute=urlString.indexOf("://")>-1,pathname=urlString;if(this.Url=void 0,this.href=urlString,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=baseString,!absolute&&!1!==baseString&&"string"!=typeof baseString&&window&&window.location&&(this.base=window.location.href),absolute||this.base)try{this.base?this.Url=new URL(urlString,this.base):this.Url=new URL(urlString),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,pathname=this.Url.pathname}catch(e){this.Url=void 0,this.base&&(pathname=new _path__WEBPACK_IMPORTED_MODULE_0__.a(this.base).resolve(pathname))}this.Path=new _path__WEBPACK_IMPORTED_MODULE_0__.a(pathname),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension};Url.prototype.path=function(){return this.Path},Url.prototype.resolve=function(what){var fullpath;return what.indexOf("://")>-1?what:(fullpath=path_webpack__WEBPACK_IMPORTED_MODULE_1___default.a.resolve(this.directory,what),this.origin+fullpath)},Url.prototype.relative=function(what){return path_webpack__WEBPACK_IMPORTED_MODULE_1___default.a.relative(what,this.directory)},Url.prototype.toString=function(){return this.href},__webpack_exports__.a=Url},function(module,__webpack_exports__,__webpack_require__){"use strict";var Hook=function(context){this.context=context||this,this.hooks=[]};Hook.prototype.register=function(){for(var arguments$1=arguments,i=0;i<arguments.length;++i)if("function"==typeof arguments$1[i])this.hooks.push(arguments$1[i]);else for(var j=0;j<arguments[i].length;++j)this.hooks.push(arguments$1[i][j])},Hook.prototype.deregister=function(func){for(var i=0;i<this.hooks.length;i++)if(this.hooks[i]===func){this.hooks.splice(i,1);break}},Hook.prototype.trigger=function(){var args=arguments,context=this.context,promises=[];return this.hooks.forEach((function(task){var executing=task.apply(context,args);executing&&"function"==typeof executing.then&&promises.push(executing)})),Promise.all(promises)},Hook.prototype.list=function(){return this.hooks},Hook.prototype.clear=function(){return this.hooks=[]},__webpack_exports__.a=Hook},function(module,exports,__webpack_require__){"use strict";if(!process)var process={cwd:function(){return"/"}};function assertPath(path){if("string"!=typeof path)throw new TypeError("Path must be a string. Received "+path)}function normalizeStringPosix(path,allowAboveRoot){for(var code,res="",lastSlash=-1,dots=0,i=0;i<=path.length;++i){if(i<path.length)code=path.charCodeAt(i);else{if(47===code)break;code=47}if(47===code){if(lastSlash===i-1||1===dots);else if(lastSlash!==i-1&&2===dots){if(res.length<2||46!==res.charCodeAt(res.length-1)||46!==res.charCodeAt(res.length-2))if(res.length>2){for(var start=res.length-1,j=start;j>=0&&47!==res.charCodeAt(j);--j);if(j!==start){res=-1===j?"":res.slice(0,j),lastSlash=i,dots=0;continue}}else if(2===res.length||1===res.length){res="",lastSlash=i,dots=0;continue}allowAboveRoot&&(res.length>0?res+="/..":res="..")}else res.length>0?res+="/"+path.slice(lastSlash+1,i):res=path.slice(lastSlash+1,i);lastSlash=i,dots=0}else 46===code&&-1!==dots?++dots:dots=-1}return res}var posix={resolve:function(){for(var cwd,arguments$1=arguments,resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path;i>=0?path=arguments$1[i]:(void 0===cwd&&(cwd=process.cwd()),path=cwd),assertPath(path),0!==path.length&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute=47===path.charCodeAt(0))}return resolvedPath=normalizeStringPosix(resolvedPath,!resolvedAbsolute),resolvedAbsolute?resolvedPath.length>0?"/"+resolvedPath:"/":resolvedPath.length>0?resolvedPath:"."},normalize:function(path){if(assertPath(path),0===path.length)return".";var isAbsolute=47===path.charCodeAt(0),trailingSeparator=47===path.charCodeAt(path.length-1);return 0!==(path=normalizeStringPosix(path,!isAbsolute)).length||isAbsolute||(path="."),path.length>0&&trailingSeparator&&(path+="/"),isAbsolute?"/"+path:path},isAbsolute:function(path){return assertPath(path),path.length>0&&47===path.charCodeAt(0)},join:function(){var joined,arguments$1=arguments;if(0===arguments.length)return".";for(var i=0;i<arguments.length;++i){var arg=arguments$1[i];assertPath(arg),arg.length>0&&(void 0===joined?joined=arg:joined+="/"+arg)}return void 0===joined?".":posix.normalize(joined)},relative:function(from,to){if(assertPath(from),assertPath(to),from===to)return"";if((from=posix.resolve(from))===(to=posix.resolve(to)))return"";for(var fromStart=1;fromStart<from.length&&47===from.charCodeAt(fromStart);++fromStart);for(var fromEnd=from.length,fromLen=fromEnd-fromStart,toStart=1;toStart<to.length&&47===to.charCodeAt(toStart);++toStart);for(var toLen=to.length-toStart,length=fromLen<toLen?fromLen:toLen,lastCommonSep=-1,i=0;i<=length;++i){if(i===length){if(toLen>length){if(47===to.charCodeAt(toStart+i))return to.slice(toStart+i+1);if(0===i)return to.slice(toStart+i)}else fromLen>length&&(47===from.charCodeAt(fromStart+i)?lastCommonSep=i:0===i&&(lastCommonSep=0));break}var fromCode=from.charCodeAt(fromStart+i);if(fromCode!==to.charCodeAt(toStart+i))break;47===fromCode&&(lastCommonSep=i)}var out="";for(i=fromStart+lastCommonSep+1;i<=fromEnd;++i)i!==fromEnd&&47!==from.charCodeAt(i)||(0===out.length?out+="..":out+="/..");return out.length>0?out+to.slice(toStart+lastCommonSep):(toStart+=lastCommonSep,47===to.charCodeAt(toStart)&&++toStart,to.slice(toStart))},_makeLong:function(path){return path},dirname:function(path){if(assertPath(path),0===path.length)return".";for(var code=path.charCodeAt(0),hasRoot=47===code,end=-1,matchedSlash=!0,i=path.length-1;i>=1;--i)if(47===(code=path.charCodeAt(i))){if(!matchedSlash){end=i;break}}else matchedSlash=!1;return-1===end?hasRoot?"/":".":hasRoot&&1===end?"//":path.slice(0,end)},basename:function(path,ext){if(void 0!==ext&&"string"!=typeof ext)throw new TypeError('"ext" argument must be a string');assertPath(path);var i,start=0,end=-1,matchedSlash=!0;if(void 0!==ext&&ext.length>0&&ext.length<=path.length){if(ext.length===path.length&&ext===path)return"";var extIdx=ext.length-1,firstNonSlashEnd=-1;for(i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(47===code){if(!matchedSlash){start=i+1;break}}else-1===firstNonSlashEnd&&(matchedSlash=!1,firstNonSlashEnd=i+1),extIdx>=0&&(code===ext.charCodeAt(extIdx)?-1==--extIdx&&(end=i):(extIdx=-1,end=firstNonSlashEnd))}return start===end?end=firstNonSlashEnd:-1===end&&(end=path.length),path.slice(start,end)}for(i=path.length-1;i>=0;--i)if(47===path.charCodeAt(i)){if(!matchedSlash){start=i+1;break}}else-1===end&&(matchedSlash=!1,end=i+1);return-1===end?"":path.slice(start,end)},extname:function(path){assertPath(path);for(var startDot=-1,startPart=0,end=-1,matchedSlash=!0,preDotState=0,i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(47!==code)-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1);else if(!matchedSlash){startPart=i+1;break}}return-1===startDot||-1===end||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?"":path.slice(startDot,end)},format:function(pathObject){if(null===pathObject||"object"!=typeof pathObject)throw new TypeError('Parameter "pathObject" must be an object, not '+typeof pathObject);return function(sep,pathObject){var dir=pathObject.dir||pathObject.root,base=pathObject.base||(pathObject.name||"")+(pathObject.ext||"");return dir?dir===pathObject.root?dir+base:dir+sep+base:base}("/",pathObject)},parse:function(path){assertPath(path);var ret={root:"",dir:"",base:"",ext:"",name:""};if(0===path.length)return ret;var start,code=path.charCodeAt(0),isAbsolute=47===code;isAbsolute?(ret.root="/",start=1):start=0;for(var startDot=-1,startPart=0,end=-1,matchedSlash=!0,i=path.length-1,preDotState=0;i>=start;--i)if(47!==(code=path.charCodeAt(i)))-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1);else if(!matchedSlash){startPart=i+1;break}return-1===startDot||-1===end||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?-1!==end&&(ret.base=ret.name=0===startPart&&isAbsolute?path.slice(1,end):path.slice(startPart,end)):(0===startPart&&isAbsolute?(ret.name=path.slice(1,startDot),ret.base=path.slice(1,end)):(ret.name=path.slice(startPart,startDot),ret.base=path.slice(startPart,end)),ret.ext=path.slice(startDot,end)),startPart>0?ret.dir=path.slice(0,startPart-1):isAbsolute&&(ret.dir="/"),ret},sep:"/",delimiter:":",posix:null};module.exports=posix},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return replaceBase})),__webpack_require__.d(__webpack_exports__,"b",(function(){return replaceCanonical})),__webpack_require__.d(__webpack_exports__,"d",(function(){return replaceMeta})),__webpack_require__.d(__webpack_exports__,"c",(function(){return replaceLinks})),__webpack_require__.d(__webpack_exports__,"e",(function(){return substitute}));var _core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_url__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6);__webpack_require__(5);function replaceBase(doc,section){var base,head,url=section.url,absolute=url.indexOf("://")>-1;doc&&(head=Object(_core__WEBPACK_IMPORTED_MODULE_0__.qs)(doc,"head"),(base=Object(_core__WEBPACK_IMPORTED_MODULE_0__.qs)(head,"base"))||(base=doc.createElement("base"),head.insertBefore(base,head.firstChild)),!absolute&&window&&window.location&&(url=window.location.origin+url),base.setAttribute("href",url))}function replaceCanonical(doc,section){var head,link,url=section.canonical;doc&&(head=Object(_core__WEBPACK_IMPORTED_MODULE_0__.qs)(doc,"head"),(link=Object(_core__WEBPACK_IMPORTED_MODULE_0__.qs)(head,"link[rel='canonical']"))?link.setAttribute("href",url):((link=doc.createElement("link")).setAttribute("rel","canonical"),link.setAttribute("href",url),head.appendChild(link)))}function replaceMeta(doc,section){var head,meta,id=section.idref;doc&&(head=Object(_core__WEBPACK_IMPORTED_MODULE_0__.qs)(doc,"head"),(meta=Object(_core__WEBPACK_IMPORTED_MODULE_0__.qs)(head,"link[property='dc.identifier']"))?meta.setAttribute("content",id):((meta=doc.createElement("meta")).setAttribute("name","dc.identifier"),meta.setAttribute("content",id),head.appendChild(meta)))}function replaceLinks(contents,fn){var links=contents.querySelectorAll("a[href]");if(links.length)for(var base=Object(_core__WEBPACK_IMPORTED_MODULE_0__.qs)(contents.ownerDocument,"base"),location=base?base.getAttribute("href"):void 0,replaceLink=function(link){var href=link.getAttribute("href");if(0!==href.indexOf("mailto:"))if(href.indexOf("://")>-1)link.setAttribute("target","_blank");else{var linkUrl;try{linkUrl=new _url__WEBPACK_IMPORTED_MODULE_1__.a(href,location)}catch(error){}link.onclick=function(){return linkUrl&&linkUrl.hash?fn(linkUrl.Path.path+linkUrl.hash):fn(linkUrl?linkUrl.Path.path:href),!1}}}.bind(this),i=0;i<links.length;i++)replaceLink(links[i])}function substitute(content,urls,replacements){return urls.forEach((function(url,i){url&&replacements[i]&&(content=content.replace(new RegExp(url,"g"),replacements[i]))})),content}},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(65),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports){var table={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},mimeTypes=function(){var type,subtype,val,index,mimeTypes={};for(type in table)if(table.hasOwnProperty(type))for(subtype in table[type])if(table[type].hasOwnProperty(subtype))if("string"==typeof(val=table[type][subtype]))mimeTypes[val]=type+"/"+subtype;else for(index=0;index<val.length;index++)mimeTypes[val[index]]=type+"/"+subtype;return mimeTypes}();module.exports={lookup:function(filename){return filename&&mimeTypes[filename.split(".").pop().toLowerCase()]||"text/plain"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_path__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5);__webpack_exports__.default=function(url,type,withCredentials,headers){var header,supportsURL="undefined"!=typeof window&&window.URL,BLOB_RESPONSE=supportsURL?"blob":"arraybuffer",deferred=new _core__WEBPACK_IMPORTED_MODULE_0__.defer,xhr=new XMLHttpRequest,xhrPrototype=XMLHttpRequest.prototype;for(header in"overrideMimeType"in xhrPrototype||Object.defineProperty(xhrPrototype,"overrideMimeType",{value:function(){}}),withCredentials&&(xhr.withCredentials=!0),xhr.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var responseXML=!1;if(""!==this.responseType&&"document"!==this.responseType||(responseXML=this.responseXML),200===this.status||0===this.status||responseXML){var r;if(!this.response&&!responseXML)return deferred.reject({status:this.status,message:"Empty Response",stack:(new Error).stack}),deferred.promise;if(403===this.status)return deferred.reject({status:this.status,response:this.response,message:"Forbidden",stack:(new Error).stack}),deferred.promise;r=responseXML?this.responseXML:Object(_core__WEBPACK_IMPORTED_MODULE_0__.isXml)(type)?Object(_core__WEBPACK_IMPORTED_MODULE_0__.parse)(this.response,"text/xml"):"xhtml"==type?Object(_core__WEBPACK_IMPORTED_MODULE_0__.parse)(this.response,"application/xhtml+xml"):"html"==type||"htm"==type?Object(_core__WEBPACK_IMPORTED_MODULE_0__.parse)(this.response,"text/html"):"json"==type?JSON.parse(this.response):"blob"==type?supportsURL?this.response:new Blob([this.response]):this.response,deferred.resolve(r)}else deferred.reject({status:this.status,message:this.response,stack:(new Error).stack})}},xhr.onerror=function(e){deferred.reject(e)},xhr.open("GET",url,!0),headers)xhr.setRequestHeader(header,headers[header]);return"json"==type&&xhr.setRequestHeader("Accept","application/json"),type||(type=new _path__WEBPACK_IMPORTED_MODULE_1__.a(url).extension),"blob"==type&&(xhr.responseType=BLOB_RESPONSE),Object(_core__WEBPACK_IMPORTED_MODULE_0__.isXml)(type)&&xhr.overrideMimeType("text/xml"),"binary"==type&&(xhr.responseType="arraybuffer"),xhr.send(),deferred.promise}},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(143),getValue=__webpack_require__(146);module.exports=function(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,__webpack_exports__,__webpack_require__){"use strict";var _core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),Queue=function(context){this._q=[],this.context=context,this.tick=_core__WEBPACK_IMPORTED_MODULE_0__.requestAnimationFrame,this.running=!1,this.paused=!1};Queue.prototype.enqueue=function(){var deferred,queued,task=[].shift.call(arguments),args=arguments;if(!task)throw new Error("No Task Provided");return queued="function"==typeof task?{task:task,args:args,deferred:deferred=new _core__WEBPACK_IMPORTED_MODULE_0__.defer,promise:deferred.promise}:{promise:task},this._q.push(queued),0!=this.paused||this.running||this.run(),queued.promise},Queue.prototype.dequeue=function(){var inwait,task,result;return!this._q.length||this.paused?((inwait=new _core__WEBPACK_IMPORTED_MODULE_0__.defer).deferred.resolve(),inwait.promise):(task=(inwait=this._q.shift()).task)?(result=task.apply(this.context,inwait.args))&&"function"==typeof result.then?result.then(function(){inwait.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){inwait.deferred.reject.apply(this.context,arguments)}.bind(this)):(inwait.deferred.resolve.apply(this.context,result),inwait.promise):inwait.promise?inwait.promise:void 0},Queue.prototype.dump=function(){for(;this._q.length;)this.dequeue()},Queue.prototype.run=function(){var this$1=this;return this.running||(this.running=!0,this.defered=new _core__WEBPACK_IMPORTED_MODULE_0__.defer),this.tick.call(window,(function(){this$1._q.length?this$1.dequeue().then(function(){this.run()}.bind(this$1)):(this$1.defered.resolve(),this$1.running=void 0)})),1==this.paused&&(this.paused=!1),this.defered.promise},Queue.prototype.flush=function(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running):void 0},Queue.prototype.clear=function(){this._q=[]},Queue.prototype.length=function(){return this._q.length},Queue.prototype.pause=function(){this.paused=!0},Queue.prototype.stop=function(){this._q=[],this.running=!1,this.paused=!0};__webpack_exports__.a=Queue},function(module,__webpack_exports__,__webpack_require__){"use strict";var views_SideBarvue_type_script_lang_js_={name:"SideBar"},componentNormalizer=(__webpack_require__(209),__webpack_require__(3)),component=Object(componentNormalizer.a)(views_SideBarvue_type_script_lang_js_,(function(){var _h=this.$createElement;return(this._self._c||_h)("div",{staticClass:"side-bar",style:{backgroundColor:this.$themePalette.grey.v_100}},[this._t("default")],2)}),[],!1,null,"5163f282",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var _epubcfi__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_utils_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),Mapping=function(layout,direction,axis,dev){this.layout=layout,this.horizontal="horizontal"===axis,this.direction=direction||"ltr",this._dev=dev};Mapping.prototype.section=function(view){var ranges=this.findRanges(view);return this.rangeListToCfiList(view.section.cfiBase,ranges)},Mapping.prototype.page=function(contents,cfiBase,start,end){var result,root=!(!contents||!contents.document)&&contents.document.body;if(root){if(result=this.rangePairToCfiPair(cfiBase,{start:this.findStart(root,start,end),end:this.findEnd(root,start,end)}),!0===this._dev){var doc=contents.document,startRange=new _epubcfi__WEBPACK_IMPORTED_MODULE_0__.a(result.start).toRange(doc),endRange=new _epubcfi__WEBPACK_IMPORTED_MODULE_0__.a(result.end).toRange(doc),selection=doc.defaultView.getSelection(),r=doc.createRange();selection.removeAllRanges(),r.setStart(startRange.startContainer,startRange.startOffset),r.setEnd(endRange.endContainer,endRange.endOffset),selection.addRange(r)}return result}},Mapping.prototype.walk=function(root,func){if(!root||root.nodeType!==Node.TEXT_NODE){var filter_acceptNode=function(node){return node.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},safeFilter=filter_acceptNode;safeFilter.acceptNode=filter_acceptNode;for(var node,result,treeWalker=document.createTreeWalker(root,NodeFilter.SHOW_TEXT,safeFilter,!1);(node=treeWalker.nextNode())&&!(result=func(node)););return result}},Mapping.prototype.findRanges=function(view){for(var start,end,columns=[],scrollWidth=view.contents.scrollWidth(),count=Math.ceil(scrollWidth/this.layout.spreadWidth)*this.layout.divisor,columnWidth=this.layout.columnWidth,gap=this.layout.gap,i=0;i<count.pages;i++)start=(columnWidth+gap)*i,end=columnWidth*(i+1)+gap*i,columns.push({start:this.findStart(view.document.body,start,end),end:this.findEnd(view.document.body,start,end)});return columns},Mapping.prototype.findStart=function(root,start,end){for(var $el,found,this$1=this,stack=[root],$prev=root;stack.length;)if($el=stack.shift(),found=this.walk($el,(function(node){var left,right,top,bottom,elPos;if(elPos=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.nodeBounds)(node),this$1.horizontal&&"ltr"===this$1.direction){if(left=this$1.horizontal?elPos.left:elPos.top,right=this$1.horizontal?elPos.right:elPos.bottom,left>=start&&left<=end)return node;if(right>start)return node;$prev=node,stack.push(node)}else if(this$1.horizontal&&"rtl"===this$1.direction){if(left=elPos.left,(right=elPos.right)<=end&&right>=start)return node;if(left<end)return node;$prev=node,stack.push(node)}else{if(top=elPos.top,bottom=elPos.bottom,top>=start&&top<=end)return node;if(bottom>start)return node;$prev=node,stack.push(node)}})))return this.findTextStartRange(found,start,end);return this.findTextStartRange($prev,start,end)},Mapping.prototype.findEnd=function(root,start,end){for(var $el,found,this$1=this,stack=[root],$prev=root;stack.length;)if($el=stack.shift(),found=this.walk($el,(function(node){var left,right,top,bottom,elPos;if(elPos=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.nodeBounds)(node),this$1.horizontal&&"ltr"===this$1.direction){if(left=Math.round(elPos.left),right=Math.round(elPos.right),left>end&&$prev)return $prev;if(right>end)return node;$prev=node,stack.push(node)}else if(this$1.horizontal&&"rtl"===this$1.direction){if(left=Math.round(this$1.horizontal?elPos.left:elPos.top),(right=Math.round(this$1.horizontal?elPos.right:elPos.bottom))<start&&$prev)return $prev;if(left<start)return node;$prev=node,stack.push(node)}else{if(top=Math.round(elPos.top),bottom=Math.round(elPos.bottom),top>end&&$prev)return $prev;if(bottom>end)return node;$prev=node,stack.push(node)}})))return this.findTextEndRange(found,start,end);return this.findTextEndRange($prev,start,end)},Mapping.prototype.findTextStartRange=function(node,start,end){for(var range,pos,ranges=this.splitTextNodeIntoRanges(node),i=0;i<ranges.length;i++)if(pos=(range=ranges[i]).getBoundingClientRect(),this.horizontal&&"ltr"===this.direction){if(pos.left>=start)return range}else if(this.horizontal&&"rtl"===this.direction){if(pos.right<=end)return range}else if(pos.top>=start)return range;return ranges[0]},Mapping.prototype.findTextEndRange=function(node,start,end){for(var prev,range,pos,left,right,top,bottom,ranges=this.splitTextNodeIntoRanges(node),i=0;i<ranges.length;i++){if(pos=(range=ranges[i]).getBoundingClientRect(),this.horizontal&&"ltr"===this.direction){if(left=pos.left,right=pos.right,left>end&&prev)return prev;if(right>end)return range}else if(this.horizontal&&"rtl"===this.direction){if(left=pos.left,(right=pos.right)<start&&prev)return prev;if(left<start)return range}else{if(top=pos.top,bottom=pos.bottom,top>end&&prev)return prev;if(bottom>end)return range}prev=range}return ranges[ranges.length-1]},Mapping.prototype.splitTextNodeIntoRanges=function(node,_splitter){var range,ranges=[],text=(node.textContent||"").trim(),doc=node.ownerDocument,splitter=_splitter||" ",pos=text.indexOf(splitter);if(-1===pos||node.nodeType!=Node.TEXT_NODE)return(range=doc.createRange()).selectNodeContents(node),[range];for((range=doc.createRange()).setStart(node,0),range.setEnd(node,pos),ranges.push(range),range=!1;-1!=pos;)(pos=text.indexOf(splitter,pos+1))>0&&(range&&(range.setEnd(node,pos),ranges.push(range)),(range=doc.createRange()).setStart(node,pos+1));return range&&(range.setEnd(node,text.length),ranges.push(range)),ranges},Mapping.prototype.rangePairToCfiPair=function(cfiBase,rangePair){var startRange=rangePair.start,endRange=rangePair.end;return startRange.collapse(!0),endRange.collapse(!1),{start:new _epubcfi__WEBPACK_IMPORTED_MODULE_0__.a(startRange,cfiBase).toString(),end:new _epubcfi__WEBPACK_IMPORTED_MODULE_0__.a(endRange,cfiBase).toString()}},Mapping.prototype.rangeListToCfiList=function(cfiBase,columns){for(var cifPair,map=[],i=0;i<columns.length;i++)cifPair=this.rangePairToCfiPair(cfiBase,columns[i]),map.push(cifPair);return map},Mapping.prototype.axis=function(axis$1){return axis$1&&(this.horizontal="horizontal"===axis$1),this.horizontal},__webpack_exports__.a=Mapping},function(module,exports){module.exports=kolibriCoreAppGlobal},function(module,exports){module.exports=function(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(29),getRawTag=__webpack_require__(118),objectToString=__webpack_require__(119),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,exports){module.exports=function(value){return null!=value&&"object"==typeof value}},function(module,__webpack_exports__,__webpack_require__){"use strict";var event_emitter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),event_emitter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(event_emitter__WEBPACK_IMPORTED_MODULE_0__),_utils_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_epubcfi__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_mapping__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18),_utils_replacements__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9),_utils_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1),hasNavigator="undefined"!=typeof navigator,isChrome=hasNavigator&&/Chrome/.test(navigator.userAgent),isWebkit=hasNavigator&&!isChrome&&/AppleWebKit/.test(navigator.userAgent),Contents=function(doc,content,cfiBase,sectionIndex){this.epubcfi=new _epubcfi__WEBPACK_IMPORTED_MODULE_2__.a,this.document=doc,this.documentElement=this.document.documentElement,this.content=content||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=sectionIndex||0,this.cfiBase=cfiBase||"",this.epubReadingSystem("epub.js",_utils_constants__WEBPACK_IMPORTED_MODULE_5__.b),this.listeners()},staticAccessors={listenedEvents:{configurable:!0}};staticAccessors.listenedEvents.get=function(){return _utils_constants__WEBPACK_IMPORTED_MODULE_5__.a},Contents.prototype.width=function(w){var frame=this.content;return w&&Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(w)&&(w+="px"),w&&(frame.style.width=w),this.window.getComputedStyle(frame).width},Contents.prototype.height=function(h){var frame=this.content;return h&&Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(h)&&(h+="px"),h&&(frame.style.height=h),this.window.getComputedStyle(frame).height},Contents.prototype.contentWidth=function(w){var content=this.content||this.document.body;return w&&Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(w)&&(w+="px"),w&&(content.style.width=w),this.window.getComputedStyle(content).width},Contents.prototype.contentHeight=function(h){var content=this.content||this.document.body;return h&&Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(h)&&(h+="px"),h&&(content.style.height=h),this.window.getComputedStyle(content).height},Contents.prototype.textWidth=function(){var width,range=this.document.createRange(),content=this.content||this.document.body,border=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.borders)(content);return range.selectNodeContents(content),width=range.getBoundingClientRect().width,border&&border.width&&(width+=border.width),Math.round(width)},Contents.prototype.textHeight=function(){var rect,height,range=this.document.createRange(),content=this.content||this.document.body,border=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.borders)(content);return range.selectNodeContents(content),(height=(rect=range.getBoundingClientRect()).height)&&border.height&&(height+=border.height),height&&rect.top&&(height+=rect.top),Math.round(height)},Contents.prototype.scrollWidth=function(){return this.documentElement.scrollWidth},Contents.prototype.scrollHeight=function(){return this.documentElement.scrollHeight},Contents.prototype.overflow=function(overflow$1){return overflow$1&&(this.documentElement.style.overflow=overflow$1),this.window.getComputedStyle(this.documentElement).overflow},Contents.prototype.overflowX=function(overflow){return overflow&&(this.documentElement.style.overflowX=overflow),this.window.getComputedStyle(this.documentElement).overflowX},Contents.prototype.overflowY=function(overflow){return overflow&&(this.documentElement.style.overflowY=overflow),this.window.getComputedStyle(this.documentElement).overflowY},Contents.prototype.css=function(property,value,priority){var content=this.content||this.document.body;return value&&content.style.setProperty(property,value,priority?"important":""),this.window.getComputedStyle(content)[property]},Contents.prototype.viewport=function(options){var settings,$viewport=this.document.querySelector("meta[name='viewport']"),parsed={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},newContent=[];if($viewport&&$viewport.hasAttribute("content")){var content=$viewport.getAttribute("content"),_width$1=content.match(/width\s*=\s*([^,]*)/),_height$1=content.match(/height\s*=\s*([^,]*)/),_scale$1=content.match(/initial-scale\s*=\s*([^,]*)/),_minimum$1=content.match(/minimum-scale\s*=\s*([^,]*)/),_maximum$1=content.match(/maximum-scale\s*=\s*([^,]*)/),_scalable$1=content.match(/user-scalable\s*=\s*([^,]*)/);_width$1&&_width$1.length&&void 0!==_width$1[1]&&(parsed.width=_width$1[1]),_height$1&&_height$1.length&&void 0!==_height$1[1]&&(parsed.height=_height$1[1]),_scale$1&&_scale$1.length&&void 0!==_scale$1[1]&&(parsed.scale=_scale$1[1]),_minimum$1&&_minimum$1.length&&void 0!==_minimum$1[1]&&(parsed.minimum=_minimum$1[1]),_maximum$1&&_maximum$1.length&&void 0!==_maximum$1[1]&&(parsed.maximum=_maximum$1[1]),_scalable$1&&_scalable$1.length&&void 0!==_scalable$1[1]&&(parsed.scalable=_scalable$1[1])}return settings=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.defaults)(options||{},parsed),options&&(settings.width&&newContent.push("width="+settings.width),settings.height&&newContent.push("height="+settings.height),settings.scale&&newContent.push("initial-scale="+settings.scale),"no"===settings.scalable?(newContent.push("minimum-scale="+settings.scale),newContent.push("maximum-scale="+settings.scale),newContent.push("user-scalable="+settings.scalable)):(settings.scalable&&newContent.push("user-scalable="+settings.scalable),settings.minimum&&newContent.push("minimum-scale="+settings.minimum),settings.maximum&&newContent.push("minimum-scale="+settings.maximum)),$viewport||(($viewport=this.document.createElement("meta")).setAttribute("name","viewport"),this.document.querySelector("head").appendChild($viewport)),$viewport.setAttribute("content",newContent.join(", ")),this.window.scrollTo(0,0)),settings},Contents.prototype.expand=function(){this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_5__.c.CONTENTS.EXPAND)},Contents.prototype.listeners=function(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),this.resizeListeners(),this.linksHandler()},Contents.prototype.removeListeners=function(){this.removeEventListeners(),this.removeSelectionListeners(),clearTimeout(this.expanding)},Contents.prototype.resizeCheck=function(){var width=this.textWidth(),height=this.textHeight();width==this._size.width&&height==this._size.height||(this._size={width:width,height:height},this.onResize&&this.onResize(this._size),this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_5__.c.CONTENTS.RESIZE,this._size))},Contents.prototype.resizeListeners=function(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)},Contents.prototype.transitionListeners=function(){var body=this.content;body.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",body.style.transitionDuration="0.001ms",body.style.transitionTimingFunction="linear",body.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)},Contents.prototype.mediaQueryListeners=function(){for(var sheets=this.document.styleSheets,mediaChangeHandler=function(m){m.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),i=0;i<sheets.length;i+=1){var rules;try{rules=sheets[i].cssRules}catch(e){return}if(!rules)return;for(var j=0;j<rules.length;j+=1){if(rules[j].media)this.window.matchMedia(rules[j].media.mediaText).addListener(mediaChangeHandler)}}},Contents.prototype.resizeObservers=function(){var this$1=this;this.observer=new MutationObserver((function(mutations){this$1.resizeCheck()}));this.observer.observe(this.document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},Contents.prototype.imageLoadListeners=function(){for(var img,images=this.document.querySelectorAll("img"),i=0;i<images.length;i++)void 0!==(img=images[i]).naturalWidth&&0===img.naturalWidth&&(img.onload=this.expand.bind(this))},Contents.prototype.fontLoadListeners=function(){this.document&&this.document.fonts&&this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))},Contents.prototype.root=function(){return this.document?this.document.documentElement:null},Contents.prototype.locationOf=function(target,ignoreClass){var position,targetPos={left:0,top:0};if(!this.document)return targetPos;if(this.epubcfi.isCfiString(target)){var range=new _epubcfi__WEBPACK_IMPORTED_MODULE_2__.a(target).toRange(this.document,ignoreClass);if(range)if(range.startContainer.nodeType===Node.ELEMENT_NODE)position=range.startContainer.getBoundingClientRect(),targetPos.left=position.left,targetPos.top=position.top;else if(isWebkit){var container=range.startContainer,newRange=new Range;try{1===container.nodeType?position=container.getBoundingClientRect():range.startOffset+2<container.length?(newRange.setStart(container,range.startOffset),newRange.setEnd(container,range.startOffset+2),position=newRange.getBoundingClientRect()):range.startOffset-2>0?(newRange.setStart(container,range.startOffset-2),newRange.setEnd(container,range.startOffset),position=newRange.getBoundingClientRect()):position=container.parentNode.getBoundingClientRect()}catch(e){console.error(e,e.stack)}}else position=range.getBoundingClientRect()}else if("string"==typeof target&&target.indexOf("#")>-1){var id=target.substring(target.indexOf("#")+1),el=this.document.getElementById(id);if(el)if(isWebkit){var newRange$1=new Range;newRange$1.selectNode(el),position=newRange$1.getBoundingClientRect()}else position=el.getBoundingClientRect()}return position&&(targetPos.left=position.left,targetPos.top=position.top),targetPos},Contents.prototype.addStylesheet=function(src){return new Promise(function(resolve,reject){var $stylesheet,ready=!1;this.document?($stylesheet=this.document.querySelector("link[href='"+src+"']"))?resolve(!0):(($stylesheet=this.document.createElement("link")).type="text/css",$stylesheet.rel="stylesheet",$stylesheet.href=src,$stylesheet.onload=$stylesheet.onreadystatechange=function(){ready||this.readyState&&"complete"!=this.readyState||(ready=!0,setTimeout((function(){resolve(!0)}),1))},this.document.head.appendChild($stylesheet)):resolve(!1)}.bind(this))},Contents.prototype.addStylesheetRules=function(rules){var styleEl,styleSheet,key="epubjs-inserted-css";if(this.document&&rules&&0!==rules.length)if((styleEl=this.document.getElementById("#"+key))||((styleEl=this.document.createElement("style")).id=key),this.document.head.appendChild(styleEl),styleSheet=styleEl.sheet,"[object Array]"===Object.prototype.toString.call(rules))for(var i=0,rl=rules.length;i<rl;i++){var j=1,rule=rules[i],selector=rules[i][0],propStr="";"[object Array]"===Object.prototype.toString.call(rule[1][0])&&(rule=rule[1],j=0);for(var pl=rule.length;j<pl;j++){var prop=rule[j];propStr+=prop[0]+":"+prop[1]+(prop[2]?" !important":"")+";\n"}styleSheet.insertRule(selector+"{"+propStr+"}",styleSheet.cssRules.length)}else Object.keys(rules).forEach((function(selector){var definition=rules[selector];if(Array.isArray(definition))definition.forEach((function(item){var result=Object.keys(item).map((function(rule){return rule+":"+item[rule]})).join(";");styleSheet.insertRule(selector+"{"+result+"}",styleSheet.cssRules.length)}));else{var result=Object.keys(definition).map((function(rule){return rule+":"+definition[rule]})).join(";");styleSheet.insertRule(selector+"{"+result+"}",styleSheet.cssRules.length)}}))},Contents.prototype.addScript=function(src){return new Promise(function(resolve,reject){var $script,ready=!1;this.document?(($script=this.document.createElement("script")).type="text/javascript",$script.async=!0,$script.src=src,$script.onload=$script.onreadystatechange=function(){ready||this.readyState&&"complete"!=this.readyState||(ready=!0,setTimeout((function(){resolve(!0)}),1))},this.document.head.appendChild($script)):resolve(!1)}.bind(this))},Contents.prototype.addClass=function(className){var content;this.document&&(content=this.content||this.document.body)&&content.classList.add(className)},Contents.prototype.removeClass=function(className){var content;this.document&&(content=this.content||this.document.body)&&content.classList.remove(className)},Contents.prototype.addEventListeners=function(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),_utils_constants__WEBPACK_IMPORTED_MODULE_5__.a.forEach((function(eventName){this.document.addEventListener(eventName,this._triggerEvent,{passive:!0})}),this))},Contents.prototype.removeEventListeners=function(){this.document&&(_utils_constants__WEBPACK_IMPORTED_MODULE_5__.a.forEach((function(eventName){this.document.removeEventListener(eventName,this._triggerEvent,{passive:!0})}),this),this._triggerEvent=void 0)},Contents.prototype.triggerEvent=function(e){this.emit(e.type,e)},Contents.prototype.addSelectionListeners=function(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))},Contents.prototype.removeSelectionListeners=function(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)},Contents.prototype.onSelectionChange=function(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var selection=this.window.getSelection();this.triggerSelectedEvent(selection)}.bind(this),250)},Contents.prototype.triggerSelectedEvent=function(selection){var range,cfirange;selection&&selection.rangeCount>0&&((range=selection.getRangeAt(0)).collapsed||(cfirange=new _epubcfi__WEBPACK_IMPORTED_MODULE_2__.a(range,this.cfiBase).toString(),this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_5__.c.CONTENTS.SELECTED,cfirange),this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_5__.c.CONTENTS.SELECTED_RANGE,range)))},Contents.prototype.range=function(_cfi,ignoreClass){return new _epubcfi__WEBPACK_IMPORTED_MODULE_2__.a(_cfi).toRange(this.document,ignoreClass)},Contents.prototype.cfiFromRange=function(range,ignoreClass){return new _epubcfi__WEBPACK_IMPORTED_MODULE_2__.a(range,this.cfiBase,ignoreClass).toString()},Contents.prototype.cfiFromNode=function(node,ignoreClass){return new _epubcfi__WEBPACK_IMPORTED_MODULE_2__.a(node,this.cfiBase,ignoreClass).toString()},Contents.prototype.map=function(layout){var map=new _mapping__WEBPACK_IMPORTED_MODULE_3__.a(layout);return map.section()},Contents.prototype.size=function(width,height){var viewport={scale:1,scalable:"no"};this.layoutStyle("scrolling"),width>=0&&(this.width(width),viewport.width=width,this.css("padding","0 "+width/12+"px")),height>=0&&(this.height(height),viewport.height=height),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(viewport)},Contents.prototype.columns=function(width,height,columnWidth,gap){var COLUMN_AXIS=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.prefixed)("column-axis"),COLUMN_GAP=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.prefixed)("column-gap"),COLUMN_WIDTH=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.prefixed)("column-width"),COLUMN_FILL=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.prefixed)("column-fill"),axis=0===this.writingMode().indexOf("vertical")?"vertical":"horizontal";this.layoutStyle("paginated"),"rtl"===this.content.dir&&this.direction("rtl"),this.width(width),this.height(height),this.viewport({width:width,height:height,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),"vertical"===axis?(this.css("padding-top",gap/2+"px",!0),this.css("padding-bottom",gap/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",gap/2+"px",!0),this.css("padding-right",gap/2+"px",!0)),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(COLUMN_AXIS,"horizontal"),this.css(COLUMN_FILL,"auto"),this.css(COLUMN_GAP,gap+"px"),this.css(COLUMN_WIDTH,columnWidth+"px")},Contents.prototype.scaler=function(scale,offsetX,offsetY){var scaleStr="scale("+scale+")",translateStr="";this.css("transform-origin","top left"),(offsetX>=0||offsetY>=0)&&(translateStr=" translate("+(offsetX||0)+"px, "+(offsetY||0)+"px )"),this.css("transform",scaleStr+translateStr)},Contents.prototype.fit=function(width,height){var viewport=this.viewport(),viewportWidth=parseInt(viewport.width),viewportHeight=parseInt(viewport.height),widthScale=width/viewportWidth,heightScale=height/viewportHeight,scale=widthScale<heightScale?widthScale:heightScale;this.layoutStyle("paginated"),this.width(viewportWidth),this.height(viewportHeight),this.overflow("hidden"),this.scaler(scale,0,0),this.css("background-size",viewportWidth*scale+"px "+viewportHeight*scale+"px"),this.css("background-color","transparent")},Contents.prototype.direction=function(dir){this.documentElement&&(this.documentElement.style.direction=dir)},Contents.prototype.mapPage=function(cfiBase,layout,start,end,dev){return new _mapping__WEBPACK_IMPORTED_MODULE_3__.a(layout,dev).page(this,cfiBase,start,end)},Contents.prototype.linksHandler=function(){var this$1=this;Object(_utils_replacements__WEBPACK_IMPORTED_MODULE_4__.c)(this.content,(function(href){this$1.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_5__.c.CONTENTS.LINK_CLICKED,href)}))},Contents.prototype.writingMode=function(mode){var WRITING_MODE=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.prefixed)("writing-mode");return mode&&this.documentElement&&(this.documentElement.style[WRITING_MODE]=mode),this.window.getComputedStyle(this.documentElement)[WRITING_MODE]||""},Contents.prototype.layoutStyle=function(style){return style&&(this._layoutStyle=style,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"},Contents.prototype.epubReadingSystem=function(name,version){return navigator.epubReadingSystem={name:name,version:version,layoutStyle:this.layoutStyle(),hasFeature:function(feature){switch(feature){case"dom-manipulation":case"layout-changes":case"touch-events":case"mouse-events":case"keyboard-events":return!0;case"spine-scripting":default:return!1}}},navigator.epubReadingSystem},Contents.prototype.destroy=function(){this.observer&&this.observer.disconnect(),this.document.removeEventListener("transitionend",this._resizeCheck),this.removeListeners()},Object.defineProperties(Contents,staticAccessors),event_emitter__WEBPACK_IMPORTED_MODULE_0___default()(Contents.prototype),__webpack_exports__.a=Contents},function(module,__webpack_exports__,__webpack_require__){"use strict";var event_emitter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),event_emitter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(event_emitter__WEBPACK_IMPORTED_MODULE_0__),_utils_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_epubcfi__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_contents__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(23),_utils_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),marks_pane__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(27),IframeView=function(section,options){this.settings=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.extend)({ignoreClass:"",axis:options.layout&&"scrolled"===options.layout.props.flow?"vertical":"horizontal",direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0},options||{}),this.id="epubjs-view-"+Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(),this.section=section,this.index=section.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new _epubcfi__WEBPACK_IMPORTED_MODULE_2__.a,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}};IframeView.prototype.container=function(axis){var element=document.createElement("div");return element.classList.add("epub-view"),element.style.height="0px",element.style.width="0px",element.style.overflow="hidden",element.style.position="relative",element.style.display="block",element.style.flex=axis&&"horizontal"==axis?"none":"initial",element},IframeView.prototype.create=function(){return this.iframe||(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write")),this.iframe},IframeView.prototype.render=function(request,show){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(request)),this.sectionRender.then(function(contents){return this.load(contents)}.bind(this)).then(function(){var this$1=this;this.layout.format(this.contents);var axis=0===this.contents.writingMode().indexOf("vertical")?"vertical":"horizontal";return this.setAxis(axis),this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.AXIS,axis),this.addListeners(),new Promise((function(resolve,reject){this$1.expand(),resolve()}))}.bind(this),function(e){return this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.LOAD_ERROR,e),new Promise((function(resolve,reject){reject(e)}))}.bind(this)).then(function(){this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.RENDERED,this.section)}.bind(this))},IframeView.prototype.reset=function(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0},IframeView.prototype.size=function(_width,_height){var width=_width||this.settings.width,height=_height||this.settings.height;"pre-paginated"===this.layout.name?this.lock("both",width,height):"horizontal"===this.settings.axis?this.lock("height",width,height):this.lock("width",width,height),this.settings.width=width,this.settings.height=height},IframeView.prototype.lock=function(what,width,height){var iframeBorders,elBorders=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.borders)(this.element);iframeBorders=this.iframe?Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.borders)(this.iframe):{width:0,height:0},"width"==what&&Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(width)&&(this.lockedWidth=width-elBorders.width-iframeBorders.width),"height"==what&&Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(height)&&(this.lockedHeight=height-elBorders.height-iframeBorders.height),"both"===what&&Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(width)&&Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(height)&&(this.lockedWidth=width-elBorders.width-iframeBorders.width,this.lockedHeight=height-elBorders.height-iframeBorders.height),this.displayed&&this.iframe&&this.expand()},IframeView.prototype.expand=function(force){var columns,width=this.lockedWidth,height=this.lockedHeight;this.iframe&&!this._expanding&&(this._expanding=!0,"pre-paginated"===this.layout.name?(width=this.layout.columnWidth,height=this.layout.height):"horizontal"===this.settings.axis?((width=this.contents.textWidth())%this.layout.pageWidth>0&&(width=Math.ceil(width/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(columns=width/this.layout.pageWidth,this.layout.divisor>1&&"reflowable"===this.layout.name&&columns%2>0&&(width+=this.layout.pageWidth))):"vertical"===this.settings.axis&&(height=this.contents.textHeight()),(this._needsReframe||width!=this._width||height!=this._height)&&this.reframe(width,height),this._expanding=!1)},IframeView.prototype.reframe=function(width,height){var size,this$1=this;Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(width)&&(this.element.style.width=width+"px",this.iframe.style.width=width+"px",this._width=width),Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.isNumber)(height)&&(this.element.style.height=height+"px",this.iframe.style.height=height+"px",this._height=height),size={width:width,height:height,widthDelta:this.prevBounds?width-this.prevBounds.width:width,heightDelta:this.prevBounds?height-this.prevBounds.height:height},this.pane&&this.pane.render(),requestAnimationFrame((function(){var mark;for(var m in this$1.marks)this$1.marks.hasOwnProperty(m)&&(mark=this$1.marks[m],this$1.placeMark(mark.element,mark.range))})),this.onResize(this,size),this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.RESIZED,size),this.prevBounds=size,this.elementBounds=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.bounds)(this.element)},IframeView.prototype.load=function(contents){var loading=new _utils_core__WEBPACK_IMPORTED_MODULE_1__.defer,loaded=loading.promise;if(!this.iframe)return loading.reject(new Error("No Iframe Available")),loaded;if(this.iframe.onload=function(event){this.onLoad(event,loading)}.bind(this),"blobUrl"===this.settings.method)this.blobUrl=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.createBlobUrl)(contents,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if("srcdoc"===this.settings.method)this.iframe.srcdoc=contents,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return loading.reject(new Error("No Document Available")),loaded;this.iframe.contentDocument.open(),this.iframe.contentDocument.write(contents),this.iframe.contentDocument.close()}return loaded},IframeView.prototype.onLoad=function(event,promise){var this$1=this;this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new _contents__WEBPACK_IMPORTED_MODULE_3__.a(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var link=this.document.querySelector("link[rel='canonical']");link?link.setAttribute("href",this.section.canonical):((link=this.document.createElement("link")).setAttribute("rel","canonical"),link.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(link)),this.contents.on(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.CONTENTS.EXPAND,(function(){this$1.displayed&&this$1.iframe&&(this$1.expand(),this$1.contents&&this$1.layout.format(this$1.contents))})),this.contents.on(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.CONTENTS.RESIZE,(function(e){this$1.displayed&&this$1.iframe&&(this$1.expand(),this$1.contents&&this$1.layout.format(this$1.contents))})),promise.resolve(this.contents)},IframeView.prototype.setLayout=function(layout){this.layout=layout,this.contents&&(this.layout.format(this.contents),this.expand())},IframeView.prototype.setAxis=function(axis){"scrolled"===this.layout.props.flow&&(axis="vertical"),this.settings.axis=axis,this.element.style.flex="horizontal"==axis?"none":"initial",this.size()},IframeView.prototype.addListeners=function(){},IframeView.prototype.removeListeners=function(layoutFunc){},IframeView.prototype.display=function(request){var displayed=new _utils_core__WEBPACK_IMPORTED_MODULE_1__.defer;return this.displayed?displayed.resolve(this):this.render(request).then(function(){this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,displayed.resolve(this)}.bind(this),(function(err){displayed.reject(err,this)})),displayed.promise},IframeView.prototype.show=function(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.SHOWN,this)},IframeView.prototype.hide=function(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.HIDDEN,this)},IframeView.prototype.offset=function(){return{top:this.element.offsetTop,left:this.element.offsetLeft}},IframeView.prototype.width=function(){return this._width},IframeView.prototype.height=function(){return this._height},IframeView.prototype.position=function(){return this.element.getBoundingClientRect()},IframeView.prototype.locationOf=function(target){this.iframe.getBoundingClientRect();var targetPos=this.contents.locationOf(target,this.settings.ignoreClass);return{left:targetPos.left,top:targetPos.top}},IframeView.prototype.onDisplayed=function(view){},IframeView.prototype.onResize=function(view,e){},IframeView.prototype.bounds=function(force){return!force&&this.elementBounds||(this.elementBounds=Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.bounds)(this.element)),this.elementBounds},IframeView.prototype.highlight=function(cfiRange,data,cb,className,styles){var this$1=this;if(void 0===data&&(data={}),void 0===className&&(className="epubjs-hl"),void 0===styles&&(styles={}),this.contents){var attributes=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},styles),range=this.contents.range(cfiRange),emitter=function(){this$1.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.MARK_CLICKED,cfiRange,data)};data.epubcfi=cfiRange,this.pane||(this.pane=new marks_pane__WEBPACK_IMPORTED_MODULE_5__.Pane(this.iframe,this.element));var m=new marks_pane__WEBPACK_IMPORTED_MODULE_5__.Highlight(range,className,data,attributes),h=this.pane.addMark(m);return this.highlights[cfiRange]={mark:h,element:h.element,listeners:[emitter,cb]},h.element.setAttribute("ref",className),h.element.addEventListener("click",emitter),h.element.addEventListener("touchstart",emitter),cb&&(h.element.addEventListener("click",cb),h.element.addEventListener("touchstart",cb)),h}},IframeView.prototype.underline=function(cfiRange,data,cb,className,styles){var this$1=this;if(void 0===data&&(data={}),void 0===className&&(className="epubjs-ul"),void 0===styles&&(styles={}),this.contents){var attributes=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},styles),range=this.contents.range(cfiRange),emitter=function(){this$1.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.MARK_CLICKED,cfiRange,data)};data.epubcfi=cfiRange,this.pane||(this.pane=new marks_pane__WEBPACK_IMPORTED_MODULE_5__.Pane(this.iframe,this.element));var m=new marks_pane__WEBPACK_IMPORTED_MODULE_5__.Underline(range,className,data,attributes),h=this.pane.addMark(m);return this.underlines[cfiRange]={mark:h,element:h.element,listeners:[emitter,cb]},h.element.setAttribute("ref",className),h.element.addEventListener("click",emitter),h.element.addEventListener("touchstart",emitter),cb&&(h.element.addEventListener("click",cb),h.element.addEventListener("touchstart",cb)),h}},IframeView.prototype.mark=function(cfiRange,data,cb){var this$1=this;if(void 0===data&&(data={}),this.contents){if(cfiRange in this.marks)return this.marks[cfiRange];var range=this.contents.range(cfiRange);if(range){var container=range.commonAncestorContainer,parent=1===container.nodeType?container:container.parentNode,emitter=function(e){this$1.emit(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.c.VIEWS.MARK_CLICKED,cfiRange,data)};range.collapsed&&1===container.nodeType?(range=new Range).selectNodeContents(container):range.collapsed&&(range=new Range).selectNodeContents(parent);var mark=this.document.createElement("a");return mark.setAttribute("ref","epubjs-mk"),mark.style.position="absolute",mark.dataset.epubcfi=cfiRange,data&&Object.keys(data).forEach((function(key){mark.dataset[key]=data[key]})),cb&&(mark.addEventListener("click",cb),mark.addEventListener("touchstart",cb)),mark.addEventListener("click",emitter),mark.addEventListener("touchstart",emitter),this.placeMark(mark,range),this.element.appendChild(mark),this.marks[cfiRange]={element:mark,range:range,listeners:[emitter,cb]},parent}}},IframeView.prototype.placeMark=function(element,range){var top,right,left;if("pre-paginated"===this.layout.name||"horizontal"!==this.settings.axis){var pos=range.getBoundingClientRect();top=pos.top,right=pos.right}else for(var rect,rects=range.getClientRects(),i=0;i!=rects.length;i++)rect=rects[i],(!left||rect.left<left)&&(left=rect.left,right=Math.ceil(left/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,top=rect.top);element.style.top=top+"px",element.style.left=right+"px"},IframeView.prototype.unhighlight=function(cfiRange){var item;cfiRange in this.highlights&&(item=this.highlights[cfiRange],this.pane.removeMark(item.mark),item.listeners.forEach((function(l){l&&(item.element.removeEventListener("click",l),item.element.removeEventListener("touchstart",l))})),delete this.highlights[cfiRange])},IframeView.prototype.ununderline=function(cfiRange){var item;cfiRange in this.underlines&&(item=this.underlines[cfiRange],this.pane.removeMark(item.mark),item.listeners.forEach((function(l){l&&(item.element.removeEventListener("click",l),item.element.removeEventListener("touchstart",l))})),delete this.underlines[cfiRange])},IframeView.prototype.unmark=function(cfiRange){var item;cfiRange in this.marks&&(item=this.marks[cfiRange],this.element.removeChild(item.element),item.listeners.forEach((function(l){l&&(item.element.removeEventListener("click",l),item.element.removeEventListener("touchstart",l))})),delete this.marks[cfiRange])},IframeView.prototype.destroy=function(){for(var cfiRange in this.highlights)this.unhighlight(cfiRange);for(var cfiRange$1 in this.underlines)this.ununderline(cfiRange$1);for(var cfiRange$2 in this.marks)this.unmark(cfiRange$2);this.blobUrl&&Object(_utils_core__WEBPACK_IMPORTED_MODULE_1__.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)},event_emitter__WEBPACK_IMPORTED_MODULE_0___default()(IframeView.prototype),__webpack_exports__.a=IframeView},function(module,__webpack_exports__,__webpack_require__){"use strict";var event_emitter=__webpack_require__(4),event_emitter_default=__webpack_require__.n(event_emitter),core=__webpack_require__(0),mapping=__webpack_require__(18),queue=__webpack_require__(16),throttle=__webpack_require__(75),throttle_default=__webpack_require__.n(throttle),stage_Stage=function(_options){this.settings=_options||{},this.id="epubjs-container-"+Object(core.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))};stage_Stage.prototype.create=function(options){var height=options.height,width=options.width,overflow=options.overflow||!1,axis=options.axis||"vertical",direction=options.direction;Object(core.extend)(this.settings,options),options.height&&Object(core.isNumber)(options.height)&&(height=options.height+"px"),options.width&&Object(core.isNumber)(options.width)&&(width=options.width+"px");var container=document.createElement("div");return container.id=this.id,container.classList.add("epub-container"),container.style.wordSpacing="0",container.style.lineHeight="0",container.style.verticalAlign="top",container.style.position="relative","horizontal"===axis&&(container.style.display="flex",container.style.flexDirection="row",container.style.flexWrap="nowrap"),width&&(container.style.width=width),height&&(container.style.height=height),overflow&&("scroll"===overflow&&"vertical"===axis?(container.style["overflow-y"]=overflow,container.style["overflow-x"]="hidden"):"scroll"===overflow&&"horizontal"===axis?(container.style["overflow-y"]="hidden",container.style["overflow-x"]=overflow):container.style.overflow=overflow),direction&&(container.dir=direction,container.style.direction=direction),direction&&this.settings.fullsize&&(document.body.style.direction=direction),container},stage_Stage.prototype.wrap=function(container){var wrapper=document.createElement("div");return wrapper.style.visibility="hidden",wrapper.style.overflow="hidden",wrapper.style.width="0",wrapper.style.height="0",wrapper.appendChild(container),wrapper},stage_Stage.prototype.getElement=function(_element){var element;if(Object(core.isElement)(_element)?element=_element:"string"==typeof _element&&(element=document.getElementById(_element)),!element)throw new Error("Not an Element");return element},stage_Stage.prototype.attachTo=function(what){var base,element=this.getElement(what);if(element)return base=this.settings.hidden?this.wrapper:this.container,element.appendChild(base),this.element=element,element},stage_Stage.prototype.getContainer=function(){return this.container},stage_Stage.prototype.onResize=function(func){Object(core.isNumber)(this.settings.width)&&Object(core.isNumber)(this.settings.height)||(this.resizeFunc=throttle_default()(func,50),window.addEventListener("resize",this.resizeFunc,!1))},stage_Stage.prototype.onOrientationChange=function(func){this.orientationChangeFunc=func,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)},stage_Stage.prototype.size=function(width,height){var bounds,_width=width||this.settings.width,_height=height||this.settings.height;null===width?(bounds=this.element.getBoundingClientRect()).width&&(width=Math.floor(bounds.width),this.container.style.width=width+"px"):Object(core.isNumber)(width)?this.container.style.width=width+"px":this.container.style.width=width,null===height?(bounds=bounds||this.element.getBoundingClientRect()).height&&(height=bounds.height,this.container.style.height=height+"px"):Object(core.isNumber)(height)?this.container.style.height=height+"px":this.container.style.height=height,Object(core.isNumber)(width)||(width=this.container.clientWidth),Object(core.isNumber)(height)||(height=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};var _windowBounds=Object(core.windowBounds)(),bodyStyles=window.getComputedStyle(document.body),bodyPadding_left=parseFloat(bodyStyles["padding-left"])||0,bodyPadding_right=parseFloat(bodyStyles["padding-right"])||0,bodyPadding_top=parseFloat(bodyStyles["padding-top"])||0,bodyPadding_bottom=parseFloat(bodyStyles["padding-bottom"])||0;return _width||(width=_windowBounds.width-bodyPadding_left-bodyPadding_right),(this.settings.fullsize&&!_height||!_height)&&(height=_windowBounds.height-bodyPadding_top-bodyPadding_bottom),{width:width-this.containerPadding.left-this.containerPadding.right,height:height-this.containerPadding.top-this.containerPadding.bottom}},stage_Stage.prototype.bounds=function(){var box;return"visible"!==this.container.style.overflow&&(box=this.container&&this.container.getBoundingClientRect()),box&&box.width&&box.height?box:Object(core.windowBounds)()},stage_Stage.prototype.getSheet=function(){var style=document.createElement("style");return style.appendChild(document.createTextNode("")),document.head.appendChild(style),style.sheet},stage_Stage.prototype.addStyleRules=function(selector,rulesArray){var scope="#"+this.id+" ",rules="";this.sheet||(this.sheet=this.getSheet()),rulesArray.forEach((function(set){for(var prop in set)set.hasOwnProperty(prop)&&(rules+=prop+":"+set[prop]+";")})),this.sheet.insertRule(scope+selector+" {"+rules+"}",0)},stage_Stage.prototype.axis=function(axis$1){"horizontal"===axis$1?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=axis$1},stage_Stage.prototype.direction=function(dir){this.container&&(this.container.dir=dir,this.container.style.direction=dir),this.settings.fullsize&&(document.body.style.direction=dir),this.settings.dir=dir},stage_Stage.prototype.overflow=function(overflow$1){this.container&&("scroll"===overflow$1&&"vertical"===this.settings.axis?(this.container.style["overflow-y"]=overflow$1,this.container.style["overflow-x"]="hidden"):"scroll"===overflow$1&&"horizontal"===this.settings.axis?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=overflow$1):this.container.style.overflow=overflow$1),this.settings.overflow=overflow$1},stage_Stage.prototype.destroy=function(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))};var stage=stage_Stage,Views=function(container){this.container=container,this._views=[],this.length=0,this.hidden=!1};Views.prototype.all=function(){return this._views},Views.prototype.first=function(){return this._views[0]},Views.prototype.last=function(){return this._views[this._views.length-1]},Views.prototype.indexOf=function(view){return this._views.indexOf(view)},Views.prototype.slice=function(){return this._views.slice.apply(this._views,arguments)},Views.prototype.get=function(i){return this._views[i]},Views.prototype.append=function(view){return this._views.push(view),this.container&&this.container.appendChild(view.element),this.length++,view},Views.prototype.prepend=function(view){return this._views.unshift(view),this.container&&this.container.insertBefore(view.element,this.container.firstChild),this.length++,view},Views.prototype.insert=function(view,index){return this._views.splice(index,0,view),this.container&&(index<this.container.children.length?this.container.insertBefore(view.element,this.container.children[index]):this.container.appendChild(view.element)),this.length++,view},Views.prototype.remove=function(view){var index=this._views.indexOf(view);index>-1&&this._views.splice(index,1),this.destroy(view),this.length--},Views.prototype.destroy=function(view){view.displayed&&view.destroy(),this.container&&this.container.removeChild(view.element),view=null},Views.prototype.forEach=function(){return this._views.forEach.apply(this._views,arguments)},Views.prototype.clear=function(){var view,len=this.length;if(this.length){for(var i=0;i<len;i++)view=this._views[i],this.destroy(view);this._views=[],this.length=0}},Views.prototype.find=function(section){for(var view,len=this.length,i=0;i<len;i++)if((view=this._views[i]).displayed&&view.section.index==section.index)return view},Views.prototype.displayed=function(){for(var view,displayed=[],len=this.length,i=0;i<len;i++)(view=this._views[i]).displayed&&displayed.push(view);return displayed},Views.prototype.show=function(){for(var view,len=this.length,i=0;i<len;i++)(view=this._views[i]).displayed&&view.show();this.hidden=!1},Views.prototype.hide=function(){for(var view,len=this.length,i=0;i<len;i++)(view=this._views[i]).displayed&&view.hide();this.hidden=!0};var views=Views,constants=__webpack_require__(1),default_DefaultViewManager=function(options){this.name="default",this.optsSettings=options.settings,this.View=options.view,this.request=options.request,this.renditionQueue=options.queue,this.q=new queue.a(this),this.settings=Object(core.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0}),Object(core.extend)(this.settings,options.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0},this.rendered=!1};default_DefaultViewManager.prototype.render=function(element,size){var tag=element.tagName;void 0!==this.settings.fullsize||!tag||"body"!=tag.toLowerCase()&&"html"!=tag.toLowerCase()||(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=size,this.stage=new stage({width:size.width,height:size.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(element),this.container=this.stage.getContainer(),this.views=new views(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0},default_DefaultViewManager.prototype.addEventListeners=function(){var scroller;window.addEventListener("unload",function(e){this.destroy()}.bind(this)),scroller=this.settings.fullsize?window:this.container,this._onScroll=this.onScroll.bind(this),scroller.addEventListener("scroll",this._onScroll)},default_DefaultViewManager.prototype.removeEventListeners=function(){(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0},default_DefaultViewManager.prototype.destroy=function(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1},default_DefaultViewManager.prototype.onOrientationChange=function(e){var orientation=window.orientation;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(constants.c.MANAGERS.ORIENTATION_CHANGE,orientation)}.bind(this),500)},default_DefaultViewManager.prototype.onResized=function(e){this.resize()},default_DefaultViewManager.prototype.resize=function(width,height){var stageSize=this.stage.size(width,height);this.winBounds=Object(core.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height?this._stageSize=void 0:this._stageSize&&this._stageSize.width===stageSize.width&&this._stageSize.height===stageSize.height||(this._stageSize=stageSize,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(constants.c.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height}))},default_DefaultViewManager.prototype.createView=function(section){return new this.View(section,this.viewSettings)},default_DefaultViewManager.prototype.display=function(section,target){var displaying=new core.defer,displayed=displaying.promise;(target===section.href||Object(core.isNumber)(target))&&(target=void 0);var visible=this.views.find(section);if(visible&&section){var offset=visible.offset();if("ltr"===this.settings.direction)this.scrollTo(offset.left,offset.top,!0);else{var width=visible.width();this.scrollTo(offset.left+width,offset.top,!0)}if(target){var offset$1=visible.locationOf(target);this.moveTo(offset$1)}return displaying.resolve(),displayed}return this.clear(),this.add(section).then(function(view){if(target){var offset=view.locationOf(target);this.moveTo(offset)}}.bind(this),(function(err){displaying.reject(err)})).then(function(){var next;if("pre-paginated"===this.layout.name&&this.layout.divisor>1&&section.index>0&&(next=section.next()))return this.add(next)}.bind(this)).then(function(){this.views.show(),displaying.resolve()}.bind(this)),displayed},default_DefaultViewManager.prototype.afterDisplayed=function(view){this.emit(constants.c.MANAGERS.ADDED,view)},default_DefaultViewManager.prototype.afterResized=function(view){this.emit(constants.c.MANAGERS.RESIZE,view.section)},default_DefaultViewManager.prototype.moveTo=function(offset){var distX=0,distY=0;this.isPaginated?(distX=Math.floor(offset.left/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollWidth&&(distX=this.container.scrollWidth-this.layout.delta):distY=offset.top,this.scrollTo(distX,distY,!0)},default_DefaultViewManager.prototype.add=function(section){var this$1=this,view=this.createView(section);return this.views.append(view),view.onDisplayed=this.afterDisplayed.bind(this),view.onResize=this.afterResized.bind(this),view.on(constants.c.VIEWS.AXIS,(function(axis){this$1.updateAxis(axis)})),view.display(this.request)},default_DefaultViewManager.prototype.append=function(section){var this$1=this,view=this.createView(section);return this.views.append(view),view.onDisplayed=this.afterDisplayed.bind(this),view.onResize=this.afterResized.bind(this),view.on(constants.c.VIEWS.AXIS,(function(axis){this$1.updateAxis(axis)})),view.display(this.request)},default_DefaultViewManager.prototype.prepend=function(section){var this$1=this,view=this.createView(section);return view.on(constants.c.VIEWS.RESIZED,(function(bounds){this$1.counter(bounds)})),this.views.prepend(view),view.onDisplayed=this.afterDisplayed.bind(this),view.onResize=this.afterResized.bind(this),view.on(constants.c.VIEWS.AXIS,(function(axis){this$1.updateAxis(axis)})),view.display(this.request)},default_DefaultViewManager.prototype.counter=function(bounds){"vertical"===this.settings.axis?this.scrollBy(0,bounds.heightDelta,!0):this.scrollBy(bounds.widthDelta,0,!0)},default_DefaultViewManager.prototype.next=function(){var next,dir=this.settings.direction;if(this.views.length){if(!this.isPaginated||"horizontal"!==this.settings.axis||dir&&"ltr"!==dir)if(this.isPaginated&&"horizontal"===this.settings.axis&&"rtl"===dir)this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft>0?this.scrollBy(this.layout.delta,0,!0):next=this.views.last().section.next();else if(this.isPaginated&&"vertical"===this.settings.axis){this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):next=this.views.last().section.next()}else next=this.views.last().section.next();else this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft+this.container.offsetWidth+this.layout.delta<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):next=this.views.last().section.next();return next?(this.clear(),this.append(next).then(function(){var right;if("pre-paginated"===this.layout.name&&this.layout.divisor>1&&(right=next.next()))return this.append(right)}.bind(this),(function(err){return err})).then(function(){this.views.show()}.bind(this))):void 0}},default_DefaultViewManager.prototype.prev=function(){var prev,dir=this.settings.direction;if(this.views.length){if(!this.isPaginated||"horizontal"!==this.settings.axis||dir&&"ltr"!==dir)if(this.isPaginated&&"horizontal"===this.settings.axis&&"rtl"===dir)this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft+this.container.offsetWidth+this.layout.delta<=this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):prev=this.views.first().section.prev();else if(this.isPaginated&&"vertical"===this.settings.axis){this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):prev=this.views.first().section.prev()}else prev=this.views.first().section.prev();else this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft>0?this.scrollBy(-this.layout.delta,0,!0):prev=this.views.first().section.prev();return prev?(this.clear(),this.prepend(prev).then(function(){var left;if("pre-paginated"===this.layout.name&&this.layout.divisor>1&&(left=prev.prev()))return this.prepend(left)}.bind(this),(function(err){return err})).then(function(){this.isPaginated&&"horizontal"===this.settings.axis&&("rtl"===this.settings.direction?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))):void 0}},default_DefaultViewManager.prototype.current=function(){var visible=this.visible();return visible.length?visible[visible.length-1]:null},default_DefaultViewManager.prototype.clear=function(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())},default_DefaultViewManager.prototype.currentLocation=function(){return"vertical"===this.settings.axis?this.location=this.scrolledLocation():this.location=this.paginatedLocation(),this.location},default_DefaultViewManager.prototype.scrolledLocation=function(){var this$1=this,visible=this.visible(),container=this.container.getBoundingClientRect(),pageHeight=container.height<window.innerHeight?container.height:window.innerHeight,offset=0,used=0;return this.settings.fullsize&&(offset=window.scrollY),visible.map((function(view){var ref=view.section,index=ref.index,href=ref.href,position=view.position(),height=view.height(),startPos=offset+container.top-position.top+used,endPos=startPos+pageHeight-used;endPos>height&&(used=(endPos=height)-startPos);var totalPages=this$1.layout.count(height,pageHeight).pages,currPage=Math.ceil(startPos/pageHeight),pages=[],endPage=Math.ceil(endPos/pageHeight);pages=[];for(var i=currPage;i<=endPage;i++){var pg=i+1;pages.push(pg)}return{index:index,href:href,pages:pages,totalPages:totalPages,mapping:this$1.mapping.page(view.contents,view.section.cfiBase,startPos,endPos)}}))},default_DefaultViewManager.prototype.paginatedLocation=function(){var this$1=this,visible=this.visible(),container=this.container.getBoundingClientRect(),left=0;return this.settings.fullsize&&(left=window.scrollX),visible.map((function(view){var ref=view.section,index=ref.index,href=ref.href,position=(view.offset().left,view.position().left),width=view.width(),start=left+container.left-position+0,end=start+this$1.layout.width-0,mapping=this$1.mapping.page(view.contents,view.section.cfiBase,start,end),totalPages=this$1.layout.count(width).pages,startPage=Math.floor(start/this$1.layout.pageWidth),pages=[],endPage=Math.floor(end/this$1.layout.pageWidth);if(startPage<0&&(startPage=0,endPage+=1),"rtl"===this$1.settings.direction){var tempStartPage=startPage;startPage=totalPages-endPage,endPage=totalPages-tempStartPage}for(var i=startPage+1;i<=endPage;i++){var pg=i;pages.push(pg)}return{index:index,href:href,pages:pages,totalPages:totalPages,mapping:mapping}}))},default_DefaultViewManager.prototype.isVisible=function(view,offsetPrev,offsetNext,_container){var position=view.position(),container=_container||this.bounds();return"horizontal"===this.settings.axis&&position.right>container.left-offsetPrev&&position.left<container.right+offsetNext||"vertical"===this.settings.axis&&position.bottom>container.top-offsetPrev&&position.top<container.bottom+offsetNext},default_DefaultViewManager.prototype.visible=function(){for(var view,container=this.bounds(),views=this.views.displayed(),viewsLength=views.length,visible=[],i=0;i<viewsLength;i++)view=views[i],!0===this.isVisible(view,0,0,container)&&visible.push(view);return visible},default_DefaultViewManager.prototype.scrollBy=function(x,y,silent){var dir="rtl"===this.settings.direction?-1:1;silent&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(x*dir,y*dir):(x&&(this.container.scrollLeft+=x*dir),y&&(this.container.scrollTop+=y)),this.scrolled=!0},default_DefaultViewManager.prototype.scrollTo=function(x,y,silent){silent&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(x,y):(this.container.scrollLeft=x,this.container.scrollTop=y),this.scrolled=!0},default_DefaultViewManager.prototype.onScroll=function(){var scrollTop,scrollLeft;this.settings.fullsize?(scrollTop=window.scrollY,scrollLeft=window.scrollX):(scrollTop=this.container.scrollTop,scrollLeft=this.container.scrollLeft),this.scrollTop=scrollTop,this.scrollLeft=scrollLeft,this.ignore?this.ignore=!1:(this.emit(constants.c.MANAGERS.SCROLL,{top:scrollTop,left:scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(constants.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))},default_DefaultViewManager.prototype.bounds=function(){var bounds;return bounds=this.stage.bounds(),bounds},default_DefaultViewManager.prototype.applyLayout=function(layout){this.layout=layout,this.updateLayout()},default_DefaultViewManager.prototype.updateLayout=function(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))},default_DefaultViewManager.prototype.setLayout=function(layout){this.viewSettings.layout=layout,this.mapping=new mapping.a(layout.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach((function(view){view&&view.setLayout(layout)}))},default_DefaultViewManager.prototype.updateAxis=function(axis,forceUpdate){this.isPaginated||(axis="vertical"),(forceUpdate||axis!==this.settings.axis)&&(this.settings.axis=axis,this.stage&&this.stage.axis(axis),this.viewSettings.axis=axis,this.mapping&&(this.mapping=new mapping.a(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&("vertical"===axis?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))},default_DefaultViewManager.prototype.updateFlow=function(flow,defaultScrolledOverflow){void 0===defaultScrolledOverflow&&(defaultScrolledOverflow="auto");var isPaginated="paginated"===flow||"auto"===flow;this.isPaginated=isPaginated,"scrolled-doc"===flow||"scrolled-continuous"===flow||"scrolled"===flow?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=flow,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=isPaginated?"hidden":defaultScrolledOverflow,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()},default_DefaultViewManager.prototype.getContents=function(){var contents=[];return this.views?(this.views.forEach((function(view){var viewContents=view&&view.contents;viewContents&&contents.push(viewContents)})),contents):contents},default_DefaultViewManager.prototype.direction=function(dir){void 0===dir&&(dir="ltr"),this.settings.direction=dir,this.stage&&this.stage.direction(dir),this.viewSettings.direction=dir,this.updateLayout()},default_DefaultViewManager.prototype.isRendered=function(){return this.rendered},event_emitter_default()(default_DefaultViewManager.prototype);__webpack_exports__.a=default_DefaultViewManager},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return THEMES})),__webpack_require__.d(__webpack_exports__,"b",(function(){return darkThemeNames}));var loglevel=__webpack_require__(84),loglevel_default=__webpack_require__.n(loglevel),external_kolibriCoreAppGlobal_lib_vue_=__webpack_require__(85),styles_globalThemeState=__webpack_require__.n(external_kolibriCoreAppGlobal_lib_vue_).a.observable({inputModality:null,mediaType:null,colors:{palette:{black:"#000000",white:"#ffffff",red:{v_50:"#ffebee",v_100:"#ffcdd2",v_200:"#ef9a9a",v_300:"#e57373",v_400:"#ef5350",v_500:"#f44336",v_600:"#e53935",v_700:"#d32f2f",v_800:"#c62828",v_900:"#b71c1c",v_a100:"#ff8a80",v_a200:"#ff5252",v_a400:"#ff1744",v_a700:"#d50000"},pink:{v_50:"#fce4ec",v_100:"#f8bbd0",v_200:"#f48fb1",v_300:"#f06292",v_400:"#ec407a",v_500:"#e91e63",v_600:"#d81b60",v_700:"#c2185b",v_800:"#ad1457",v_900:"#880e4f",v_a100:"#ff80ab",v_a200:"#ff4081",v_a400:"#f50057",v_a700:"#c51162"},purple:{v_50:"#f3e5f5",v_100:"#e1bee7",v_200:"#ce93d8",v_300:"#ba68c8",v_400:"#ab47bc",v_500:"#9c27b0",v_600:"#8e24aa",v_700:"#7b1fa2",v_800:"#6a1b9a",v_900:"#4a148c",v_a100:"#ea80fc",v_a200:"#e040fb",v_a400:"#d500f9",v_a700:"#aa00ff"},deeppurple:{v_50:"#ede7f6",v_100:"#d1c4e9",v_200:"#b39ddb",v_300:"#9575cd",v_400:"#7e57c2",v_500:"#673ab7",v_600:"#5e35b1",v_700:"#512da8",v_800:"#4527a0",v_900:"#311b92",v_a100:"#b388ff",v_a200:"#7c4dff",v_a400:"#651fff",v_a700:"#6200ea"},indigo:{v_50:"#e8eaf6",v_100:"#c5cae9",v_200:"#9fa8da",v_300:"#7986cb",v_400:"#5c6bc0",v_500:"#3f51b5",v_600:"#3949ab",v_700:"#303f9f",v_800:"#283593",v_900:"#1a237e",v_a100:"#8c9eff",v_a200:"#536dfe",v_a400:"#3d5afe",v_a700:"#304ffe"},blue:{v_50:"#e3f2fd",v_100:"#bbdefb",v_200:"#90caf9",v_300:"#64b5f6",v_400:"#42a5f5",v_500:"#2196f3",v_600:"#1e88e5",v_700:"#1976d2",v_800:"#1565c0",v_900:"#0d47a1",v_a100:"#82b1ff",v_a200:"#448aff",v_a400:"#2979ff",v_a700:"#2962ff"},lightblue:{v_50:"#e1f5fe",v_100:"#b3e5fc",v_200:"#81d4fa",v_300:"#4fc3f7",v_400:"#29b6f6",v_500:"#03a9f4",v_600:"#039be5",v_700:"#0288d1",v_800:"#0277bd",v_900:"#01579b",v_a100:"#80d8ff",v_a200:"#40c4ff",v_a400:"#00b0ff",v_a700:"#0091ea"},cyan:{v_50:"#e0f7fa",v_100:"#b2ebf2",v_200:"#80deea",v_300:"#4dd0e1",v_400:"#26c6da",v_500:"#00bcd4",v_600:"#00acc1",v_700:"#0097a7",v_800:"#00838f",v_900:"#006064",v_a100:"#84ffff",v_a200:"#18ffff",v_a400:"#00e5ff",v_a700:"#00b8d4"},teal:{v_50:"#e0f2f1",v_100:"#b2dfdb",v_200:"#80cbc4",v_300:"#4db6ac",v_400:"#26a69a",v_500:"#009688",v_600:"#00897b",v_700:"#00796b",v_800:"#00695c",v_900:"#004d40",v_a100:"#a7ffeb",v_a200:"#64ffda",v_a400:"#1de9b6",v_a700:"#00bfa5"},green:{v_50:"#e8f5e9",v_100:"#c8e6c9",v_200:"#a5d6a7",v_300:"#81c784",v_400:"#66bb6a",v_500:"#4caf50",v_600:"#43a047",v_700:"#388e3c",v_800:"#2e7d32",v_900:"#1b5e20",v_a100:"#b9f6ca",v_a200:"#69f0ae",v_a400:"#00e676",v_a700:"#00c853"},lightgreen:{v_50:"#f1f8e9",v_100:"#dcedc8",v_200:"#c5e1a5",v_300:"#aed581",v_400:"#9ccc65",v_500:"#8bc34a",v_600:"#7cb342",v_700:"#689f38",v_800:"#558b2f",v_900:"#33691e",v_a100:"#ccff90",v_a200:"#b2ff59",v_a400:"#76ff03",v_a700:"#64dd17"},lime:{v_50:"#f9fbe7",v_100:"#f0f4c3",v_200:"#e6ee9c",v_300:"#dce775",v_400:"#d4e157",v_500:"#cddc39",v_600:"#c0ca33",v_700:"#afb42b",v_800:"#9e9d24",v_900:"#827717",v_a100:"#f4ff81",v_a200:"#eeff41",v_a400:"#c6ff00",v_a700:"#aeea00"},yellow:{v_50:"#fffde7",v_100:"#fff9c4",v_200:"#fff59d",v_300:"#fff176",v_400:"#ffee58",v_500:"#ffeb3b",v_600:"#fdd835",v_700:"#fbc02d",v_800:"#f9a825",v_900:"#f57f17",v_a100:"#ffff8d",v_a200:"#ffff00",v_a400:"#ffea00",v_a700:"#ffd600"},amber:{v_50:"#fff8e1",v_100:"#ffecb3",v_200:"#ffe082",v_300:"#ffd54f",v_400:"#ffca28",v_500:"#ffc107",v_600:"#ffb300",v_700:"#ffa000",v_800:"#ff8f00",v_900:"#ff6f00",v_a100:"#ffe57f",v_a200:"#ffd740",v_a400:"#ffc400",v_a700:"#ffab00"},orange:{v_50:"#fff3e0",v_100:"#ffe0b2",v_200:"#ffcc80",v_300:"#ffb74d",v_400:"#ffa726",v_500:"#ff9800",v_600:"#fb8c00",v_700:"#f57c00",v_800:"#ef6c00",v_900:"#e65100",v_a100:"#ffd180",v_a200:"#ffab40",v_a400:"#ff9100",v_a700:"#ff6d00"},deeporange:{v_50:"#fbe9e7",v_100:"#ffccbc",v_200:"#ffab91",v_300:"#ff8a65",v_400:"#ff7043",v_500:"#ff5722",v_600:"#f4511e",v_700:"#e64a19",v_800:"#d84315",v_900:"#bf360c",v_a100:"#ff9e80",v_a200:"#ff6e40",v_a400:"#ff3d00",v_a700:"#dd2c00"},brown:{v_50:"#efebe9",v_100:"#d7ccc8",v_200:"#bcaaa4",v_300:"#a1887f",v_400:"#8d6e63",v_500:"#795548",v_600:"#6d4c41",v_700:"#5d4037",v_800:"#4e342e",v_900:"#3e2723"},grey:{v_50:"#fafafa",v_100:"#f5f5f5",v_200:"#eeeeee",v_300:"#e0e0e0",v_400:"#bdbdbd",v_500:"#9e9e9e",v_600:"#757575",v_700:"#616161",v_800:"#424242",v_900:"#212121"},bluegrey:{v_50:"#eceff1",v_100:"#cfd8dc",v_200:"#b0bec5",v_300:"#90a4ae",v_400:"#78909c",v_500:"#607d8b",v_600:"#546e7a",v_700:"#455a64",v_800:"#37474f",v_900:"#263238"}},brand:{primary:{v_50:"#f0e7ed",v_100:"#dbc3d4",v_200:"#c59db9",v_300:"#ac799d",v_400:"#996189",v_500:"#874e77",v_600:"#7c4870",v_700:"#6e4167",v_800:"#5f3b5c",v_900:"#4b2e4d"},secondary:{v_50:"#e3f0ed",v_100:"#badbd2",v_200:"#8dc5b6",v_300:"#62af9a",v_400:"#479e86",v_500:"#368d74",v_600:"#328168",v_700:"#2c715a",v_800:"#26614d",v_900:"#1b4634"}}},tokenMapping:{primary:"brand.primary.v_400",primaryDark:"brand.primary.v_700",text:"palette.grey.v_900",textDisabled:"palette.grey.v_300",annotation:"palette.grey.v_700",textInverted:"palette.white",link:"brand.primary.v_400",linkDark:"brand.primary.v_700",loading:"brand.secondary.v_200",focusOutline:"brand.secondary.v_200",surface:"palette.white",fineLine:"#dedede",appBar:"brand.primary.v_400",appBarDark:"brand.primary.v_700",appBarFullscreen:"palette.grey.v_900",appBarFullscreenDark:"black",error:"palette.red.v_700",success:"palette.green.v_700",progress:"palette.lightblue.v_500",mastered:"palette.amber.v_500",correct:"palette.green.v_600",incorrect:"palette.red.v_800",coachContent:"palette.lightblue.v_800",superAdmin:"palette.amber.v_600",exercise:"palette.cyan.v_600",video:"palette.indigo.v_700",audio:"palette.pink.v_400",document:"palette.deeporange.v_600",html5:"palette.yellow.v_800",topic:"palette.grey.v_800",slideshow:"palette.green.v_400"}});function throwThemeError(tokenName,mapString){throw"Theme issue: '"+tokenName+"' has invalid mapping '"+mapString+"'"}var HEX_COLOR_PATTERN=RegExp("#[0-9a-fA-F]{6}"),tokens={};function generateTokenToColorMapping(){var newTokens={};return Object.keys(styles_globalThemeState.tokenMapping).forEach((function(tokenName){var mapString=styles_globalThemeState.tokenMapping[tokenName];if(-1!==mapString.indexOf(".")){for(var refs=mapString.split("."),obj=styles_globalThemeState.colors;refs.length;){var key=refs.shift();obj[key]||throwThemeError(tokenName,mapString),obj=obj[key]}"string"!=typeof obj&&throwThemeError(tokenName,mapString),HEX_COLOR_PATTERN.test(obj)||loglevel_default.a.warn("Theme issue: Unexpected value '"+obj+"' for token '"+tokenName+"'"),newTokens[tokenName]=obj}else newTokens[tokenName]=mapString})),Object.assign(tokens,newTokens),tokens}function themeTokens(){return tokens}function themePalette(){return styles_globalThemeState.colors.palette}generateTokenToColorMapping();var THEMES={WHITE:{name:"WHITE",backgroundColor:themeTokens().surface,hoverColor:themePalette().grey.v_200,textColor:themeTokens().text},BEIGE:{name:"BEIGE",backgroundColor:themePalette().brown.v_50,hoverColor:themePalette().brown.v_100,textColor:themePalette().brown.v_800},GREY:{name:"GREY",backgroundColor:themePalette().grey.v_800,hoverColor:themePalette().grey.v_600,textColor:themePalette().white},BLACK:{name:"BLACK",backgroundColor:themePalette().grey.v_900,hoverColor:themePalette().grey.v_700,textColor:themePalette().grey.v_400},YELLOW:{name:"YELLOW",backgroundColor:themePalette().grey.v_900,hoverColor:themePalette().grey.v_700,textColor:themePalette().yellow.v_300},BLUE:{name:"BLUE",backgroundColor:themeTokens().surface,hoverColor:themePalette().grey.v_200,textColor:themePalette().blue.v_800}},darkThemeNames=["BLACK","GREY","YELLOW"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Underline=exports.Highlight=exports.Mark=exports.Pane=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_svg2=_interopRequireDefault(__webpack_require__(115)),_events2=_interopRequireDefault(__webpack_require__(116));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.Pane=function(){function Pane(target){var container=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;_classCallCheck(this,Pane),this.target=target,this.element=_svg2.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),_events2.default.proxyMouse(this.target,this.marks),this.container=container,this.container.appendChild(this.element),this.render()}return _createClass(Pane,[{key:"addMark",value:function(mark){var g=_svg2.default.createElement("g");return this.element.appendChild(g),mark.bind(g,this.container),this.marks.push(mark),mark.render(),mark}},{key:"removeMark",value:function(mark){var idx=this.marks.indexOf(mark);if(-1!==idx){var el=mark.unbind();this.element.removeChild(el),this.marks.splice(idx,1)}}},{key:"render",value:function(){var el,container,offset,rect;!function(el,coords){el.style.setProperty("top",coords.top+"px","important"),el.style.setProperty("left",coords.left+"px","important"),el.style.setProperty("height",coords.height+"px","important"),el.style.setProperty("width",coords.width+"px","important")}(this.element,(el=this.target,container=this.container,offset=container.getBoundingClientRect(),rect=el.getBoundingClientRect(),{top:rect.top-offset.top,left:rect.left-offset.left,height:el.scrollHeight,width:el.scrollWidth}));var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.marks[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.render()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]),Pane}();var Mark=exports.Mark=function(){function Mark(){_classCallCheck(this,Mark),this.element=null}return _createClass(Mark,[{key:"bind",value:function(element,container){this.element=element,this.container=container}},{key:"unbind",value:function(){var el=this.element;return this.element=null,el}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(e){this.element&&this.element.dispatchEvent(e)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var rects=[],el=this.element.firstChild;el;)rects.push(el.getBoundingClientRect()),el=el.nextSibling;return rects}},{key:"filteredRanges",value:function(){var rects=Array.from(this.range.getClientRects());return rects.filter((function(box){for(var i=0;i<rects.length;i++){if(rects[i]===box)return!0;if(rect1=rects[i],(rect2=box).right<=rect1.right&&rect2.left>=rect1.left&&rect2.top>=rect1.top&&rect2.bottom<=rect1.bottom)return!1}var rect1,rect2;return!0}))}}]),Mark}(),Highlight=exports.Highlight=function(_Mark){function Highlight(range,className,data,attributes){_classCallCheck(this,Highlight);var _this=_possibleConstructorReturn(this,(Highlight.__proto__||Object.getPrototypeOf(Highlight)).call(this));return _this.range=range,_this.className=className,_this.data=data||{},_this.attributes=attributes||{},_this}return _inherits(Highlight,_Mark),_createClass(Highlight,[{key:"bind",value:function(element,container){for(var attr in function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0}(Highlight.prototype.__proto__||Object.getPrototypeOf(Highlight.prototype),"bind",this).call(this,element,container),this.data)this.data.hasOwnProperty(attr)&&(this.element.dataset[attr]=this.data[attr]);for(var attr in this.attributes)this.attributes.hasOwnProperty(attr)&&this.element.setAttribute(attr,this.attributes[attr]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var docFrag=this.element.ownerDocument.createDocumentFragment(),filtered=this.filteredRanges(),offset=this.element.getBoundingClientRect(),container=this.container.getBoundingClientRect(),i=0,len=filtered.length;i<len;i++){var r=filtered[i],el=_svg2.default.createElement("rect");el.setAttribute("x",r.left-offset.left+container.left),el.setAttribute("y",r.top-offset.top+container.top),el.setAttribute("height",r.height),el.setAttribute("width",r.width),docFrag.appendChild(el)}this.element.appendChild(docFrag)}}]),Highlight}(Mark);exports.Underline=function(_Highlight){function Underline(range,className,data,attributes){return _classCallCheck(this,Underline),_possibleConstructorReturn(this,(Underline.__proto__||Object.getPrototypeOf(Underline)).call(this,range,className,data,attributes))}return _inherits(Underline,_Highlight),_createClass(Underline,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var docFrag=this.element.ownerDocument.createDocumentFragment(),filtered=this.filteredRanges(),offset=this.element.getBoundingClientRect(),container=this.container.getBoundingClientRect(),i=0,len=filtered.length;i<len;i++){var r=filtered[i],rect=_svg2.default.createElement("rect");rect.setAttribute("x",r.left-offset.left+container.left),rect.setAttribute("y",r.top-offset.top+container.top),rect.setAttribute("height",r.height),rect.setAttribute("width",r.width),rect.setAttribute("fill","none");var line=_svg2.default.createElement("line");line.setAttribute("x1",r.left-offset.left+container.left),line.setAttribute("x2",r.left-offset.left+container.left+r.width),line.setAttribute("y1",r.top-offset.top+container.top+r.height-1),line.setAttribute("y2",r.top-offset.top+container.top+r.height-1),line.setAttribute("stroke-width",1),line.setAttribute("stroke","black"),line.setAttribute("stroke-linecap","square"),docFrag.appendChild(rect),docFrag.appendChild(line)}this.element.appendChild(docFrag)}}]),Underline}(Highlight)},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(21),isObjectLike=__webpack_require__(22);module.exports=function(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(10).Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(133),listCacheDelete=__webpack_require__(134),listCacheGet=__webpack_require__(135),listCacheHas=__webpack_require__(136),listCacheSet=__webpack_require__(137);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports,__webpack_require__){var eq=__webpack_require__(67);module.exports=function(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(14)(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(155);module.exports=function(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var epubjs_src_epub__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(58),epubjs_src_utils_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),mark_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(47),mark_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(mark_js__WEBPACK_IMPORTED_MODULE_2__),lodash_isEqual__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(76),lodash_isEqual__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_3__),lodash_get__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(59),lodash_get__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_4__),lodash_clamp__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(77),lodash_clamp__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash_clamp__WEBPACK_IMPORTED_MODULE_5__),lockr__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(52),lockr__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(lockr__WEBPACK_IMPORTED_MODULE_6__),vue_focus_lock__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(78),vue_focus_lock__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(vue_focus_lock__WEBPACK_IMPORTED_MODULE_7__),vuex__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(79),kolibri_coreVue_components_CoreFullscreen__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(80),kolibri_coreVue_components_CoreFullscreen__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(kolibri_coreVue_components_CoreFullscreen__WEBPACK_IMPORTED_MODULE_9__),kolibri_coreVue_mixins_responsiveElementMixin__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(81),kolibri_coreVue_mixins_responsiveElementMixin__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(kolibri_coreVue_mixins_responsiveElementMixin__WEBPACK_IMPORTED_MODULE_10__),kolibri_coreVue_mixins_responsiveWindowMixin__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(82),kolibri_coreVue_mixins_responsiveWindowMixin__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(kolibri_coreVue_mixins_responsiveWindowMixin__WEBPACK_IMPORTED_MODULE_11__),_SandboxIFrameView__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(60),_LoadingScreen__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(88),_LoadingError__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(89),_TopBar__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(90),_TableOfContentsSideBar_vue__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(87),_SettingsSideBar__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(95),_SearchSideBar__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(93),_BottomBar__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(94),_PreviousButton__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(92),_NextButton__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(91),_TocButton__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(48),_SettingsButton__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(49),_SearchButton__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(50),_EpubConstants__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(26),SIDE_BARS_TOC="TOC",SIDE_BARS_SEARCH="SEARCH",SIDE_BARS_SETTINGS="SETTINGS";__webpack_exports__.a={name:"EpubRendererIndex",components:{CoreFullscreen:kolibri_coreVue_components_CoreFullscreen__WEBPACK_IMPORTED_MODULE_9___default.a,TopBar:_TopBar__WEBPACK_IMPORTED_MODULE_15__.a,TableOfContentsSideBar:_TableOfContentsSideBar_vue__WEBPACK_IMPORTED_MODULE_16__.a,SettingsSideBar:_SettingsSideBar__WEBPACK_IMPORTED_MODULE_17__.a,SearchSideBar:_SearchSideBar__WEBPACK_IMPORTED_MODULE_18__.a,LoadingScreen:_LoadingScreen__WEBPACK_IMPORTED_MODULE_13__.a,BottomBar:_BottomBar__WEBPACK_IMPORTED_MODULE_19__.a,PreviousButton:_PreviousButton__WEBPACK_IMPORTED_MODULE_20__.a,NextButton:_NextButton__WEBPACK_IMPORTED_MODULE_21__.a,FocusLock:vue_focus_lock__WEBPACK_IMPORTED_MODULE_7___default.a,TocButton:_TocButton__WEBPACK_IMPORTED_MODULE_22__.a,SettingsButton:_SettingsButton__WEBPACK_IMPORTED_MODULE_23__.a,SearchButton:_SearchButton__WEBPACK_IMPORTED_MODULE_24__.a,LoadingError:_LoadingError__WEBPACK_IMPORTED_MODULE_14__.a},mixins:[kolibri_coreVue_mixins_responsiveWindowMixin__WEBPACK_IMPORTED_MODULE_11___default.a,kolibri_coreVue_mixins_responsiveElementMixin__WEBPACK_IMPORTED_MODULE_10___default.a],data:function(){return{book:null,rendition:null,toc:[],locations:[],loaded:!1,errorLoading:!1,sideBarOpen:null,theme:_EpubConstants__WEBPACK_IMPORTED_MODULE_25__.a.WHITE,fontSize:null,isInFullscreen:!1,markInstance:null,currentSection:null,searchQuery:null,sliderValue:0,scrolled:!1,currentLocation:null,updateContentStateInterval:null}},computed:Object.assign({},Object(vuex__WEBPACK_IMPORTED_MODULE_8__.mapGetters)(["sessionTimeSpent"]),{isAtStart:function(){return lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(this.rendition,"location.atStart",!1)},isAtEnd:function(){return lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(this.rendition,"location.atEnd",!1)},savedLocation:function(){return this.extraFields&&this.extraFields.contentState?this.extraFields.contentState.savedLocation:null},epubURL:function(){return this.defaultFile.storage_url},backgroundColor:function(){return this.theme.backgroundColor},textColor:function(){return this.theme.textColor},themeStyle:function(){var colorStyle={"background-color":this.backgroundColor+"!important",color:this.textColor+"!important"},alignmentStyle={"text-align":(this.isRtl?"right":"left")+"!important"},fontSizeStyle=this.fontSize?{"font-size":this.fontSize+"!important"}:{},htmlStyle=this.scrolled?{display:"flex"}:{margin:"0!important"},bodyScrolledStyle=this.scrolled?{width:"auto!important",padding:"20px!important"}:{};return{html:Object.assign({},colorStyle,alignmentStyle,fontSizeStyle,htmlStyle),body:Object.assign({},colorStyle,alignmentStyle,fontSizeStyle,bodyScrolledStyle),p:Object.assign({},colorStyle,alignmentStyle,{"line-height":"1.4em!important"}),h1:Object.assign({},colorStyle),h2:Object.assign({},colorStyle),h3:Object.assign({},colorStyle),h4:Object.assign({},colorStyle),h5:Object.assign({},colorStyle),"p:first-of-type::first-letter":Object.assign({},colorStyle),video:{"max-width":"100%"},img:{"max-width":"100%"}}},tocSideBarIsOpen:function(){return this.sideBarOpen===SIDE_BARS_TOC},settingsSideBarIsOpen:function(){return this.sideBarOpen===SIDE_BARS_SETTINGS},searchSideBarIsOpen:function(){return this.sideBarOpen===SIDE_BARS_SEARCH},epubRendererStyle:function(){return{backgroundColor:this.$themeTokens.surface,borderColor:this.$themePalette.grey.v_300}},navigationButtonColor:function(){var this$1=this;return _EpubConstants__WEBPACK_IMPORTED_MODULE_25__.b.some((function(themeName){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_3___default()(this$1.theme.name,themeName)}))?"white":"black"},bottomBarHeading:function(){return this.currentSection?this.currentSection.label.trim():""},sliderStep:function(){return this.locations.length>0?Math.floor(Math.min(Math.max(100/this.locations.length,.1),100)):1},decreaseFontSizeDisabled:function(){return"8px"===this.fontSize},increaseFontSizeDisabled:function(){return"32px"===this.fontSize},expectedTimeToRead:function(){return 60*(1e3*this.locations.length/10)/300}}),watch:{sideBarOpen:function(newSideBar,oldSideBar){var this$1=this;this.$nextTick().then((function(){if(oldSideBar===SIDE_BARS_SEARCH&&this$1.clearMarks(),!newSideBar)switch(oldSideBar){case SIDE_BARS_TOC:this$1.$refs.topBar.focusOnTocButton();break;case SIDE_BARS_SETTINGS:this$1.$refs.topBar.focusOnSettingsButton();break;case SIDE_BARS_SEARCH:this$1.$refs.topBar.focusOnSearchButton()}newSideBar===SIDE_BARS_SEARCH&&(this$1.$refs.searchSideBar.focusOnInput(),this$1.searchQuery&&this$1.clearMarks().then(this$1.createMarks(this$1.searchQuery)))}))}},created:function(){this.cssPromise=this.$options.contentModule.loadDirectionalCSS(this.contentDirection)},beforeMount:function(){global.ePub=epubjs_src_epub__WEBPACK_IMPORTED_MODULE_0__.a,this.book=new epubjs_src_epub__WEBPACK_IMPORTED_MODULE_0__.a(this.epubURL);var ref=lockr__WEBPACK_IMPORTED_MODULE_6___default.a.get("kolibriEpubRendererSettings")||{},theme=ref.theme;void 0===theme&&(theme=this.theme);var fontSize=ref.fontSize;void 0===fontSize&&(fontSize=this.fontSize),this.theme=theme,this.fontSize=fontSize},mounted:function(){var this$1=this;Promise.all([this.cssPromise,this.book.ready]).then((function(){this$1.book.navigation&&(this$1.toc=this$1.book.navigation.toc),this$1.rendition=this$1.book.renderTo(this$1.$refs.epubjsContainer,{view:_SandboxIFrameView__WEBPACK_IMPORTED_MODULE_12__.a,resizeOnOrientationChange:!1,spread:"auto",minSpreadWidth:600}),this$1.rendition.display(this$1.savedLocation||void 0).then((function(){if(this$1.rendition.getContents().reduce((function(hasTable,contents){return hasTable||contents.document.getElementsByTagName("table").length>0}),!1))return this$1.scrolled=!0,this$1.rendition.flow("scrolled"),this$1.rendition.clear(),this$1.rendition.display(this$1.savedLocation||void 0);var bounds=this$1.$refs.epubjsContainer.getBoundingClientRect();Object.assign(this$1.rendition.manager.stage.settings,{width:bounds.width,height:bounds.height});var resize=new Promise((function(resolve,reject){this$1.rendition.once(epubjs_src_utils_constants__WEBPACK_IMPORTED_MODULE_1__.c.RENDITION.DISPLAYED,resolve),this$1.rendition.once(epubjs_src_utils_constants__WEBPACK_IMPORTED_MODULE_1__.c.RENDITION.DISPLAY_ERROR,reject)}));return this$1.rendition.q.enqueue((function(){return this$1.rendition.resize()})).then((function(){return resize})).then((function(){}),(function(){return this$1.rendition.display(this$1.savedLocation||void 0)})).then((function(){this$1.errorLoading=!1}))})).then((function(){this$1.handleReadyRendition()}),(function(){this$1.errorLoading=!0})),this$1.rendition.on(epubjs_src_utils_constants__WEBPACK_IMPORTED_MODULE_1__.c.RENDITION.DISPLAY_ERROR,(function(){this$1.errorLoading=!0}))})),this.book.on(epubjs_src_utils_constants__WEBPACK_IMPORTED_MODULE_1__.c.BOOK.OPEN_FAILED,(function(){this$1.errorLoading=!0}))},beforeDestroy:function(){this.updateContentState(),this.updateProgress(),this.$emit("stopTracking"),window.removeEventListener("mousedown",this.handleMouseDown,{passive:!0}),clearInterval(this.updateContentStateInterval)},destroyed:function(){delete global.ePub},methods:{updateProgress:function(){this.locations.length>0&&this.$emit("updateProgress",this.sessionTimeSpent/this.expectedTimeToRead)},handleReadyRendition:function(){var this$1=this;this.updateRenditionTheme(this.themeStyle),this.rendition.on(epubjs_src_utils_constants__WEBPACK_IMPORTED_MODULE_1__.c.RENDITION.RELOCATED,(function(location){return this$1.relocatedHandler(location)})),this.rendition.on("keyup",this.handleKeyUps),this.rendition.on("click",(function(){return this$1.closeSideBar()})),window.addEventListener("mousedown",this.handleMouseDown,{passive:!0}),this.loaded=!0,this.book.locations.generate(1e3).then((function(locations){this$1.locations=locations,this$1.$emit("startTracking"),this$1.updateContentStateInterval=setInterval(this$1.updateProgress,3e4),Promise.resolve().then((function(){return this$1.rendition.currentLocation()})).then((function(currentLocation){currentLocation&&currentLocation.start&&this$1.relocatedHandler(currentLocation)}))}))},updateRenditionTheme:function(newTheme){var themeName=JSON.stringify(newTheme);this.rendition.themes.register(themeName,newTheme),this.rendition.themes.select(themeName)},getIFrameView:function(){return this.rendition.views().displayed().filter((function(view){return view instanceof _SandboxIFrameView__WEBPACK_IMPORTED_MODULE_12__.a})).shift()},handleKeyUps:function(event){var this$1=this,focus=function(){var view=this$1.getIFrameView();view&&view.focus()};switch(event.which){case 37:this.goToPreviousPage().then(focus);break;case 39:this.goToNextPage().then(focus)}},handleMouseDown:function(event){if(this.$refs.epubRenderer){var closeSideBar=!1;this.tocSideBarIsOpen?closeSideBar=!this.$refs.tocSideBar.$el.contains(event.target):this.settingsSideBarIsOpen?closeSideBar=!this.$refs.settingsSideBar.$el.contains(event.target):this.searchSideBarIsOpen&&(closeSideBar=!this.$refs.searchSideBar.$el.contains(event.target)),closeSideBar&&this.closeSideBar()}},closeSideBar:function(){this.sideBarOpen=null},goToNextPage:function(){return this.rendition.next()},goToPreviousPage:function(){return this.rendition.prev()},jumpToLocation:function(locationToJumpTo){return this.rendition.display(locationToJumpTo)},toggleMenu:function(sideBarName){this.sideBarOpen===sideBarName?this.closeSideBar():this.sideBarOpen=sideBarName},handleTocToggle:function(){this.toggleMenu(SIDE_BARS_TOC)},handleSearchToggle:function(){this.toggleMenu(SIDE_BARS_SEARCH)},handleSettingToggle:function(){this.toggleMenu(SIDE_BARS_SETTINGS)},handleTocNavigation:function(item){var this$1=this;this.jumpToLocation(item.href).then((function(){this$1.closeSideBar()})).catch((function(){this$1.jumpToLocation("xhtml/"+item.href).then((function(){this$1.closeSideBar()}))}))},getCurrentFontSize:function(){var view=this.getIFrameView();return view?view.getContents().css("font-size",null):null},handleChangeFontSize:function(difference){var fontSizeNumericValue=parseFloat(this.getCurrentFontSize()),newFontSizeNumericValue=lodash_clamp__WEBPACK_IMPORTED_MODULE_5___default()(fontSizeNumericValue+4*difference,8,32);this.setFontSize(newFontSizeNumericValue+"px")},expandIFrameView:function(){this.getIFrameView()},setTheme:function(theme){this.theme=theme,this.persistSettings({theme:theme}),this.updateRenditionTheme(this.themeStyle)},setFontSize:function(fontSize){this.fontSize=fontSize,this.persistSettings({fontSize:fontSize}),this.updateRenditionTheme(this.themeStyle),this.scrolled&&this.expandIFrameView()},persistSettings:function(settings){var saved=lockr__WEBPACK_IMPORTED_MODULE_6___default.a.get("kolibriEpubRendererSettings");lockr__WEBPACK_IMPORTED_MODULE_6___default.a.set("kolibriEpubRendererSettings",Object.assign({},saved,settings))},handleNewSearchQuery:function(searchQuery){this.searchQuery=searchQuery,this.clearMarks().then(this.createMarks(searchQuery))},handleNavigateToSearchResult:function(searchResult){var this$1=this;this.clearMarks().then((function(){return this$1.jumpToLocation(searchResult.cfi)})).then((function(){return this$1.createMarks(this$1.searchQuery)}))},clearMarks:function(){var this$1=this;return new Promise((function(resolve){this$1.markInstance?this$1.markInstance.unmark({done:function(){this$1.markInstance=null,resolve()}}):resolve()}))},createMarks:function(searchQuery){var this$1=this,view=this.getIFrameView();return view?new Promise((function(resolve){var root=view.getContents().root();this$1.markInstance=new mark_js__WEBPACK_IMPORTED_MODULE_2___default.a(root.getElementsByTagName("body").item(0)),this$1.markInstance.mark(searchQuery,{separateWordSearch:!1,done:function(){return resolve()}})})):Promise.resolve()},flattenToc:function(toc){var ref,this$1=this;return(ref=[]).concat.apply(ref,toc.map((function(section){return[section].concat(this$1.flattenToc(section.subitems))})))},getCurrentSection:function(currentLocationStart){var currentSection,this$1=this;if(currentLocationStart){var flatToc=this.flattenToc(this.toc),currentLocationHref=this.book.canonical(currentLocationStart.href);currentSection=flatToc.find((function(item){return this$1.book.canonical(item.href)===currentLocationHref}))}return currentSection},updateCurrentSection:function(currentLocationStart){this.currentSection=this.getCurrentSection(currentLocationStart)},relocatedHandler:function(location){this.sliderValue=100*location.start.percentage,this.updateCurrentSection(location.start),this.currentLocation=location.start.cfi,this.updateContentState()},handleSliderChanged:function(newSliderValue){var indexOfLocationToJumpTo=Math.floor((this.locations.length-1)*(newSliderValue/100)),locationToJumpTo=this.locations[indexOfLocationToJumpTo];this.jumpToLocation(locationToJumpTo)},updateContentState:function(){var contentState;contentState=this.extraFields?Object.assign({},this.extraFields.contentState,{savedLocation:this.currentLocation||this.savedLocation}):{savedLocation:this.currentLocation||this.savedLocation},this.$emit("updateContentState",contentState)}}}}).call(this,__webpack_require__(11))},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){module.exports=function(){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var arguments$1=arguments,i=1;i<arguments.length;i++){var source=arguments$1[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},DOMIterator=function(){function DOMIterator(ctx){var iframes=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],exclude=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],iframesTimeout=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;classCallCheck(this,DOMIterator),this.ctx=ctx,this.iframes=iframes,this.exclude=exclude,this.iframesTimeout=iframesTimeout}return createClass(DOMIterator,[{key:"getContexts",value:function(){var filteredCtx=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach((function(ctx){var isDescendant=filteredCtx.filter((function(contexts){return contexts.contains(ctx)})).length>0;-1!==filteredCtx.indexOf(ctx)||isDescendant||filteredCtx.push(ctx)})),filteredCtx}},{key:"getIframeContents",value:function(ifr,successFn){var errorFn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},doc=void 0;try{var ifrWin=ifr.contentWindow;if(doc=ifrWin.document,!ifrWin||!doc)throw new Error("iframe inaccessible")}catch(e){errorFn()}doc&&successFn(doc)}},{key:"isIframeBlank",value:function(ifr){var bl="about:blank",src=ifr.getAttribute("src").trim();return ifr.contentWindow.location.href===bl&&src!==bl&&src}},{key:"observeIframeLoad",value:function(ifr,successFn,errorFn){var _this=this,called=!1,tout=null,listener=function listener(){if(!called){called=!0,clearTimeout(tout);try{_this.isIframeBlank(ifr)||(ifr.removeEventListener("load",listener),_this.getIframeContents(ifr,successFn,errorFn))}catch(e){errorFn()}}};ifr.addEventListener("load",listener),tout=setTimeout(listener,this.iframesTimeout)}},{key:"onIframeReady",value:function(ifr,successFn,errorFn){try{"complete"===ifr.contentWindow.document.readyState?this.isIframeBlank(ifr)?this.observeIframeLoad(ifr,successFn,errorFn):this.getIframeContents(ifr,successFn,errorFn):this.observeIframeLoad(ifr,successFn,errorFn)}catch(e){errorFn()}}},{key:"waitForIframes",value:function(ctx,done){var _this2=this,eachCalled=0;this.forEachIframe(ctx,(function(){return!0}),(function(ifr){eachCalled++,_this2.waitForIframes(ifr.querySelector("html"),(function(){--eachCalled||done()}))}),(function(handled){handled||done()}))}},{key:"forEachIframe",value:function(ctx,filter,each){var _this3=this,end=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},ifr=ctx.querySelectorAll("iframe"),open=ifr.length,handled=0;ifr=Array.prototype.slice.call(ifr);var checkEnd=function(){--open<=0&&end(handled)};open||checkEnd(),ifr.forEach((function(ifr){DOMIterator.matches(ifr,_this3.exclude)?checkEnd():_this3.onIframeReady(ifr,(function(con){filter(ifr)&&(handled++,each(con)),checkEnd()}),checkEnd)}))}},{key:"createIterator",value:function(ctx,whatToShow,filter){return document.createNodeIterator(ctx,whatToShow,filter,!1)}},{key:"createInstanceOnIframe",value:function(contents){return new DOMIterator(contents.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(node,prevNode,ifr){if(node.compareDocumentPosition(ifr)&Node.DOCUMENT_POSITION_PRECEDING){if(null===prevNode)return!0;if(prevNode.compareDocumentPosition(ifr)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(itr){var prevNode=itr.previousNode();return{prevNode:prevNode,node:(null===prevNode||itr.nextNode())&&itr.nextNode()}}},{key:"checkIframeFilter",value:function(node,prevNode,currIfr,ifr){var key=!1,handled=!1;return ifr.forEach((function(ifrDict,i){ifrDict.val===currIfr&&(key=i,handled=ifrDict.handled)})),this.compareNodeIframe(node,prevNode,currIfr)?(!1!==key||handled?!1===key||handled||(ifr[key].handled=!0):ifr.push({val:currIfr,handled:!0}),!0):(!1===key&&ifr.push({val:currIfr,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(ifr,whatToShow,eCb,fCb){var _this4=this;ifr.forEach((function(ifrDict){ifrDict.handled||_this4.getIframeContents(ifrDict.val,(function(con){_this4.createInstanceOnIframe(con).forEachNode(whatToShow,eCb,fCb)}))}))}},{key:"iterateThroughNodes",value:function(whatToShow,ctx,eachCb,filterCb,doneCb){for(var _getIteratorNode,_this5=this,itr=this.createIterator(ctx,whatToShow,filterCb),ifr=[],elements=[],node=void 0,prevNode=void 0;_getIteratorNode=void 0,_getIteratorNode=_this5.getIteratorNode(itr),prevNode=_getIteratorNode.prevNode,node=_getIteratorNode.node;)this.iframes&&this.forEachIframe(ctx,(function(currIfr){return _this5.checkIframeFilter(node,prevNode,currIfr,ifr)}),(function(con){_this5.createInstanceOnIframe(con).forEachNode(whatToShow,(function(ifrNode){return elements.push(ifrNode)}),filterCb)})),elements.push(node);elements.forEach((function(node){eachCb(node)})),this.iframes&&this.handleOpenIframes(ifr,whatToShow,eachCb,filterCb),doneCb()}},{key:"forEachNode",value:function(whatToShow,each,filter){var _this6=this,done=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},contexts=this.getContexts(),open=contexts.length;open||done(),contexts.forEach((function(ctx){var ready=function(){_this6.iterateThroughNodes(whatToShow,ctx,each,filter,(function(){--open<=0&&done()}))};_this6.iframes?_this6.waitForIframes(ctx,ready):ready()}))}}],[{key:"matches",value:function(element,selector){var selectors="string"==typeof selector?[selector]:selector,fn=element.matches||element.matchesSelector||element.msMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector||element.webkitMatchesSelector;if(fn){var match=!1;return selectors.every((function(sel){return!fn.call(element,sel)||(match=!0,!1)})),match}return!1}}]),DOMIterator}(),Mark$1=function(){function Mark(ctx){classCallCheck(this,Mark),this.ctx=ctx,this.ie=!1;var ua=window.navigator.userAgent;(ua.indexOf("MSIE")>-1||ua.indexOf("Trident")>-1)&&(this.ie=!0)}return createClass(Mark,[{key:"log",value:function(msg){var level=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",log=this.opt.log;this.opt.debug&&"object"===(void 0===log?"undefined":_typeof(log))&&"function"==typeof log[level]&&log[level]("mark.js: "+msg)}},{key:"escapeStr",value:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(str){return"disabled"!==this.opt.wildcards&&(str=this.setupWildcardsRegExp(str)),str=this.escapeStr(str),Object.keys(this.opt.synonyms).length&&(str=this.createSynonymsRegExp(str)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(str=this.setupIgnoreJoinersRegExp(str)),this.opt.diacritics&&(str=this.createDiacriticsRegExp(str)),str=this.createMergedBlanksRegExp(str),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(str=this.createJoinersRegExp(str)),"disabled"!==this.opt.wildcards&&(str=this.createWildcardsRegExp(str)),str=this.createAccuracyRegExp(str)}},{key:"createSynonymsRegExp",value:function(str){var syn=this.opt.synonyms,sens=this.opt.caseSensitive?"":"i",joinerPlaceholder=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var index in syn)if(syn.hasOwnProperty(index)){var value=syn[index],k1="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(index):this.escapeStr(index),k2="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(value):this.escapeStr(value);""!==k1&&""!==k2&&(str=str.replace(new RegExp("("+this.escapeStr(k1)+"|"+this.escapeStr(k2)+")","gm"+sens),joinerPlaceholder+"("+this.processSynomyms(k1)+"|"+this.processSynomyms(k2)+")"+joinerPlaceholder))}return str}},{key:"processSynomyms",value:function(str){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(str=this.setupIgnoreJoinersRegExp(str)),str}},{key:"setupWildcardsRegExp",value:function(str){return(str=str.replace(/(?:\\)*\?/g,(function(val){return"\\"===val.charAt(0)?"?":""}))).replace(/(?:\\)*\*/g,(function(val){return"\\"===val.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function(str){var spaces="withSpaces"===this.opt.wildcards;return str.replace(/\u0001/g,spaces?"[\\S\\s]?":"\\S?").replace(/\u0002/g,spaces?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(str){return str.replace(/[^(|)\\]/g,(function(val,indx,original){var nextChar=original.charAt(indx+1);return/[(|)\\]/.test(nextChar)||""===nextChar?val:val+"\0"}))}},{key:"createJoinersRegExp",value:function(str){var joiner=[],ignorePunctuation=this.opt.ignorePunctuation;return Array.isArray(ignorePunctuation)&&ignorePunctuation.length&&joiner.push(this.escapeStr(ignorePunctuation.join(""))),this.opt.ignoreJoiners&&joiner.push("\\u00ad\\u200b\\u200c\\u200d"),joiner.length?str.split(/\u0000+/).join("["+joiner.join("")+"]*"):str}},{key:"createDiacriticsRegExp",value:function(str){var sens=this.opt.caseSensitive?"":"i",dct=this.opt.caseSensitive?["a","A","c","C","d","D","e","E","i","I","l","L","n","N","o","O","r","R","s","S","t","T","u","U","y","Y","z","Z"]:["aA","cC","dD","eE","iI","lL","nN","oO","rR","sS","tT","uU","yY","zZ"],handled=[];return str.split("").forEach((function(ch){dct.every((function(dct){if(-1!==dct.indexOf(ch)){if(handled.indexOf(dct)>-1)return!1;str=str.replace(new RegExp("["+dct+"]","gm"+sens),"["+dct+"]"),handled.push(dct)}return!0}))})),str}},{key:"createMergedBlanksRegExp",value:function(str){return str.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(str){var _this=this,acc=this.opt.accuracy,val="string"==typeof acc?acc:acc.value,ls="string"==typeof acc?[]:acc.limiters,lsJoin="";switch(ls.forEach((function(limiter){lsJoin+="|"+_this.escapeStr(limiter)})),val){case"partially":default:return"()("+str+")";case"complementary":return"()([^"+(lsJoin="\\s"+(lsJoin||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~")))+"]*"+str+"[^"+lsJoin+"]*)";case"exactly":return"(^|\\s"+lsJoin+")("+str+")(?=$|\\s"+lsJoin+")"}}},{key:"getSeparatedKeywords",value:function(sv){var _this2=this,stack=[];return sv.forEach((function(kw){_this2.opt.separateWordSearch?kw.split(" ").forEach((function(kwSplitted){kwSplitted.trim()&&-1===stack.indexOf(kwSplitted)&&stack.push(kwSplitted)})):kw.trim()&&-1===stack.indexOf(kw)&&stack.push(kw)})),{keywords:stack.sort((function(a,b){return b.length-a.length})),length:stack.length}}},{key:"isNumeric",value:function(value){return Number(parseFloat(value))==value}},{key:"checkRanges",value:function(array){var _this3=this;if(!Array.isArray(array)||"[object Object]"!==Object.prototype.toString.call(array[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(array),[];var stack=[],last=0;return array.sort((function(a,b){return a.start-b.start})).forEach((function(item){var _callNoMatchOnInvalid=_this3.callNoMatchOnInvalidRanges(item,last),start=_callNoMatchOnInvalid.start,end=_callNoMatchOnInvalid.end;_callNoMatchOnInvalid.valid&&(item.start=start,item.length=end-start,stack.push(item),last=end)})),stack}},{key:"callNoMatchOnInvalidRanges",value:function(range,last){var start=void 0,end=void 0,valid=!1;return range&&void 0!==range.start?(end=(start=parseInt(range.start,10))+parseInt(range.length,10),this.isNumeric(range.start)&&this.isNumeric(range.length)&&end-last>0&&end-start>0?valid=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(range)),this.opt.noMatch(range))):(this.log("Ignoring invalid range: "+JSON.stringify(range)),this.opt.noMatch(range)),{start:start,end:end,valid:valid}}},{key:"checkWhitespaceRanges",value:function(range,originalLength,string){var end=void 0,valid=!0,max=string.length,offset=originalLength-max,start=parseInt(range.start,10)-offset;return(end=(start=start>max?max:start)+parseInt(range.length,10))>max&&(end=max,this.log("End range automatically set to the max value of "+max)),start<0||end-start<0||start>max||end>max?(valid=!1,this.log("Invalid range: "+JSON.stringify(range)),this.opt.noMatch(range)):""===string.substring(start,end).replace(/\s+/g,"")&&(valid=!1,this.log("Skipping whitespace only range: "+JSON.stringify(range)),this.opt.noMatch(range)),{start:start,end:end,valid:valid}}},{key:"getTextNodes",value:function(cb){var _this4=this,val="",nodes=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(node){nodes.push({start:val.length,end:(val+=node.textContent).length,node:node})}),(function(node){return _this4.matchesExclude(node.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){cb({value:val,nodes:nodes})}))}},{key:"matchesExclude",value:function(el){return DOMIterator.matches(el,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(node,start,end){var hEl=this.opt.element?this.opt.element:"mark",startNode=node.splitText(start),ret=startNode.splitText(end-start),repl=document.createElement(hEl);return repl.setAttribute("data-markjs","true"),this.opt.className&&repl.setAttribute("class",this.opt.className),repl.textContent=startNode.textContent,startNode.parentNode.replaceChild(repl,startNode),ret}},{key:"wrapRangeInMappedTextNode",value:function(dict,start,end,filterCb,eachCb){var _this5=this;dict.nodes.every((function(n,i){var sibl=dict.nodes[i+1];if(void 0===sibl||sibl.start>start){if(!filterCb(n.node))return!1;var s=start-n.start,e=(end>n.end?n.end:end)-n.start,startStr=dict.value.substr(0,n.start),endStr=dict.value.substr(e+n.start);if(n.node=_this5.wrapRangeInTextNode(n.node,s,e),dict.value=startStr+endStr,dict.nodes.forEach((function(k,j){j>=i&&(dict.nodes[j].start>0&&j!==i&&(dict.nodes[j].start-=e),dict.nodes[j].end-=e)})),end-=e,eachCb(n.node.previousSibling,n.start),!(end>n.end))return!1;start=n.end}return!0}))}},{key:"wrapMatches",value:function(regex,ignoreGroups,filterCb,eachCb,endCb){var _this6=this,matchIdx=0===ignoreGroups?0:ignoreGroups+1;this.getTextNodes((function(dict){dict.nodes.forEach((function(node){node=node.node;for(var match=void 0;null!==(match=regex.exec(node.textContent))&&""!==match[matchIdx];)if(filterCb(match[matchIdx],node)){var pos=match.index;if(0!==matchIdx)for(var i=1;i<matchIdx;i++)pos+=match[i].length;node=_this6.wrapRangeInTextNode(node,pos,pos+match[matchIdx].length),eachCb(node.previousSibling),regex.lastIndex=0}})),endCb()}))}},{key:"wrapMatchesAcrossElements",value:function(regex,ignoreGroups,filterCb,eachCb,endCb){var _this7=this,matchIdx=0===ignoreGroups?0:ignoreGroups+1;this.getTextNodes((function(dict){for(var match=void 0;null!==(match=regex.exec(dict.value))&&""!==match[matchIdx];){var start=match.index;if(0!==matchIdx)for(var i=1;i<matchIdx;i++)start+=match[i].length;var end=start+match[matchIdx].length;_this7.wrapRangeInMappedTextNode(dict,start,end,(function(node){return filterCb(match[matchIdx],node)}),(function(node,lastIndex){regex.lastIndex=lastIndex,eachCb(node)}))}endCb()}))}},{key:"wrapRangeFromIndex",value:function(ranges,filterCb,eachCb,endCb){var _this8=this;this.getTextNodes((function(dict){var originalLength=dict.value.length;ranges.forEach((function(range,counter){var _checkWhitespaceRange=_this8.checkWhitespaceRanges(range,originalLength,dict.value),start=_checkWhitespaceRange.start,end=_checkWhitespaceRange.end;_checkWhitespaceRange.valid&&_this8.wrapRangeInMappedTextNode(dict,start,end,(function(node){return filterCb(node,range,dict.value.substring(start,end),counter)}),(function(node){eachCb(node,range)}))})),endCb()}))}},{key:"unwrapMatches",value:function(node){for(var parent=node.parentNode,docFrag=document.createDocumentFragment();node.firstChild;)docFrag.appendChild(node.removeChild(node.firstChild));parent.replaceChild(docFrag,node),this.ie?this.normalizeTextNode(parent):parent.normalize()}},{key:"normalizeTextNode",value:function(node){if(node){if(3===node.nodeType)for(;node.nextSibling&&3===node.nextSibling.nodeType;)node.nodeValue+=node.nextSibling.nodeValue,node.parentNode.removeChild(node.nextSibling);else this.normalizeTextNode(node.firstChild);this.normalizeTextNode(node.nextSibling)}}},{key:"markRegExp",value:function(regexp,opt){var _this9=this;this.opt=opt,this.log('Searching with expression "'+regexp+'"');var totalMatches=0,fn="wrapMatches";this.opt.acrossElements&&(fn="wrapMatchesAcrossElements"),this[fn](regexp,this.opt.ignoreGroups,(function(match,node){return _this9.opt.filter(node,match,totalMatches)}),(function(element){totalMatches++,_this9.opt.each(element)}),(function(){0===totalMatches&&_this9.opt.noMatch(regexp),_this9.opt.done(totalMatches)}))}},{key:"mark",value:function(sv,opt){var _this10=this;this.opt=opt;var totalMatches=0,fn="wrapMatches",_getSeparatedKeywords=this.getSeparatedKeywords("string"==typeof sv?[sv]:sv),kwArr=_getSeparatedKeywords.keywords,kwArrLen=_getSeparatedKeywords.length,sens=this.opt.caseSensitive?"":"i";this.opt.acrossElements&&(fn="wrapMatchesAcrossElements"),0===kwArrLen?this.opt.done(totalMatches):function handler(kw){var regex=new RegExp(_this10.createRegExp(kw),"gm"+sens),matches=0;_this10.log('Searching with expression "'+regex+'"'),_this10[fn](regex,1,(function(term,node){return _this10.opt.filter(node,kw,totalMatches,matches)}),(function(element){matches++,totalMatches++,_this10.opt.each(element)}),(function(){0===matches&&_this10.opt.noMatch(kw),kwArr[kwArrLen-1]===kw?_this10.opt.done(totalMatches):handler(kwArr[kwArr.indexOf(kw)+1])}))}(kwArr[0])}},{key:"markRanges",value:function(rawRanges,opt){var _this11=this;this.opt=opt;var totalMatches=0,ranges=this.checkRanges(rawRanges);ranges&&ranges.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(ranges)),this.wrapRangeFromIndex(ranges,(function(node,range,match,counter){return _this11.opt.filter(node,range,match,counter)}),(function(element,range){totalMatches++,_this11.opt.each(element,range)}),(function(){_this11.opt.done(totalMatches)}))):this.opt.done(totalMatches)}},{key:"unmark",value:function(opt){var _this12=this;this.opt=opt;var sel=this.opt.element?this.opt.element:"*";sel+="[data-markjs]",this.opt.className&&(sel+="."+this.opt.className),this.log('Removal selector "'+sel+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(node){_this12.unwrapMatches(node)}),(function(node){var matchesSel=DOMIterator.matches(node,sel),matchesExclude=_this12.matchesExclude(node);return!matchesSel||matchesExclude?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}},{key:"opt",set:function(val){this._opt=_extends({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},val)},get:function(){return this._opt}},{key:"iterator",get:function(){return new DOMIterator(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),Mark}();return function(ctx){var _this=this,instance=new Mark$1(ctx);return this.mark=function(sv,opt){return instance.mark(sv,opt),_this},this.markRegExp=function(sv,opt){return instance.markRegExp(sv,opt),_this},this.markRanges=function(sv,opt){return instance.markRanges(sv,opt),_this},this.unmark=function(opt){return instance.unmark(opt),_this},this}}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var views_TocButtonvue_type_script_lang_js_={name:"TocButton",$trs:{toggleTocSideBar:"Toggle table of contents"}},componentNormalizer=__webpack_require__(3),component=Object(componentNormalizer.a)(views_TocButtonvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement;return(_vm._self._c||_h)("KIconButton",{attrs:{icon:"list",ariaLabel:_vm.$tr("toggleTocSideBar"),"data-test":"toc button",size:"small"},on:{click:function($event){return _vm.$emit("click")}}})}),[],!1,null,"564c5f66",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var views_SettingsButtonvue_type_script_lang_js_={name:"SettingsButton",$trs:{toggleSettingsSideBar:"Toggle settings"}},componentNormalizer=__webpack_require__(3),component=Object(componentNormalizer.a)(views_SettingsButtonvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement;return(_vm._self._c||_h)("KIconButton",{attrs:{icon:"tune",ariaLabel:_vm.$tr("toggleSettingsSideBar"),"data-test":"settings button",size:"small"},on:{click:function($event){return _vm.$emit("click")}}})}),[],!1,null,"7fd92090",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var views_SearchButtonvue_type_script_lang_js_={name:"SearchButton",$trs:{toggleSearchSideBar:"Toggle search"}},componentNormalizer=__webpack_require__(3),component=Object(componentNormalizer.a)(views_SearchButtonvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement;return(_vm._self._c||_h)("KIconButton",{attrs:{icon:"search",ariaLabel:_vm.$tr("toggleSearchSideBar"),"data-test":"search button",size:"small"},on:{click:function($event){return _vm.$emit("click")}}})}),[],!1,null,"58168a94",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var event_emitter=__webpack_require__(4),event_emitter_default=__webpack_require__.n(event_emitter),core=__webpack_require__(0),hook=__webpack_require__(7),epubcfi=__webpack_require__(2),queue=__webpack_require__(16),constants=__webpack_require__(1),Layout=function(settings){this.settings=settings,this.name=settings.layout||"reflowable",this._spread="none"!==settings.spread,this._minSpreadWidth=settings.minSpreadWidth||800,this._evenSpreads=settings.evenSpreads||!1,"scrolled"===settings.flow||"scrolled-continuous"===settings.flow||"scrolled-doc"===settings.flow?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}};Layout.prototype.flow=function(flow$1){return void 0!==flow$1&&(this._flow="scrolled"===flow$1||"scrolled-continuous"===flow$1||"scrolled-doc"===flow$1?"scrolled":"paginated",this.update({flow:this._flow})),this._flow},Layout.prototype.spread=function(spread$1,min){return spread$1&&(this._spread="none"!==spread$1,this.update({spread:this._spread})),min>=0&&(this._minSpreadWidth=min),this._spread},Layout.prototype.calculate=function(_width,_height,_gap){var columnWidth,spreadWidth,pageWidth,delta,divisor=1,gap=_gap||0,width=_width,height=_height,section=Math.floor(width/12);divisor=this._spread&&width>=this._minSpreadWidth?2:1,"reflowable"!==this.name||"paginated"!==this._flow||_gap>=0||(gap=section%2==0?section:section-1),"pre-paginated"===this.name&&(gap=0),divisor>1?pageWidth=(columnWidth=width/divisor-gap)+gap:(columnWidth=width,pageWidth=width),"pre-paginated"===this.name&&divisor>1&&(width=columnWidth),spreadWidth=columnWidth*divisor+gap,delta=width,this.width=width,this.height=height,this.spreadWidth=spreadWidth,this.pageWidth=pageWidth,this.delta=delta,this.columnWidth=columnWidth,this.gap=gap,this.divisor=divisor,this.update({width:width,height:height,spreadWidth:spreadWidth,pageWidth:pageWidth,delta:delta,columnWidth:columnWidth,gap:gap,divisor:divisor})},Layout.prototype.format=function(contents){return"pre-paginated"===this.name?contents.fit(this.columnWidth,this.height):"paginated"===this._flow?contents.columns(this.width,this.height,this.columnWidth,this.gap):contents.size(this.width,null)},Layout.prototype.count=function(totalLength,pageLength){var spreads,pages;return"pre-paginated"===this.name?(spreads=1,pages=1):"paginated"===this._flow?(pageLength=pageLength||this.delta,pages=(spreads=Math.ceil(totalLength/pageLength))*this.divisor):(pageLength=pageLength||this.height,pages=spreads=Math.ceil(totalLength/pageLength)),{spreads:spreads,pages:pages}},Layout.prototype.update=function(props){var this$1=this;if(Object.keys(props).forEach((function(propName){this$1.props[propName]===props[propName]&&delete props[propName]})),Object.keys(props).length>0){var newProps=Object(core.extend)(this.props,props);this.emit(constants.c.LAYOUT.UPDATED,newProps,props)}},event_emitter_default()(Layout.prototype);var src_layout=Layout,utils_url=__webpack_require__(6),Themes=function(rendition){this.rendition=rendition,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))};Themes.prototype.register=function(){if(0!==arguments.length)return 1===arguments.length&&"object"==typeof arguments[0]?this.registerThemes(arguments[0]):1===arguments.length&&"string"==typeof arguments[0]?this.default(arguments[0]):2===arguments.length&&"string"==typeof arguments[1]?this.registerUrl(arguments[0],arguments[1]):2===arguments.length&&"object"==typeof arguments[1]?this.registerRules(arguments[0],arguments[1]):void 0},Themes.prototype.default=function(theme){if(theme)return"string"==typeof theme?this.registerUrl("default",theme):"object"==typeof theme?this.registerRules("default",theme):void 0},Themes.prototype.registerThemes=function(themes){for(var theme in themes)themes.hasOwnProperty(theme)&&("string"==typeof themes[theme]?this.registerUrl(theme,themes[theme]):this.registerRules(theme,themes[theme]))},Themes.prototype.registerUrl=function(name,input){var url=new utils_url.a(input);this._themes[name]={url:url.toString()},this._injected[name]&&this.update(name)},Themes.prototype.registerRules=function(name,rules){this._themes[name]={rules:rules},this._injected[name]&&this.update(name)},Themes.prototype.select=function(name){var prev=this._current;this._current=name,this.update(name),this.rendition.getContents().forEach((function(content){content.removeClass(prev),content.addClass(name)}))},Themes.prototype.update=function(name){var this$1=this;this.rendition.getContents().forEach((function(content){this$1.add(name,content)}))},Themes.prototype.inject=function(contents){var theme,links=[],themes=this._themes;for(var name in themes)!themes.hasOwnProperty(name)||name!==this._current&&"default"!==name||(((theme=themes[name]).rules&&Object.keys(theme.rules).length>0||theme.url&&-1===links.indexOf(theme.url))&&this.add(name,contents),this._injected.push(name));"default"!=this._current&&contents.addClass(this._current)},Themes.prototype.add=function(name,contents){var theme=this._themes[name];theme&&contents&&(theme.url?contents.addStylesheet(theme.url):theme.serialized||theme.rules&&(contents.addStylesheetRules(theme.rules),theme.injected=!0))},Themes.prototype.override=function(name,value,priority){var this$1=this,contents=this.rendition.getContents();this._overrides[name]={value:value,priority:!0===priority},contents.forEach((function(content){content.css(name,this$1._overrides[name].value,this$1._overrides[name].priority)}))},Themes.prototype.overrides=function(contents){var overrides=this._overrides;for(var rule in overrides)overrides.hasOwnProperty(rule)&&contents.css(rule,overrides[rule].value,overrides[rule].priority)},Themes.prototype.fontSize=function(size){this.override("font-size",size)},Themes.prototype.font=function(f){this.override("font-family",f,!0)},Themes.prototype.destroy=function(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0};var themes=Themes,Annotations=(__webpack_require__(23),function(rendition){this.rendition=rendition,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))});Annotations.prototype.add=function(type,cfiRange,data,cb,className,styles){var hash=encodeURI(cfiRange+type),sectionIndex=new epubcfi.a(cfiRange).spinePos,annotation=new Annotation({type:type,cfiRange:cfiRange,data:data,sectionIndex:sectionIndex,cb:cb,className:className,styles:styles});return this._annotations[hash]=annotation,sectionIndex in this._annotationsBySectionIndex?this._annotationsBySectionIndex[sectionIndex].push(hash):this._annotationsBySectionIndex[sectionIndex]=[hash],this.rendition.views().forEach((function(view){annotation.sectionIndex===view.index&&annotation.attach(view)})),annotation},Annotations.prototype.remove=function(cfiRange,type){var this$1=this,hash=encodeURI(cfiRange+type);if(hash in this._annotations){var annotation=this._annotations[hash];if(type&&annotation.type!==type)return;this.rendition.views().forEach((function(view){this$1._removeFromAnnotationBySectionIndex(annotation.sectionIndex,hash),annotation.sectionIndex===view.index&&annotation.detach(view)})),delete this._annotations[hash]}},Annotations.prototype._removeFromAnnotationBySectionIndex=function(sectionIndex,hash){this._annotationsBySectionIndex[sectionIndex]=this._annotationsAt(sectionIndex).filter((function(h){return h!==hash}))},Annotations.prototype._annotationsAt=function(index){return this._annotationsBySectionIndex[index]},Annotations.prototype.highlight=function(cfiRange,data,cb,className,styles){return this.add("highlight",cfiRange,data,cb,className,styles)},Annotations.prototype.underline=function(cfiRange,data,cb,className,styles){return this.add("underline",cfiRange,data,cb,className,styles)},Annotations.prototype.mark=function(cfiRange,data,cb){return this.add("mark",cfiRange,data,cb)},Annotations.prototype.each=function(){return this._annotations.forEach.apply(this._annotations,arguments)},Annotations.prototype.inject=function(view){var this$1=this,sectionIndex=view.index;sectionIndex in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[sectionIndex].forEach((function(hash){this$1._annotations[hash].attach(view)}))},Annotations.prototype.clear=function(view){var this$1=this,sectionIndex=view.index;sectionIndex in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[sectionIndex].forEach((function(hash){this$1._annotations[hash].detach(view)}))},Annotations.prototype.show=function(){},Annotations.prototype.hide=function(){};var Annotation=function(ref){var type=ref.type,cfiRange=ref.cfiRange,data=ref.data,sectionIndex=ref.sectionIndex,cb=ref.cb,className=ref.className,styles=ref.styles;this.type=type,this.cfiRange=cfiRange,this.data=data,this.sectionIndex=sectionIndex,this.mark=void 0,this.cb=cb,this.className=className,this.styles=styles};Annotation.prototype.update=function(data){this.data=data},Annotation.prototype.attach=function(view){var result,cfiRange=this.cfiRange,data=this.data,type=this.type,cb=(this.mark,this.cb),className=this.className,styles=this.styles;return"highlight"===type?result=view.highlight(cfiRange,data,cb,className,styles):"underline"===type?result=view.underline(cfiRange,data,cb,className,styles):"mark"===type&&(result=view.mark(cfiRange,data,cb)),this.mark=result,this.emit(constants.c.ANNOTATION.ATTACH,result),result},Annotation.prototype.detach=function(view){var result,cfiRange=this.cfiRange,type=this.type;return view&&("highlight"===type?result=view.unhighlight(cfiRange):"underline"===type?result=view.ununderline(cfiRange):"mark"===type&&(result=view.unmark(cfiRange))),this.mark=void 0,this.emit(constants.c.ANNOTATION.DETACH,result),result},Annotation.prototype.text=function(){},event_emitter_default()(Annotation.prototype);var annotations=Annotations,iframe=__webpack_require__(24),managers_default=__webpack_require__(25),continuous=__webpack_require__(57),rendition_Rendition=function(book,options){this.settings=Object(core.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1}),Object(core.extend)(this.settings,options),"object"==typeof this.settings.manager&&(this.manager=this.settings.manager),this.book=book,this.hooks={},this.hooks.display=new hook.a(this),this.hooks.serialize=new hook.a(this),this.hooks.content=new hook.a(this),this.hooks.unloaded=new hook.a(this),this.hooks.layout=new hook.a(this),this.hooks.render=new hook.a(this),this.hooks.show=new hook.a(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new themes(this),this.annotations=new annotations(this),this.epubcfi=new epubcfi.a,this.q=new queue.a(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new core.defer,this.started=this.starting.promise,this.q.enqueue(this.start)};rendition_Rendition.prototype.setManager=function(manager){this.manager=manager},rendition_Rendition.prototype.requireManager=function(manager){return"string"==typeof manager&&"default"===manager?managers_default.a:"string"==typeof manager&&"continuous"===manager?continuous.a:manager},rendition_Rendition.prototype.requireView=function(view){return"string"==typeof view&&"iframe"===view?iframe.a:view},rendition_Rendition.prototype.start=function(){this.settings.layout||"pre-paginated"!==this.book.package.metadata.layout&&"true"!==this.book.displayOptions.fixedLayout||(this.settings.layout="pre-paginated"),this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(constants.c.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(constants.c.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(constants.c.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(constants.c.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(constants.c.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(constants.c.RENDITION.STARTED),this.starting.resolve()},rendition_Rendition.prototype.attachTo=function(element){return this.q.enqueue(function(){this.manager.render(element,{width:this.settings.width,height:this.settings.height}),this.emit(constants.c.RENDITION.ATTACHED)}.bind(this))},rendition_Rendition.prototype.display=function(target){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,target)},rendition_Rendition.prototype._display=function(target){var this$1=this;if(this.book){this.epubcfi.isCfiString(target);var section,displaying=new core.defer,displayed=displaying.promise;return this.displaying=displaying,this.book.locations.length()&&Object(core.isFloat)(target)&&(target=this.book.locations.cfiFromPercentage(parseFloat(target))),(section=this.book.spine.get(target))?(this.manager.display(section,target).then((function(){displaying.resolve(section),this$1.displaying=void 0,this$1.emit(constants.c.RENDITION.DISPLAYED,section),this$1.reportLocation()}),(function(err){this$1.emit(constants.c.RENDITION.DISPLAY_ERROR,err)})),displayed):(displaying.reject(new Error("No Section Found")),displayed)}},rendition_Rendition.prototype.afterDisplayed=function(view){var this$1=this;view.on(constants.c.VIEWS.MARK_CLICKED,(function(cfiRange,data){return this$1.triggerMarkEvent(cfiRange,data,view.contents)})),this.hooks.render.trigger(view,this).then((function(){view.contents?this$1.hooks.content.trigger(view.contents,this$1).then((function(){this$1.emit(constants.c.RENDITION.RENDERED,view.section,view)})):this$1.emit(constants.c.RENDITION.RENDERED,view.section,view)}))},rendition_Rendition.prototype.afterRemoved=function(view){var this$1=this;this.hooks.unloaded.trigger(view,this).then((function(){this$1.emit(constants.c.RENDITION.REMOVED,view.section,view)}))},rendition_Rendition.prototype.onResized=function(size){this.emit(constants.c.RENDITION.RESIZED,{width:size.width,height:size.height}),this.location&&this.location.start&&this.display(this.location.start.cfi)},rendition_Rendition.prototype.onOrientationChange=function(orientation){this.emit(constants.c.RENDITION.ORIENTATION_CHANGE,orientation)},rendition_Rendition.prototype.moveTo=function(offset){this.manager.moveTo(offset)},rendition_Rendition.prototype.resize=function(width,height){width&&(this.settings.width=width),height&&(this.settings.height=height),this.manager.resize(width,height)},rendition_Rendition.prototype.clear=function(){this.manager.clear()},rendition_Rendition.prototype.next=function(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))},rendition_Rendition.prototype.prev=function(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))},rendition_Rendition.prototype.determineLayoutProperties=function(metadata){var layout=this.settings.layout||metadata.layout||"reflowable",spread=this.settings.spread||metadata.spread||"auto",orientation=this.settings.orientation||metadata.orientation||"auto",flow=this.settings.flow||metadata.flow||"auto",viewport=metadata.viewport||"",minSpreadWidth=this.settings.minSpreadWidth||metadata.minSpreadWidth||800,direction=this.settings.direction||metadata.direction||"ltr";return(0===this.settings.width||this.settings.width>0)&&(0===this.settings.height||this.settings.height),{layout:layout,spread:spread,orientation:orientation,flow:flow,viewport:viewport,minSpreadWidth:minSpreadWidth,direction:direction}},rendition_Rendition.prototype.flow=function(flow$1){var _flow=flow$1;"scrolled"!==flow$1&&"scrolled-doc"!==flow$1&&"scrolled-continuous"!==flow$1||(_flow="scrolled"),"auto"!==flow$1&&"paginated"!==flow$1||(_flow="paginated"),this.settings.flow=flow$1,this._layout&&this._layout.flow(_flow),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(_flow),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))},rendition_Rendition.prototype.layout=function(settings){var this$1=this;return settings&&(this._layout=new src_layout(settings),this._layout.spread(settings.spread,this.settings.minSpreadWidth),this._layout.on(constants.c.LAYOUT.UPDATED,(function(props,changed){this$1.emit(constants.c.RENDITION.LAYOUT,props,changed)}))),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout},rendition_Rendition.prototype.spread=function(spread$1,min){this.settings.spread=spread$1,min&&(this.settings.minSpreadWidth=min),this._layout&&this._layout.spread(spread$1,min),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()},rendition_Rendition.prototype.direction=function(dir){this.settings.direction=dir||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))},rendition_Rendition.prototype.reportLocation=function(){return this.q.enqueue(function(){requestAnimationFrame(function(){var location=this.manager.currentLocation();if(location&&location.then&&"function"==typeof location.then)location.then(function(result){var located=this.located(result);located&&located.start&&located.end&&(this.location=located,this.emit(constants.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(constants.c.RENDITION.RELOCATED,this.location))}.bind(this));else if(location){var located=this.located(location);if(!located||!located.start||!located.end)return;this.location=located,this.emit(constants.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(constants.c.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))},rendition_Rendition.prototype.currentLocation=function(){var location=this.manager.currentLocation();if(location&&location.then&&"function"==typeof location.then)location.then(function(result){return this.located(result)}.bind(this));else if(location){return this.located(location)}},rendition_Rendition.prototype.located=function(location){if(!location.length)return{};var start=location[0],end=location[location.length-1],located={start:{index:start.index,href:start.href,cfi:start.mapping.start,displayed:{page:start.pages[0]||1,total:start.totalPages}},end:{index:end.index,href:end.href,cfi:end.mapping.end,displayed:{page:end.pages[end.pages.length-1]||1,total:end.totalPages}}},locationStart=this.book.locations.locationFromCfi(start.mapping.start),locationEnd=this.book.locations.locationFromCfi(end.mapping.end);null!=locationStart&&(located.start.location=locationStart,located.start.percentage=this.book.locations.percentageFromLocation(locationStart)),null!=locationEnd&&(located.end.location=locationEnd,located.end.percentage=this.book.locations.percentageFromLocation(locationEnd));var pageStart=this.book.pageList.pageFromCfi(start.mapping.start),pageEnd=this.book.pageList.pageFromCfi(end.mapping.end);return-1!=pageStart&&(located.start.page=pageStart),-1!=pageEnd&&(located.end.page=pageEnd),end.index===this.book.spine.last().index&&located.end.displayed.page>=located.end.displayed.total&&(located.atEnd=!0),start.index===this.book.spine.first().index&&1===located.start.displayed.page&&(located.atStart=!0),located},rendition_Rendition.prototype.destroy=function(){this.manager&&this.manager.destroy(),this.book=void 0},rendition_Rendition.prototype.passEvents=function(contents){var this$1=this;constants.a.forEach((function(e){contents.on(e,(function(ev){return this$1.triggerViewEvent(ev,contents)}))})),contents.on(constants.c.CONTENTS.SELECTED,(function(e){return this$1.triggerSelectedEvent(e,contents)}))},rendition_Rendition.prototype.triggerViewEvent=function(e,contents){this.emit(e.type,e,contents)},rendition_Rendition.prototype.triggerSelectedEvent=function(cfirange,contents){this.emit(constants.c.RENDITION.SELECTED,cfirange,contents)},rendition_Rendition.prototype.triggerMarkEvent=function(cfiRange,data,contents){this.emit(constants.c.RENDITION.MARK_CLICKED,cfiRange,data,contents)},rendition_Rendition.prototype.getRange=function(cfi,ignoreClass){var _cfi=new epubcfi.a(cfi),found=this.manager.visible().filter((function(view){if(_cfi.spinePos===view.index)return!0}));if(found.length)return found[0].contents.range(_cfi,ignoreClass)},rendition_Rendition.prototype.adjustImages=function(contents){if("pre-paginated"===this._layout.name)return new Promise((function(resolve){resolve()}));var computed=contents.window.getComputedStyle(contents.content,null),height=.95*(contents.content.offsetHeight-(parseFloat(computed.paddingTop)+parseFloat(computed.paddingBottom))),verticalPadding=parseFloat(computed.verticalPadding);return contents.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-verticalPadding+"px":"100%")+"!important","max-height":height+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-verticalPadding+"px":"100%")+"!important","max-height":height+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise((function(resolve,reject){setTimeout((function(){resolve()}),1)}))},rendition_Rendition.prototype.getContents=function(){return this.manager?this.manager.getContents():[]},rendition_Rendition.prototype.views=function(){var views=this.manager?this.manager.views:void 0;return views||[]},rendition_Rendition.prototype.handleLinks=function(contents){var this$1=this;contents&&contents.on(constants.c.CONTENTS.LINK_CLICKED,(function(href){var relative=this$1.book.path.relative(href);this$1.display(relative)}))},rendition_Rendition.prototype.injectStylesheet=function(doc,section){var style=doc.createElement("link");style.setAttribute("type","text/css"),style.setAttribute("rel","stylesheet"),style.setAttribute("href",this.settings.stylesheet),doc.getElementsByTagName("head")[0].appendChild(style)},rendition_Rendition.prototype.injectScript=function(doc,section){var script=doc.createElement("script");script.setAttribute("type","text/javascript"),script.setAttribute("src",this.settings.script),script.textContent=" ",doc.getElementsByTagName("head")[0].appendChild(script)},rendition_Rendition.prototype.injectIdentifier=function(doc,section){var ident=this.book.packaging.metadata.identifier,meta=doc.createElement("meta");meta.setAttribute("name","dc.relation.ispartof"),ident&&meta.setAttribute("content",ident),doc.getElementsByTagName("head")[0].appendChild(meta)},event_emitter_default()(rendition_Rendition.prototype);__webpack_exports__.a=rendition_Rendition},function(module,exports,__webpack_require__){module.exports&&(exports=module.exports=function(root,Lockr){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(elt){var len=this.length>>>0,from=Number(arguments[1])||0;for((from=from<0?Math.ceil(from):Math.floor(from))<0&&(from+=len);from<len;from++)if(from in this&&this[from]===elt)return from;return-1}),Lockr.prefix="",Lockr._getPrefixedKey=function(key,options){return(options=options||{}).noPrefix?key:this.prefix+key},Lockr.set=function(key,value,options){var query_key=this._getPrefixedKey(key,options);try{localStorage.setItem(query_key,JSON.stringify({data:value}))}catch(e){console&&console.warn("Lockr didn't successfully save the '{"+key+": "+value+"}' pair, because the localStorage is full.")}},Lockr.get=function(key,missing,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){try{value=localStorage[query_key]?JSON.parse('{"data":"'+localStorage.getItem(query_key)+'"}'):null}catch(e){console&&console.warn("Lockr could not load the item with key "+key)}}return null===value?missing:void 0!==value.data?value.data:missing},Lockr.sadd=function(key,value,options){var json,query_key=this._getPrefixedKey(key,options),values=Lockr.smembers(key);if(values.indexOf(value)>-1)return null;try{values.push(value),json=JSON.stringify({data:values}),localStorage.setItem(query_key,json)}catch(e){console.log(e),console&&console.warn("Lockr didn't successfully add the "+value+" to "+key+" set, because the localStorage is full.")}},Lockr.smembers=function(key,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){value=null}return null===value?[]:value.data||[]},Lockr.sismember=function(key,value,options){return this._getPrefixedKey(key,options),Lockr.smembers(key).indexOf(value)>-1},Lockr.getAll=function(){return Object.keys(localStorage).map((function(key){return Lockr.get(key)}))},Lockr.srem=function(key,value,options){var json,index,query_key=this._getPrefixedKey(key,options),values=Lockr.smembers(key,value);(index=values.indexOf(value))>-1&&values.splice(index,1),json=JSON.stringify({data:values});try{localStorage.setItem(query_key,json)}catch(e){console&&console.warn("Lockr couldn't remove the "+value+" from the set "+key)}},Lockr.rm=function(key){localStorage.removeItem(key)},Lockr.flush=function(){localStorage.clear()},Lockr}(0,exports))},function(module,exports,__webpack_require__){"use strict";var _undefined=__webpack_require__(107)();module.exports=function(val){return val!==_undefined&&null!==val}},function(module,exports,__webpack_require__){var Map=__webpack_require__(14)(__webpack_require__(10),"Map");module.exports=Map},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(147),mapCacheDelete=__webpack_require__(154),mapCacheGet=__webpack_require__(156),mapCacheHas=__webpack_require__(157),mapCacheSet=__webpack_require__(158);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports,__webpack_require__){var isObject=__webpack_require__(20),now=__webpack_require__(117),toNumber=__webpack_require__(66),nativeMax=Math.max,nativeMin=Math.min;module.exports=function(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function(){return void 0===timerId?result:trailingEdge(now())},debounced}},function(module,__webpack_exports__,__webpack_require__){"use strict";var core=__webpack_require__(0),managers_default=__webpack_require__(25),constants=__webpack_require__(1),event_emitter=__webpack_require__(4),event_emitter_default=__webpack_require__.n(event_emitter),PI_D2=Math.PI/2,EASING_EQUATIONS={easeOutSine:function(pos){return Math.sin(pos*PI_D2)},easeInOutSine:function(pos){return-.5*(Math.cos(Math.PI*pos)-1)},easeInOutQuint:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,5):.5*(Math.pow(pos-2,5)+2)},easeInCubic:function(pos){return Math.pow(pos,3)}},snap_Snap=function(manager,options){this.settings=Object(core.extend)({duration:80,minVelocity:.2,minDistance:10,easing:EASING_EQUATIONS.easeInCubic},options||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(manager)};snap_Snap.prototype.setup=function(manager){this.manager=manager,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=2*this.settings.duration,this.isVertical="vertical"===this.manager.settings.axis,this.manager.isPaginated&&!this.isVertical&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())},snap_Snap.prototype.supportsTouch=function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},snap_Snap.prototype.disableScroll=function(){this.element.style.overflow="hidden"},snap_Snap.prototype.enableScroll=function(){this.element.style.overflow=""},snap_Snap.prototype.addListeners=function(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(constants.c.MANAGERS.ADDED,this._afterDisplayed)},snap_Snap.prototype.removeListeners=function(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(constants.c.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0},snap_Snap.prototype.afterDisplayed=function(view){var this$1=this,contents=view.contents;["touchstart","touchmove","touchend"].forEach((function(e){contents.on(e,(function(ev){return this$1.triggerViewEvent(ev,contents)}))}))},snap_Snap.prototype.triggerViewEvent=function(e,contents){this.emit(e.type,e,contents)},snap_Snap.prototype.onScroll=function(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop},snap_Snap.prototype.onResize=function(e){this.resizeCanceler=!0},snap_Snap.prototype.onTouchStart=function(e){var ref=e.touches[0],screenX=ref.screenX,screenY=ref.screenY;this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=screenX,this.startTouchY=screenY,this.startTime=this.now()),this.endTouchX=screenX,this.endTouchY=screenY,this.endTime=this.now()},snap_Snap.prototype.onTouchMove=function(e){var ref=e.touches[0],screenX=ref.screenX,screenY=ref.screenY,deltaY=Math.abs(screenY-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&deltaY<10&&(this.element.scrollLeft-=screenX-this.endTouchX),this.endTouchX=screenX,this.endTouchY=screenY,this.endTime=this.now()},snap_Snap.prototype.onTouchEnd=function(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;var swipped=this.wasSwiped();0!==swipped?this.snap(swipped):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0},snap_Snap.prototype.wasSwiped=function(){var snapWidth=this.layout.pageWidth*this.layout.divisor,distance=this.endTouchX-this.startTouchX,absolute=Math.abs(distance),velocity=distance/(this.endTime-this.startTime),minVelocity=this.settings.minVelocity;return absolute<=this.settings.minDistance||absolute>=snapWidth?0:velocity>minVelocity?-1:velocity<-minVelocity?1:void 0},snap_Snap.prototype.needsSnap=function(){return this.scrollLeft%(this.layout.pageWidth*this.layout.divisor)!=0},snap_Snap.prototype.snap=function(howMany){void 0===howMany&&(howMany=0);var left=this.scrollLeft,snapWidth=this.layout.pageWidth*this.layout.divisor,snapTo=Math.round(left/snapWidth)*snapWidth;return howMany&&(snapTo+=howMany*snapWidth),this.smoothScrollTo(snapTo)},snap_Snap.prototype.smoothScrollTo=function(destination){var deferred=new core.defer,start=this.scrollLeft,startTime=this.now(),duration=this.settings.duration,easing=this.settings.easing;return this.snapping=!0,function tick(){var now=this.now(),time=Math.min(1,(now-startTime)/duration);if(easing(time),this.touchCanceler||this.resizeCanceler)return this.resizeCanceler=!1,this.snapping=!1,void deferred.resolve();time<1?(window.requestAnimationFrame(tick.bind(this)),this.scrollTo(start+(destination-start)*time,0)):(this.scrollTo(destination,0),this.snapping=!1,deferred.resolve())}.call(this),deferred.promise},snap_Snap.prototype.scrollTo=function(left,top){void 0===left&&(left=0),void 0===top&&(top=0),this.fullsize?window.scroll(left,top):(this.scroller.scrollLeft=left,this.scroller.scrollTop=top)},snap_Snap.prototype.now=function(){return"now"in window.performance?performance.now():(new Date).getTime()},snap_Snap.prototype.destroy=function(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)},event_emitter_default()(snap_Snap.prototype);var snap=snap_Snap,debounce=__webpack_require__(56),debounce_default=__webpack_require__.n(debounce),continuous_ContinuousViewManager=function(DefaultViewManager){function ContinuousViewManager(options){DefaultViewManager.call(this,options),this.name="continuous",this.settings=Object(core.extend)(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10}),Object(core.extend)(this.settings,options.settings||{}),"undefined"!=options.settings.gap&&0===options.settings.gap&&(this.settings.gap=options.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1},this.scrollTop=0,this.scrollLeft=0}return DefaultViewManager&&(ContinuousViewManager.__proto__=DefaultViewManager),ContinuousViewManager.prototype=Object.create(DefaultViewManager&&DefaultViewManager.prototype),ContinuousViewManager.prototype.constructor=ContinuousViewManager,ContinuousViewManager.prototype.display=function(section,target){return DefaultViewManager.prototype.display.call(this,section,target).then(function(){return this.fill()}.bind(this))},ContinuousViewManager.prototype.fill=function(_full){var this$1=this,full=_full||new core.defer;return this.q.enqueue((function(){return this$1.check()})).then((function(result){result?this$1.fill(full):full.resolve()})),full.promise},ContinuousViewManager.prototype.moveTo=function(offset){var distX=0,distY=0;this.isPaginated?(distX=Math.floor(offset.left/this.layout.delta)*this.layout.delta,this.settings.offsetDelta):(distY=offset.top,offset.top,this.settings.offsetDelta),(distX>0||distY>0)&&this.scrollBy(distX,distY,!0)},ContinuousViewManager.prototype.afterResized=function(view){this.emit(constants.c.MANAGERS.RESIZE,view.section)},ContinuousViewManager.prototype.removeShownListeners=function(view){view.onDisplayed=function(){}},ContinuousViewManager.prototype.add=function(section){var this$1=this,view=this.createView(section);return this.views.append(view),view.on(constants.c.VIEWS.RESIZED,(function(bounds){view.expanded=!0})),view.on(constants.c.VIEWS.AXIS,(function(axis){this$1.updateAxis(axis)})),view.onDisplayed=this.afterDisplayed.bind(this),view.onResize=this.afterResized.bind(this),view.display(this.request)},ContinuousViewManager.prototype.append=function(section){var this$1=this,view=this.createView(section);return view.on(constants.c.VIEWS.RESIZED,(function(bounds){view.expanded=!0})),view.on(constants.c.VIEWS.AXIS,(function(axis){this$1.updateAxis(axis)})),this.views.append(view),view.onDisplayed=this.afterDisplayed.bind(this),view},ContinuousViewManager.prototype.prepend=function(section){var this$1=this,view=this.createView(section);return view.on(constants.c.VIEWS.RESIZED,(function(bounds){this$1.counter(bounds),view.expanded=!0})),view.on(constants.c.VIEWS.AXIS,(function(axis){this$1.updateAxis(axis)})),this.views.prepend(view),view.onDisplayed=this.afterDisplayed.bind(this),view},ContinuousViewManager.prototype.counter=function(bounds){"vertical"===this.settings.axis?this.scrollBy(0,bounds.heightDelta,!0):this.scrollBy(bounds.widthDelta,0,!0)},ContinuousViewManager.prototype.update=function(_offset){for(var view,container=this.bounds(),views=this.views.all(),viewsLength=views.length,visible=[],offset=void 0!==_offset?_offset:this.settings.offset||0,updating=new core.defer,promises=[],i=0;i<viewsLength;i++)if(view=views[i],!0===this.isVisible(view,offset,offset,container)){if(view.displayed)view.show();else{var displayed=view.display(this.request).then((function(view){view.show()}),(function(err){view.hide()}));promises.push(displayed)}visible.push(view)}else this.q.enqueue(view.destroy.bind(view)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return promises.length?Promise.all(promises).catch((function(err){updating.reject(err)})):(updating.resolve(),updating.promise)},ContinuousViewManager.prototype.check=function(_offsetLeft,_offsetTop){var this$1=this,checking=new core.defer,newViews=[],horizontal="horizontal"===this.settings.axis,delta=this.settings.offset||0;_offsetLeft&&horizontal&&(delta=_offsetLeft),_offsetTop&&!horizontal&&(delta=_offsetTop);var bounds=this._bounds,rtl="rtl"===this.settings.direction,dir=horizontal&&rtl?-1:1,offset=horizontal?this.scrollLeft:this.scrollTop*dir,visibleLength=horizontal?Math.floor(bounds.width):bounds.height,contentLength=horizontal?this.container.scrollWidth:this.container.scrollHeight,prepend=function(){var first=this$1.views.first(),prev=first&&first.section.prev();prev&&newViews.push(this$1.prepend(prev))},append=function(){var last=this$1.views.last(),next=last&&last.section.next();next&&newViews.push(this$1.append(next))};offset+visibleLength+delta>=contentLength&&(horizontal&&rtl?prepend():append()),offset-delta<0&&(horizontal&&rtl?append():prepend());var promises=newViews.map((function(view){return view.displayed}));return newViews.length?Promise.all(promises).then((function(){if("pre-paginated"===this$1.layout.name&&this$1.layout.props.spread)return this$1.check()})).then((function(){return this$1.update(delta)}),(function(err){return err})):(this.q.enqueue(function(){this.update()}.bind(this)),checking.resolve(!1),checking.promise)},ContinuousViewManager.prototype.trim=function(){for(var task=new core.defer,displayed=this.views.displayed(),first=displayed[0],last=displayed[displayed.length-1],firstIndex=this.views.indexOf(first),lastIndex=this.views.indexOf(last),above=this.views.slice(0,firstIndex),below=this.views.slice(lastIndex+1),i=0;i<above.length-1;i++)this.erase(above[i],above);for(var j=1;j<below.length;j++)this.erase(below[j]);return task.resolve(),task.promise},ContinuousViewManager.prototype.erase=function(view,above){var prevTop,prevLeft;this.settings.fullsize?(prevTop=window.scrollY,prevLeft=window.scrollX):(prevTop=this.container.scrollTop,prevLeft=this.container.scrollLeft);var bounds=view.bounds();this.views.remove(view),above&&("vertical"===this.settings.axis?this.scrollTo(0,prevTop-bounds.height,!0):this.scrollTo(prevLeft-Math.floor(bounds.width),0,!0))},ContinuousViewManager.prototype.addEventListeners=function(stage){window.addEventListener("unload",function(e){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new snap(this,this.settings.snap&&"object"==typeof this.settings.snap&&this.settings.snap))},ContinuousViewManager.prototype.addScrollListeners=function(){var scroller;this.tick=core.requestAnimationFrame,this.settings.fullsize?(this.prevScrollTop=window.scrollY,this.prevScrollLeft=window.scrollX):(this.prevScrollTop=this.container.scrollTop,this.prevScrollLeft=this.container.scrollLeft),this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(scroller=window,this.scrollTop=window.scrollY,this.scrollLeft=window.scrollX):(scroller=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),scroller.addEventListener("scroll",this._onScroll),this._scrolled=debounce_default()(this.scrolled.bind(this),30),this.didScroll=!1},ContinuousViewManager.prototype.removeEventListeners=function(){(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0},ContinuousViewManager.prototype.onScroll=function(){var scrollTop,scrollLeft,dir="rtl"===this.settings.direction?-1:1;this.settings.fullsize?(scrollTop=window.scrollY*dir,scrollLeft=window.scrollX*dir):(scrollTop=this.container.scrollTop,scrollLeft=this.container.scrollLeft),this.scrollTop=scrollTop,this.scrollLeft=scrollLeft,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(scrollTop-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(scrollLeft-this.prevScrollLeft),this.prevScrollTop=scrollTop,this.prevScrollLeft=scrollLeft,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1},ContinuousViewManager.prototype.scrolled=function(){this.q.enqueue(function(){this.check()}.bind(this)),this.emit(constants.c.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(constants.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)},ContinuousViewManager.prototype.next=function(){this.settings.direction;var delta="pre-paginated"===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&"horizontal"===this.settings.axis?this.scrollBy(delta,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this)))},ContinuousViewManager.prototype.prev=function(){this.settings.direction;var delta="pre-paginated"===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&"horizontal"===this.settings.axis?this.scrollBy(-delta,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this)))},ContinuousViewManager.prototype.updateFlow=function(flow){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),DefaultViewManager.prototype.updateFlow.call(this,flow,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new snap(this,this.settings.snap&&"object"==typeof this.settings.snap&&this.settings.snap))},ContinuousViewManager.prototype.destroy=function(){DefaultViewManager.prototype.destroy.call(this),this.snapper&&this.snapper.destroy()},ContinuousViewManager}(managers_default.a);__webpack_exports__.a=continuous_ContinuousViewManager},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var _book__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(61),_rendition__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51),_epubcfi__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_contents__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(23),_utils_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),_utils_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1);__webpack_require__(129),__webpack_require__(24),__webpack_require__(25),__webpack_require__(57);function ePub(url,options){return new _book__WEBPACK_IMPORTED_MODULE_0__.a(url,options)}ePub.VERSION=_utils_constants__WEBPACK_IMPORTED_MODULE_5__.b,void 0!==global&&(global.EPUBJS_VERSION=_utils_constants__WEBPACK_IMPORTED_MODULE_5__.b),ePub.Book=_book__WEBPACK_IMPORTED_MODULE_0__.a,ePub.Rendition=_rendition__WEBPACK_IMPORTED_MODULE_1__.a,ePub.Contents=_contents__WEBPACK_IMPORTED_MODULE_3__.a,ePub.CFI=_epubcfi__WEBPACK_IMPORTED_MODULE_2__.a,ePub.utils=_utils_core__WEBPACK_IMPORTED_MODULE_4__,__webpack_exports__.a=ePub}).call(this,__webpack_require__(11))},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(195);module.exports=function(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},function(module,__webpack_exports__,__webpack_require__){"use strict";var SandboxIFrameView=function(iFrameView){function SandboxIFrameView(){iFrameView.apply(this,arguments)}return iFrameView&&(SandboxIFrameView.__proto__=iFrameView),SandboxIFrameView.prototype=Object.create(iFrameView&&iFrameView.prototype),SandboxIFrameView.prototype.constructor=SandboxIFrameView,SandboxIFrameView.prototype.create=function(){var iframe=iFrameView.prototype.create.call(this);return iframe.sandbox="allow-scripts allow-same-origin",iframe},SandboxIFrameView.prototype.getContents=function(){return this.contents},SandboxIFrameView.prototype.focus=function(){this.iframe&&this.iframe.focus()},SandboxIFrameView.prototype.expand=function(force){if(this.contents&&"scrolled"===this.layout.props.flow){var textWidth=this.contents.textWidth(),scrollWidth=this.contents.scrollWidth();textWidth!==scrollWidth&&scrollWidth>0&&(this.lockedWidth=textWidth)}return iFrameView.prototype.expand.call(this,force)},SandboxIFrameView}(__webpack_require__(24).a);__webpack_exports__.a=SandboxIFrameView},function(module,__webpack_exports__,__webpack_require__){"use strict";var event_emitter=__webpack_require__(4),event_emitter_default=__webpack_require__.n(event_emitter),core=__webpack_require__(0),utils_url=__webpack_require__(6),utils_path=__webpack_require__(5),epubcfi=__webpack_require__(2),hook=__webpack_require__(7),replacements=__webpack_require__(9),section_Section=function(item,hooks){this.idref=item.idref,this.linear="yes"===item.linear,this.properties=item.properties,this.index=item.index,this.href=item.href,this.url=item.url,this.canonical=item.canonical,this.next=item.next,this.prev=item.prev,this.cfiBase=item.cfiBase,hooks?this.hooks=hooks:(this.hooks={},this.hooks.serialize=new hook.a(this),this.hooks.content=new hook.a(this)),this.document=void 0,this.contents=void 0,this.output=void 0};section_Section.prototype.load=function(_request){var request=_request||this.request||__webpack_require__(13),loading=new core.defer,loaded=loading.promise;return this.contents?loading.resolve(this.contents):request(this.url).then(function(xml){return this.document=xml,this.contents=xml.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){loading.resolve(this.contents)}.bind(this)).catch((function(error){loading.reject(error)})),loaded},section_Section.prototype.base=function(){return Object(replacements.a)(this.document,this)},section_Section.prototype.render=function(_request){var rendering=new core.defer,rendered=rendering.promise;return this.output,this.load(_request).then(function(contents){var isIE=("undefined"!=typeof navigator&&navigator.userAgent||"").indexOf("Trident")>=0,serializer=new("undefined"==typeof XMLSerializer||isIE?__webpack_require__(63).XMLSerializer:XMLSerializer);return this.output=serializer.serializeToString(contents),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){rendering.resolve(this.output)}.bind(this)).catch((function(error){rendering.reject(error)})),rendered},section_Section.prototype.find=function(_query){var section=this,matches=[],query=_query.toLowerCase(),find=function(node){for(var cfi,pos,excerpt,text=node.textContent.toLowerCase(),range=section.document.createRange(),last=-1;-1!=pos;)-1!=(pos=text.indexOf(query,last+1))&&((range=section.document.createRange()).setStart(node,pos),range.setEnd(node,pos+query.length),cfi=section.cfiFromRange(range),excerpt=node.textContent.length<150?node.textContent:"..."+(excerpt=node.textContent.substring(pos-75,pos+75))+"...",matches.push({cfi:cfi,excerpt:excerpt})),last=pos};return Object(core.sprint)(section.document,(function(node){find(node)})),matches},section_Section.prototype.reconcileLayoutSettings=function(globalLayout){var settings={layout:globalLayout.layout,spread:globalLayout.spread,orientation:globalLayout.orientation};return this.properties.forEach((function(prop){var property,value,rendition=prop.replace("rendition:",""),split=rendition.indexOf("-");-1!=split&&(property=rendition.slice(0,split),value=rendition.slice(split+1),settings[property]=value)})),settings},section_Section.prototype.cfiFromRange=function(_range){return new epubcfi.a(_range,this.cfiBase).toString()},section_Section.prototype.cfiFromElement=function(el){return new epubcfi.a(el,this.cfiBase).toString()},section_Section.prototype.unload=function(){this.document=void 0,this.contents=void 0,this.output=void 0},section_Section.prototype.destroy=function(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0};var src_section=section_Section,spine_Spine=function(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new hook.a,this.hooks.content=new hook.a,this.hooks.content.register(replacements.a),this.hooks.content.register(replacements.b),this.hooks.content.register(replacements.d),this.epubcfi=new epubcfi.a,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0};spine_Spine.prototype.unpack=function(_package,resolver,canonical){var this$1=this;this.items=_package.spine,this.manifest=_package.manifest,this.spineNodeIndex=_package.spineNodeIndex,this.baseUrl=_package.baseUrl||_package.basePath||"",this.length=this.items.length,this.items.forEach((function(item,index){var spineItem,manifestItem=this$1.manifest[item.idref];item.index=index,item.cfiBase=this$1.epubcfi.generateChapterComponent(this$1.spineNodeIndex,item.index,item.idref),item.href&&(item.url=resolver(item.href,!0),item.canonical=canonical(item.href)),manifestItem&&(item.href=manifestItem.href,item.url=resolver(item.href,!0),item.canonical=canonical(item.href),manifestItem.properties.length&&item.properties.push.apply(item.properties,manifestItem.properties)),"yes"===item.linear?(item.prev=function(){for(var prevIndex=item.index;prevIndex>0;){var prev=this.get(prevIndex-1);if(prev&&prev.linear)return prev;prevIndex-=1}}.bind(this$1),item.next=function(){for(var nextIndex=item.index;nextIndex<this.spineItems.length-1;){var next=this.get(nextIndex+1);if(next&&next.linear)return next;nextIndex+=1}}.bind(this$1)):(item.prev=function(){},item.next=function(){}),spineItem=new src_section(item,this$1.hooks),this$1.append(spineItem)})),this.loaded=!0},spine_Spine.prototype.get=function(target){var index=0;if(void 0===target)for(;index<this.spineItems.length;){var next=this.spineItems[index];if(next&&next.linear)break;index+=1}else if(this.epubcfi.isCfiString(target)){index=new epubcfi.a(target).spinePos}else"number"==typeof target||!1===isNaN(target)?index=target:"string"==typeof target&&0===target.indexOf("#")?index=this.spineById[target.substring(1)]:"string"==typeof target&&(target=target.split("#")[0],index=this.spineByHref[target]||this.spineByHref[encodeURI(target)]);return this.spineItems[index]||null},spine_Spine.prototype.append=function(section){var index=this.spineItems.length;return section.index=index,this.spineItems.push(section),this.spineByHref[decodeURI(section.href)]=index,this.spineByHref[encodeURI(section.href)]=index,this.spineByHref[section.href]=index,this.spineById[section.idref]=index,index},spine_Spine.prototype.prepend=function(section){return this.spineByHref[section.href]=0,this.spineById[section.idref]=0,this.spineItems.forEach((function(item,index){item.index=index})),0},spine_Spine.prototype.remove=function(section){var index=this.spineItems.indexOf(section);if(index>-1)return delete this.spineByHref[section.href],delete this.spineById[section.idref],this.spineItems.splice(index,1)},spine_Spine.prototype.each=function(){return this.spineItems.forEach.apply(this.spineItems,arguments)},spine_Spine.prototype.first=function(){var index=0;do{var next=this.get(index);if(next&&next.linear)return next;index+=1}while(index<this.spineItems.length)},spine_Spine.prototype.last=function(){var index=this.spineItems.length-1;do{var prev=this.get(index);if(prev&&prev.linear)return prev;index-=1}while(index>=0)},spine_Spine.prototype.destroy=function(){this.each((function(section){return section.destroy()})),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0};var src_spine=spine_Spine,queue=__webpack_require__(16),constants=__webpack_require__(1),locations_Locations=function(spine,request,pause){this.spine=spine,this.request=request,this.pause=pause||100,this.q=new queue.a(this),this.epubcfi=new epubcfi.a,this._locations=[],this.total=0,this.break=150,this._current=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0},prototypeAccessors={currentLocation:{configurable:!0}};locations_Locations.prototype.generate=function(chars){return chars&&(this.break=chars),this.q.pause(),this.spine.each(function(section){section.linear&&this.q.enqueue(this.process.bind(this),section)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))},locations_Locations.prototype.createRange=function(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}},locations_Locations.prototype.process=function(section){return section.load(this.request).then(function(contents){var completed=new core.defer,locations=this.parse(contents,section.cfiBase);return this._locations=this._locations.concat(locations),section.unload(),this.processingTimeout=setTimeout((function(){return completed.resolve(locations)}),this.pause),completed.promise}.bind(this))},locations_Locations.prototype.parse=function(contents,cfiBase,chars){var range,prev,locations=[],doc=contents.ownerDocument,body=Object(core.qs)(doc,"body"),counter=0,_break=chars||this.break;if(Object(core.sprint)(body,function(node){var dist,len=node.length,pos=0;if(0===node.textContent.trim().length)return!1;for(0==counter&&((range=this.createRange()).startContainer=node,range.startOffset=0),(dist=_break-counter)>len&&(counter+=len,pos=len);pos<len;)if(dist=_break-counter,0===counter&&(pos+=1,(range=this.createRange()).startContainer=node,range.startOffset=pos),pos+dist>=len)counter+=len-pos,pos=len;else{pos+=dist,range.endContainer=node,range.endOffset=pos;var cfi=new epubcfi.a(range,cfiBase).toString();locations.push(cfi),counter=0}prev=node}.bind(this)),range&&range.startContainer&&prev){range.endContainer=prev,range.endOffset=prev.length;var cfi=new epubcfi.a(range,cfiBase).toString();locations.push(cfi),counter=0}return locations},locations_Locations.prototype.locationFromCfi=function(cfi){var loc;return epubcfi.a.prototype.isCfiString(cfi)&&(cfi=new epubcfi.a(cfi)),0===this._locations.length?-1:(loc=Object(core.locationOf)(cfi,this._locations,this.epubcfi.compare))>this.total?this.total:loc},locations_Locations.prototype.percentageFromCfi=function(cfi){if(0===this._locations.length)return null;var loc=this.locationFromCfi(cfi);return this.percentageFromLocation(loc)},locations_Locations.prototype.percentageFromLocation=function(loc){return loc&&this.total?loc/this.total:0},locations_Locations.prototype.cfiFromLocation=function(loc){var cfi=-1;return"number"!=typeof loc&&(loc=parseInt(loc)),loc>=0&&loc<this._locations.length&&(cfi=this._locations[loc]),cfi},locations_Locations.prototype.cfiFromPercentage=function(percentage){var loc;if(percentage>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),percentage>=1){var cfi=new epubcfi.a(this._locations[this.total]);return cfi.collapse(),cfi.toString()}return loc=Math.ceil(this.total*percentage),this.cfiFromLocation(loc)},locations_Locations.prototype.load=function(locations){return this._locations="string"==typeof locations?JSON.parse(locations):locations,this.total=this._locations.length-1,this._locations},locations_Locations.prototype.save=function(){return JSON.stringify(this._locations)},locations_Locations.prototype.getCurrent=function(){return this._current},locations_Locations.prototype.setCurrent=function(curr){var loc;if("string"==typeof curr)this._currentCfi=curr;else{if("number"!=typeof curr)return;this._current=curr}0!==this._locations.length&&("string"==typeof curr?(loc=this.locationFromCfi(curr),this._current=loc):loc=curr,this.emit(constants.c.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(loc)}))},prototypeAccessors.currentLocation.get=function(){return this._current},prototypeAccessors.currentLocation.set=function(curr){this.setCurrent(curr)},locations_Locations.prototype.length=function(){return this._locations.length},locations_Locations.prototype.destroy=function(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)},Object.defineProperties(locations_Locations.prototype,prototypeAccessors),event_emitter_default()(locations_Locations.prototype);var src_locations=locations_Locations,path_webpack_path=__webpack_require__(8),path_default=__webpack_require__.n(path_webpack_path),Container=function(containerDocument){this.packagePath="",this.directory="",this.encoding="",containerDocument&&this.parse(containerDocument)};Container.prototype.parse=function(containerDocument){var rootfile;if(!containerDocument)throw new Error("Container File Not Found");if(!(rootfile=Object(core.qs)(containerDocument,"rootfile")))throw new Error("No RootFile Found");this.packagePath=rootfile.getAttribute("full-path"),this.directory=path_default.a.dirname(this.packagePath),this.encoding=containerDocument.xmlEncoding},Container.prototype.destroy=function(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0};var container=Container,Packaging=function(packageDocument){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},packageDocument&&this.parse(packageDocument)};Packaging.prototype.parse=function(packageDocument){var metadataNode,manifestNode,spineNode;if(!packageDocument)throw new Error("Package File Not Found");if(!(metadataNode=Object(core.qs)(packageDocument,"metadata")))throw new Error("No Metadata Found");if(!(manifestNode=Object(core.qs)(packageDocument,"manifest")))throw new Error("No Manifest Found");if(!(spineNode=Object(core.qs)(packageDocument,"spine")))throw new Error("No Spine Found");return this.manifest=this.parseManifest(manifestNode),this.navPath=this.findNavPath(manifestNode),this.ncxPath=this.findNcxPath(manifestNode,spineNode),this.coverPath=this.findCoverPath(packageDocument),this.spineNodeIndex=Object(core.indexOfElementNode)(spineNode),this.spine=this.parseSpine(spineNode,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(packageDocument),this.metadata=this.parseMetadata(metadataNode),this.metadata.direction=spineNode.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}},Packaging.prototype.parseMetadata=function(xml){var metadata={};return metadata.title=this.getElementText(xml,"title"),metadata.creator=this.getElementText(xml,"creator"),metadata.description=this.getElementText(xml,"description"),metadata.pubdate=this.getElementText(xml,"date"),metadata.publisher=this.getElementText(xml,"publisher"),metadata.identifier=this.getElementText(xml,"identifier"),metadata.language=this.getElementText(xml,"language"),metadata.rights=this.getElementText(xml,"rights"),metadata.modified_date=this.getPropertyText(xml,"dcterms:modified"),metadata.layout=this.getPropertyText(xml,"rendition:layout"),metadata.orientation=this.getPropertyText(xml,"rendition:orientation"),metadata.flow=this.getPropertyText(xml,"rendition:flow"),metadata.viewport=this.getPropertyText(xml,"rendition:viewport"),metadata.media_active_class=this.getPropertyText(xml,"media:active-class"),metadata},Packaging.prototype.parseManifest=function(manifestXml){var manifest={},selected=Object(core.qsa)(manifestXml,"item");return Array.prototype.slice.call(selected).forEach((function(item){var id=item.getAttribute("id"),href=item.getAttribute("href")||"",type=item.getAttribute("media-type")||"",overlay=item.getAttribute("media-overlay")||"",properties=item.getAttribute("properties")||"";manifest[id]={href:href,type:type,overlay:overlay,properties:properties.length?properties.split(" "):[]}})),manifest},Packaging.prototype.parseSpine=function(spineXml,manifest){var spine=[],selected=Object(core.qsa)(spineXml,"itemref");return Array.prototype.slice.call(selected).forEach((function(item,index){var idref=item.getAttribute("idref"),props=item.getAttribute("properties")||"",propArray=props.length?props.split(" "):[],itemref={idref:idref,linear:item.getAttribute("linear")||"yes",properties:propArray,index:index};spine.push(itemref)})),spine},Packaging.prototype.findUniqueIdentifier=function(packageXml){var uniqueIdentifierId=packageXml.documentElement.getAttribute("unique-identifier");if(!uniqueIdentifierId)return"";var identifier=packageXml.getElementById(uniqueIdentifierId);return identifier&&"identifier"===identifier.localName&&"http://purl.org/dc/elements/1.1/"===identifier.namespaceURI?identifier.childNodes[0].nodeValue.trim():""},Packaging.prototype.findNavPath=function(manifestNode){var node=Object(core.qsp)(manifestNode,"item",{properties:"nav"});return!!node&&node.getAttribute("href")},Packaging.prototype.findNcxPath=function(manifestNode,spineNode){var tocId,node=Object(core.qsp)(manifestNode,"item",{"media-type":"application/x-dtbncx+xml"});return node||(tocId=spineNode.getAttribute("toc"))&&(node=manifestNode.querySelector("#"+tocId)),!!node&&node.getAttribute("href")},Packaging.prototype.findCoverPath=function(packageXml){if("2.0"===Object(core.qs)(packageXml,"package").getAttribute("version")){var metaCover=Object(core.qsp)(packageXml,"meta",{name:"cover"});if(metaCover){var coverId=metaCover.getAttribute("content"),cover=packageXml.getElementById(coverId);return cover?cover.getAttribute("href"):""}return!1}var node=Object(core.qsp)(packageXml,"item",{properties:"cover-image"});return node?node.getAttribute("href"):""},Packaging.prototype.getElementText=function(xml,tag){var el,found=xml.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",tag);return found&&0!==found.length&&(el=found[0]).childNodes.length?el.childNodes[0].nodeValue:""},Packaging.prototype.getPropertyText=function(xml,property){var el=Object(core.qsp)(xml,"meta",{property:property});return el&&el.childNodes.length?el.childNodes[0].nodeValue:""},Packaging.prototype.load=function(json){var this$1=this;this.metadata=json.metadata;var spine=json.readingOrder||json.spine;return this.spine=spine.map((function(item,index){return item.index=index,item.linear=item.linear||"yes",item})),json.resources.forEach((function(item,index){this$1.manifest[index]=item,item.rel&&"cover"===item.rel[0]&&(this$1.coverPath=item.href)})),this.spineNodeIndex=0,this.toc=json.toc.map((function(item,index){return item.label=item.title,item})),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}},Packaging.prototype.destroy=function(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0};var src_packaging=Packaging,Navigation=function(xml){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,xml&&this.parse(xml)};Navigation.prototype.parse=function(xml){var html,ncx,isXml=xml.nodeType;isXml&&(html=Object(core.qs)(xml,"html"),ncx=Object(core.qs)(xml,"ncx")),isXml?html?(this.toc=this.parseNav(xml),this.landmarks=this.parseLandmarks(xml)):ncx&&(this.toc=this.parseNcx(xml)):this.toc=this.load(xml),this.length=0,this.unpack(this.toc)},Navigation.prototype.unpack=function(toc){for(var item,i=0;i<toc.length;i++)(item=toc[i]).href&&(this.tocByHref[item.href]=i),item.id&&(this.tocById[item.id]=i),this.length++,item.subitems.length&&this.unpack(item.subitems)},Navigation.prototype.get=function(target){var index;return target?(0===target.indexOf("#")?index=this.tocById[target.substring(1)]:target in this.tocByHref&&(index=this.tocByHref[target]),this.toc[index]):this.toc},Navigation.prototype.landmark=function(type){var index;return type?(index=this.landmarksByType[type],this.landmarks[index]):this.landmarks},Navigation.prototype.parseNav=function(navHtml){var i,item,navElement=Object(core.querySelectorByType)(navHtml,"nav","toc"),navItems=navElement?Object(core.qsa)(navElement,"li"):[],length=navItems.length,toc={},list=[];if(!navItems||0===length)return list;for(i=0;i<length;++i)(item=this.navItem(navItems[i]))&&(toc[item.id]=item,item.parent?toc[item.parent].subitems.push(item):list.push(item));return list},Navigation.prototype.navItem=function(item){var id=item.getAttribute("id")||void 0,content=Object(core.filterChildren)(item,"a",!0);if(content){var src=content.getAttribute("href")||"";id||(id=src);var parent,text=content.textContent||"",parentItem=Object(core.getParentByTagName)(item,"li");if(parentItem&&!(parent=parentItem.getAttribute("id"))){var parentContent=Object(core.filterChildren)(parentItem,"a",!0);parent=parentContent&&parentContent.getAttribute("href")}for(;!parent&&parentItem;)if((parentItem=Object(core.getParentByTagName)(parentItem,"li"))&&!(parent=parentItem.getAttribute("id"))){var parentContent$1=Object(core.filterChildren)(parentItem,"a",!0);parent=parentContent$1&&parentContent$1.getAttribute("href")}return{id:id,href:src,label:text,subitems:[],parent:parent}}},Navigation.prototype.parseLandmarks=function(navHtml){var i,item,navElement=Object(core.querySelectorByType)(navHtml,"nav","landmarks"),navItems=navElement?Object(core.qsa)(navElement,"li"):[],length=navItems.length,list=[];if(!navItems||0===length)return list;for(i=0;i<length;++i)(item=this.landmarkItem(navItems[i]))&&(list.push(item),this.landmarksByType[item.type]=i);return list},Navigation.prototype.landmarkItem=function(item){var content=Object(core.filterChildren)(item,"a",!0);if(content){var type=content.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0;return{href:content.getAttribute("href")||"",label:content.textContent||"",type:type}}},Navigation.prototype.parseNcx=function(tocXml){var i,item,navPoints=Object(core.qsa)(tocXml,"navPoint"),length=navPoints.length,toc={},list=[];if(!navPoints||0===length)return list;for(i=0;i<length;++i)toc[(item=this.ncxItem(navPoints[i])).id]=item,item.parent?toc[item.parent].subitems.push(item):list.push(item);return list},Navigation.prototype.ncxItem=function(item){var parent,id=item.getAttribute("id")||!1,src=Object(core.qs)(item,"content").getAttribute("src"),navLabel=Object(core.qs)(item,"navLabel"),text=navLabel.textContent?navLabel.textContent:"",parentNode=item.parentNode;return!parentNode||"navPoint"!==parentNode.nodeName&&"navPoint"!==parentNode.nodeName.split(":").slice(-1)[0]||(parent=parentNode.getAttribute("id")),{id:id,href:src,label:text,subitems:[],parent:parent}},Navigation.prototype.load=function(json){var this$1=this;return json.map((function(item){return item.label=item.title,item.subitems=item.children?this$1.load(item.children):[],item}))},Navigation.prototype.forEach=function(fn){return this.toc.forEach(fn)};var navigation=Navigation,mime=__webpack_require__(12),mime_default=__webpack_require__.n(mime),Resources=function(manifest,options){this.settings={replacements:options&&options.replacements||"base64",archive:options&&options.archive,resolver:options&&options.resolver,request:options&&options.request},this.process(manifest)};Resources.prototype.process=function(manifest){this.manifest=manifest,this.resources=Object.keys(manifest).map((function(key){return manifest[key]})),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()},Resources.prototype.split=function(){this.html=this.resources.filter((function(item){if("application/xhtml+xml"===item.type||"text/html"===item.type)return!0})),this.assets=this.resources.filter((function(item){if("application/xhtml+xml"!==item.type&&"text/html"!==item.type)return!0})),this.css=this.resources.filter((function(item){if("text/css"===item.type)return!0}))},Resources.prototype.splitUrls=function(){this.urls=this.assets.map(function(item){return item.href}.bind(this)),this.cssUrls=this.css.map((function(item){return item.href}))},Resources.prototype.createUrl=function(url){var parsedUrl=new utils_url.a(url),mimeType=mime_default.a.lookup(parsedUrl.filename);return this.settings.archive?this.settings.archive.createUrl(url,{base64:"base64"===this.settings.replacements}):"base64"===this.settings.replacements?this.settings.request(url,"blob").then((function(blob){return Object(core.blob2base64)(blob)})).then((function(blob){return Object(core.createBase64Url)(blob,mimeType)})):this.settings.request(url,"blob").then((function(blob){return Object(core.createBlobUrl)(blob,mimeType)}))},Resources.prototype.replacements=function(){var this$1=this;if("none"===this.settings.replacements)return new Promise(function(resolve){resolve(this.urls)}.bind(this));var replacements=this.urls.map((function(url){var absolute=this$1.settings.resolver(url);return this$1.createUrl(absolute).catch((function(err){return console.error(err),null}))}));return Promise.all(replacements).then((function(replacementUrls){return this$1.replacementUrls=replacementUrls.filter((function(url){return"string"==typeof url})),replacementUrls}))},Resources.prototype.replaceCss=function(archive,resolver){var replaced=[];return archive=archive||this.settings.archive,resolver=resolver||this.settings.resolver,this.cssUrls.forEach(function(href){var replacement=this.createCssFile(href,archive,resolver).then(function(replacementUrl){var indexInUrls=this.urls.indexOf(href);indexInUrls>-1&&(this.replacementUrls[indexInUrls]=replacementUrl)}.bind(this));replaced.push(replacement)}.bind(this)),Promise.all(replaced)},Resources.prototype.createCssFile=function(href){var this$1=this;if(path_default.a.isAbsolute(href))return new Promise((function(resolve){resolve()}));var textResponse,absolute=this.settings.resolver(href);textResponse=this.settings.archive?this.settings.archive.getText(absolute):this.settings.request(absolute,"text");var relUrls=this.urls.map((function(assetHref){var resolved=this$1.settings.resolver(assetHref);return new utils_path.a(absolute).relative(resolved)}));return textResponse?textResponse.then((function(text){return text=Object(replacements.e)(text,relUrls,this$1.replacementUrls),"base64"===this$1.settings.replacements?Object(core.createBase64Url)(text,"text/css"):Object(core.createBlobUrl)(text,"text/css")}),(function(err){return new Promise((function(resolve){resolve()}))})):new Promise((function(resolve){resolve()}))},Resources.prototype.relativeTo=function(absolute,resolver){return resolver=resolver||this.settings.resolver,this.urls.map(function(href){var resolved=resolver(href);return new utils_path.a(absolute).relative(resolved)}.bind(this))},Resources.prototype.get=function(path){var indexInUrls=this.urls.indexOf(path);if(-1!==indexInUrls)return this.replacementUrls.length?new Promise(function(resolve,reject){resolve(this.replacementUrls[indexInUrls])}.bind(this)):this.createUrl(path)},Resources.prototype.substitute=function(content,url){var relUrls;return relUrls=url?this.relativeTo(url):this.urls,Object(replacements.e)(content,relUrls,this.replacementUrls)},Resources.prototype.destroy=function(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0};var resources=Resources,pagelist_PageList=function(xml){this.pages=[],this.locations=[],this.epubcfi=new epubcfi.a,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,xml&&(this.pageList=this.parse(xml)),this.pageList&&this.pageList.length&&this.process(this.pageList)};pagelist_PageList.prototype.parse=function(xml){var html=Object(core.qs)(xml,"html"),ncx=Object(core.qs)(xml,"ncx");return html?this.parseNav(xml):ncx?this.parseNcx(xml):void 0},pagelist_PageList.prototype.parseNav=function(navHtml){var i,item,navElement=Object(core.querySelectorByType)(navHtml,"nav","page-list"),navItems=navElement?Object(core.qsa)(navElement,"li"):[],length=navItems.length,list=[];if(!navItems||0===length)return list;for(i=0;i<length;++i)item=this.item(navItems[i]),list.push(item);return list},pagelist_PageList.prototype.parseNcx=function(navXml){var item,pageList,pageTargets,length,list=[],i=0;if(!(pageList=Object(core.qs)(navXml,"pageList")))return list;if(length=(pageTargets=Object(core.qsa)(pageList,"pageTarget")).length,!pageTargets||0===pageTargets.length)return list;for(i=0;i<length;++i)item=this.ncxItem(pageTargets[i]),list.push(item);return list},pagelist_PageList.prototype.ncxItem=function(item){var navLabel=Object(core.qs)(item,"navLabel"),pageText=Object(core.qs)(navLabel,"text").textContent;return{href:Object(core.qs)(item,"content").getAttribute("src"),page:parseInt(pageText,10)}},pagelist_PageList.prototype.item=function(item$1){var split,packageUrl,content=Object(core.qs)(item$1,"a"),href=content.getAttribute("href")||"",text=content.textContent||"",page=parseInt(text);return-1!=href.indexOf("epubcfi")?(packageUrl=(split=href.split("#"))[0],{cfi:split.length>1&&split[1],href:href,packageUrl:packageUrl,page:page}):{href:href,page:page}},pagelist_PageList.prototype.process=function(pageList){pageList.forEach((function(item){this.pages.push(item.page),item.cfi&&this.locations.push(item.cfi)}),this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage},pagelist_PageList.prototype.pageFromCfi=function(cfi){var pg=-1;if(0===this.locations.length)return-1;var index=Object(core.indexOfSorted)(cfi,this.locations,this.epubcfi.compare);return-1!=index?pg=this.pages[index]:void 0!==(pg=(index=Object(core.locationOf)(cfi,this.locations,this.epubcfi.compare))-1>=0?this.pages[index-1]:this.pages[0])||(pg=-1),pg},pagelist_PageList.prototype.cfiFromPage=function(pg){var cfi=-1;"number"!=typeof pg&&(pg=parseInt(pg));var index=this.pages.indexOf(pg);return-1!=index&&(cfi=this.locations[index]),cfi},pagelist_PageList.prototype.pageFromPercentage=function(percent){return Math.round(this.totalPages*percent)},pagelist_PageList.prototype.percentageFromPage=function(pg){var percentage=(pg-this.firstPage)/this.totalPages;return Math.round(1e3*percentage)/1e3},pagelist_PageList.prototype.percentageFromCfi=function(cfi){var pg=this.pageFromCfi(cfi);return this.percentageFromPage(pg)},pagelist_PageList.prototype.destroy=function(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0};var pagelist=pagelist_PageList,rendition=__webpack_require__(51),utils_request=__webpack_require__(13),Archive=function(){this.zip=void 0,this.urlCache={},this.checkRequirements()};Archive.prototype.checkRequirements=function(){try{if("undefined"==typeof JSZip){var JSZip$1=__webpack_require__(120);this.zip=new JSZip$1}else this.zip=new JSZip}catch(e){throw new Error("JSZip lib not loaded")}},Archive.prototype.open=function(input,isBase64){return this.zip.loadAsync(input,{base64:isBase64})},Archive.prototype.openUrl=function(zipUrl,isBase64){return Object(utils_request.default)(zipUrl,"binary").then(function(data){return this.zip.loadAsync(data,{base64:isBase64})}.bind(this))},Archive.prototype.request=function(url,type){var response,deferred=new core.defer,path=new utils_path.a(url);return type||(type=path.extension),(response="blob"==type?this.getBlob(url):this.getText(url))?response.then(function(r){var result=this.handleResponse(r,type);deferred.resolve(result)}.bind(this)):deferred.reject({message:"File not found in the epub: "+url,stack:(new Error).stack}),deferred.promise},Archive.prototype.handleResponse=function(response,type){return"json"==type?JSON.parse(response):Object(core.isXml)(type)?Object(core.parse)(response,"text/xml"):"xhtml"==type?Object(core.parse)(response,"application/xhtml+xml"):"html"==type||"htm"==type?Object(core.parse)(response,"text/html"):response},Archive.prototype.getBlob=function(url,mimeType){var decodededUrl=window.decodeURIComponent(url.substr(1)),entry=this.zip.file(decodededUrl);if(entry)return mimeType=mimeType||mime_default.a.lookup(entry.name),entry.async("uint8array").then((function(uint8array){return new Blob([uint8array],{type:mimeType})}))},Archive.prototype.getText=function(url,encoding){var decodededUrl=window.decodeURIComponent(url.substr(1)),entry=this.zip.file(decodededUrl);if(entry)return entry.async("string").then((function(text){return text}))},Archive.prototype.getBase64=function(url,mimeType){var decodededUrl=window.decodeURIComponent(url.substr(1)),entry=this.zip.file(decodededUrl);if(entry)return mimeType=mimeType||mime_default.a.lookup(entry.name),entry.async("base64").then((function(data){return"data:"+mimeType+";base64,"+data}))},Archive.prototype.createUrl=function(url,options){var tempUrl,response,deferred=new core.defer,_URL=window.URL||window.webkitURL||window.mozURL,useBase64=options&&options.base64;return url in this.urlCache?(deferred.resolve(this.urlCache[url]),deferred.promise):(useBase64?(response=this.getBase64(url))&&response.then(function(tempUrl){this.urlCache[url]=tempUrl,deferred.resolve(tempUrl)}.bind(this)):(response=this.getBlob(url))&&response.then(function(blob){tempUrl=_URL.createObjectURL(blob),this.urlCache[url]=tempUrl,deferred.resolve(tempUrl)}.bind(this)),response||deferred.reject({message:"File not found in the epub: "+url,stack:(new Error).stack}),deferred.promise)},Archive.prototype.revokeUrl=function(url){var _URL=window.URL||window.webkitURL||window.mozURL,fromCache=this.urlCache[url];fromCache&&_URL.revokeObjectURL(fromCache)},Archive.prototype.destroy=function(){var _URL=window.URL||window.webkitURL||window.mozURL;for(var fromCache in this.urlCache)_URL.revokeObjectURL(fromCache);this.zip=void 0,this.urlCache={}};var archive=Archive,store_Store=function(name,requester,resolver){this.urlCache={},this.storage=void 0,this.name=name,this.requester=requester||utils_request.default,this.resolver=resolver,this.online=!0,this.checkRequirements(),this.addListeners()};store_Store.prototype.checkRequirements=function(){try{var store;store="undefined"==typeof localforage?__webpack_require__(128):localforage,this.storage=store.createInstance({name:this.name})}catch(e){throw new Error("localForage lib not loaded")}},store_Store.prototype.addListeners=function(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)},store_Store.prototype.removeListeners=function(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0},store_Store.prototype.status=function(event){var online=navigator.onLine;this.online=online,online?this.emit("online",this):this.emit("offline",this)},store_Store.prototype.add=function(resources,force){var this$1=this,mapped=resources.resources.map((function(item){var href=item.href,url=this$1.resolver(href),encodedUrl=window.encodeURIComponent(url);return this$1.storage.getItem(encodedUrl).then((function(item){return!item||force?this$1.requester(url,"binary").then((function(data){return this$1.storage.setItem(encodedUrl,data)})):item}))}));return Promise.all(mapped)},store_Store.prototype.put=function(url,withCredentials,headers){var this$1=this,encodedUrl=window.encodeURIComponent(url);return this.storage.getItem(encodedUrl).then((function(result){return result||this$1.requester(url,"binary",withCredentials,headers).then((function(data){return this$1.storage.setItem(encodedUrl,data)}))}))},store_Store.prototype.request=function(url,type,withCredentials,headers){var this$1=this;return this.online?this.requester(url,type,withCredentials,headers).then((function(data){return this$1.put(url),data})):this.retrieve(url,type)},store_Store.prototype.retrieve=function(url,type){var this$1=this,path=(new core.defer,new utils_path.a(url));return type||(type=path.extension),("blob"==type?this.getBlob(url):this.getText(url)).then((function(r){var result,deferred=new core.defer;return r?(result=this$1.handleResponse(r,type),deferred.resolve(result)):deferred.reject({message:"File not found in storage: "+url,stack:(new Error).stack}),deferred.promise}))},store_Store.prototype.handleResponse=function(response,type){return"json"==type?JSON.parse(response):Object(core.isXml)(type)?Object(core.parse)(response,"text/xml"):"xhtml"==type?Object(core.parse)(response,"application/xhtml+xml"):"html"==type||"htm"==type?Object(core.parse)(response,"text/html"):response},store_Store.prototype.getBlob=function(url,mimeType){var encodedUrl=window.encodeURIComponent(url);return this.storage.getItem(encodedUrl).then((function(uint8array){if(uint8array)return mimeType=mimeType||mime_default.a.lookup(url),new Blob([uint8array],{type:mimeType})}))},store_Store.prototype.getText=function(url,mimeType){var encodedUrl=window.encodeURIComponent(url);return mimeType=mimeType||mime_default.a.lookup(url),this.storage.getItem(encodedUrl).then((function(uint8array){var blob,deferred=new core.defer,reader=new FileReader;if(uint8array)return blob=new Blob([uint8array],{type:mimeType}),reader.addEventListener("loadend",(function(){deferred.resolve(reader.result)})),reader.readAsText(blob,mimeType),deferred.promise}))},store_Store.prototype.getBase64=function(url,mimeType){var encodedUrl=window.encodeURIComponent(url);return mimeType=mimeType||mime_default.a.lookup(url),this.storage.getItem(encodedUrl).then((function(uint8array){var blob,deferred=new core.defer,reader=new FileReader;if(uint8array)return blob=new Blob([uint8array],{type:mimeType}),reader.addEventListener("loadend",(function(){deferred.resolve(reader.result)})),reader.readAsDataURL(blob,mimeType),deferred.promise}))},store_Store.prototype.createUrl=function(url,options){var tempUrl,response,deferred=new core.defer,_URL=window.URL||window.webkitURL||window.mozURL,useBase64=options&&options.base64;return url in this.urlCache?(deferred.resolve(this.urlCache[url]),deferred.promise):(useBase64?(response=this.getBase64(url))&&response.then(function(tempUrl){this.urlCache[url]=tempUrl,deferred.resolve(tempUrl)}.bind(this)):(response=this.getBlob(url))&&response.then(function(blob){tempUrl=_URL.createObjectURL(blob),this.urlCache[url]=tempUrl,deferred.resolve(tempUrl)}.bind(this)),response||deferred.reject({message:"File not found in storage: "+url,stack:(new Error).stack}),deferred.promise)},store_Store.prototype.revokeUrl=function(url){var _URL=window.URL||window.webkitURL||window.mozURL,fromCache=this.urlCache[url];fromCache&&_URL.revokeObjectURL(fromCache)},store_Store.prototype.destroy=function(){var _URL=window.URL||window.webkitURL||window.mozURL;for(var fromCache in this.urlCache)_URL.revokeObjectURL(fromCache);this.urlCache={},this.removeListeners()},event_emitter_default()(store_Store.prototype);var src_store=store_Store,DisplayOptions=function(displayOptionsDocument){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",displayOptionsDocument&&this.parse(displayOptionsDocument)};DisplayOptions.prototype.parse=function(displayOptionsDocument){var this$1=this;if(!displayOptionsDocument)return this;var displayOptionsNode=Object(core.qs)(displayOptionsDocument,"display_options");return displayOptionsNode?(Object(core.qsa)(displayOptionsNode,"option").forEach((function(el){var value="";switch(el.childNodes.length&&(value=el.childNodes[0].nodeValue),el.attributes.name.value){case"interactive":this$1.interactive=value;break;case"fixed-layout":this$1.fixedLayout=value;break;case"open-to-spread":this$1.openToSpread=value;break;case"orientation-lock":this$1.orientationLock=value}})),this):this},DisplayOptions.prototype.destroy=function(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0};var displayoptions=DisplayOptions,INPUT_TYPE_BINARY="binary",INPUT_TYPE_BASE64="base64",INPUT_TYPE_EPUB="epub",INPUT_TYPE_OPF="opf",INPUT_TYPE_MANIFEST="json",INPUT_TYPE_DIRECTORY="directory",book_Book=function(url,options){var this$1=this;void 0===options&&"string"!=typeof url&&url instanceof Blob==!1&&(options=url,url=void 0),this.settings=Object(core.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),Object(core.extend)(this.settings,options),this.opening=new core.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new core.defer,spine:new core.defer,metadata:new core.defer,cover:new core.defer,navigation:new core.defer,pageList:new core.defer,resources:new core.defer,displayOptions:new core.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||utils_request.default,this.spine=new src_spine,this.locations=new src_locations(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),url&&this.open(url,this.settings.openAs).catch((function(error){var err=new Error("Cannot load book at "+url);this$1.emit(constants.c.BOOK.OPEN_FAILED,err)}))};book_Book.prototype.open=function(input,what){var opening,type=what||this.determineType(input);return type===INPUT_TYPE_BINARY?(this.archived=!0,this.url=new utils_url.a("/",""),opening=this.openEpub(input)):type===INPUT_TYPE_BASE64?(this.archived=!0,this.url=new utils_url.a("/",""),opening=this.openEpub(input,type)):type===INPUT_TYPE_EPUB?(this.archived=!0,this.url=new utils_url.a("/",""),opening=this.request(input,"binary",this.settings.requestCredentials).then(this.openEpub.bind(this))):type==INPUT_TYPE_OPF?(this.url=new utils_url.a(input),opening=this.openPackaging(this.url.Path.toString())):type==INPUT_TYPE_MANIFEST?(this.url=new utils_url.a(input),opening=this.openManifest(this.url.Path.toString())):(this.url=new utils_url.a(input),opening=this.openContainer("META-INF/container.xml").then(this.openPackaging.bind(this))),opening},book_Book.prototype.openEpub=function(data,encoding){var this$1=this;return this.unarchive(data,encoding||this.settings.encoding).then((function(){return this$1.openContainer("META-INF/container.xml")})).then((function(packagePath){return this$1.openPackaging(packagePath)}))},book_Book.prototype.openContainer=function(url){var this$1=this;return this.load(url).then((function(xml){return this$1.container=new container(xml),this$1.resolve(this$1.container.packagePath)}))},book_Book.prototype.openPackaging=function(url){var this$1=this;return this.path=new utils_path.a(url),this.load(url).then((function(xml){return this$1.packaging=new src_packaging(xml),this$1.unpack(this$1.packaging)}))},book_Book.prototype.openManifest=function(url){var this$1=this;return this.path=new utils_path.a(url),this.load(url).then((function(json){return this$1.packaging=new src_packaging,this$1.packaging.load(json),this$1.unpack(this$1.packaging)}))},book_Book.prototype.load=function(path){var resolved=this.resolve(path);return this.archived?this.archive.request(resolved):this.request(resolved,null,this.settings.requestCredentials,this.settings.requestHeaders)},book_Book.prototype.resolve=function(path,absolute){if(path){var resolved=path;return path.indexOf("://")>-1?path:(this.path&&(resolved=this.path.resolve(path)),0!=absolute&&this.url&&(resolved=this.url.resolve(resolved)),resolved)}},book_Book.prototype.canonical=function(path){return path?this.settings.canonical?this.settings.canonical(path):this.resolve(path,!0):""},book_Book.prototype.determineType=function(input){var extension;return"base64"===this.settings.encoding?INPUT_TYPE_BASE64:"string"!=typeof input?INPUT_TYPE_BINARY:(extension=new utils_url.a(input).path().extension)?"epub"===extension?INPUT_TYPE_EPUB:"opf"===extension?INPUT_TYPE_OPF:"json"===extension?INPUT_TYPE_MANIFEST:void 0:INPUT_TYPE_DIRECTORY},book_Book.prototype.unpack=function(packaging){var this$1=this;this.package=packaging,""===this.packaging.metadata.layout?this.load(this.url.resolve("META-INF/com.apple.ibooks.display-options.xml")).then((function(xml){this$1.displayOptions=new displayoptions(xml),this$1.loading.displayOptions.resolve(this$1.displayOptions)})).catch((function(err){this$1.displayOptions=new displayoptions,this$1.loading.displayOptions.resolve(this$1.displayOptions)})):(this.displayOptions=new displayoptions,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new resources(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then((function(){this$1.loading.navigation.resolve(this$1.navigation)})),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&"none"!=this.settings.replacements?this.replacements().then((function(){this$1.loaded.displayOptions.then((function(){this$1.opening.resolve(this$1)}))})).catch((function(err){console.error(err)})):this.loaded.displayOptions.then((function(){this$1.opening.resolve(this$1)}))},book_Book.prototype.loadNavigation=function(packaging){var this$1=this,navPath=packaging.navPath||packaging.ncxPath,toc=packaging.toc;return toc?new Promise((function(resolve,reject){this$1.navigation=new navigation(toc),packaging.pageList&&(this$1.pageList=new pagelist(packaging.pageList)),resolve(this$1.navigation)})):navPath?this.load(navPath,"xml").then((function(xml){return this$1.navigation=new navigation(xml),this$1.pageList=new pagelist(xml),this$1.navigation})):new Promise((function(resolve,reject){this$1.navigation=new navigation,this$1.pageList=new pagelist,resolve(this$1.navigation)}))},book_Book.prototype.section=function(target){return this.spine.get(target)},book_Book.prototype.renderTo=function(element,options){return this.rendition=new rendition.a(this,options),this.rendition.attachTo(element),this.rendition},book_Book.prototype.setRequestCredentials=function(credentials){this.settings.requestCredentials=credentials},book_Book.prototype.setRequestHeaders=function(headers){this.settings.requestHeaders=headers},book_Book.prototype.unarchive=function(input,encoding){return this.archive=new archive,this.archive.open(input,encoding)},book_Book.prototype.store=function(name){var this$1=this,replacementsSetting=this.settings.replacements&&"none"!==this.settings.replacements,originalUrl=this.url,requester=this.settings.requestMethod||utils_request.default.bind(this);return this.storage=new src_store(name,requester,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then((function(){this$1.archived&&(this$1.storage.requester=this$1.archive.request.bind(this$1.archive));var substituteResources=function(output,section){section.output=this$1.resources.substitute(output,section.url)};this$1.resources.settings.replacements=replacementsSetting||"blobUrl",this$1.resources.replacements().then((function(){return this$1.resources.replaceCss()})),this$1.storage.on("offline",(function(){this$1.url=new utils_url.a("/",""),this$1.spine.hooks.serialize.register(substituteResources)})),this$1.storage.on("online",(function(){this$1.url=originalUrl,this$1.spine.hooks.serialize.deregister(substituteResources)}))})),this.storage},book_Book.prototype.coverUrl=function(){var this$1=this;return this.loaded.cover.then((function(url){return this$1.archived?this$1.resources.get(this$1.cover):this$1.cover}))},book_Book.prototype.replacements=function(){var this$1=this;return this.spine.hooks.serialize.register((function(output,section){section.output=this$1.resources.substitute(output,section.url)})),this.resources.replacements().then((function(){return this$1.resources.replaceCss()}))},book_Book.prototype.getRange=function(cfiRange){var cfi=new epubcfi.a(cfiRange),item=this.spine.get(cfi.spinePos),_request=this.load.bind(this);return item?item.load(_request).then((function(contents){return cfi.toRange(item.document)})):new Promise((function(resolve,reject){reject("CFI could not be found")}))},book_Book.prototype.key=function(identifier){var ident=identifier||this.packaging.metadata.identifier||this.url.filename;return"epubjs:"+constants.b+":"+ident},book_Book.prototype.destroy=function(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1},event_emitter_default()(book_Book.prototype);__webpack_exports__.a=book_Book},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return null!=value}},function(module,exports,__webpack_require__){function DOMParser(options){this.options=options||{locator:{}}}function DOMHandler(){this.cdata=!1}function position(locator,node){node.lineNumber=locator.lineNumber,node.columnNumber=locator.columnNumber}function _locator(l){if(l)return"\n@"+(l.systemId||"")+"#[line:"+l.lineNumber+",col:"+l.columnNumber+"]"}function _toString(chars,start,length){return"string"==typeof chars?chars.substr(start,length):chars.length>=start+length||start?new java.lang.String(chars,start,length)+"":chars}function appendElement(hander,node){hander.currentElement?hander.currentElement.appendChild(node):hander.doc.appendChild(node)}DOMParser.prototype.parseFromString=function(source,mimeType){var options=this.options,sax=new XMLReader,domBuilder=options.domBuilder||new DOMHandler,errorHandler=options.errorHandler,locator=options.locator,defaultNSMap=options.xmlns||{},entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return locator&&domBuilder.setDocumentLocator(locator),sax.errorHandler=function(errorImpl,domBuilder,locator){if(!errorImpl){if(domBuilder instanceof DOMHandler)return domBuilder;errorImpl=domBuilder}var errorHandler={},isCallback=errorImpl instanceof Function;function build(key){var fn=errorImpl[key];!fn&&isCallback&&(fn=2==errorImpl.length?function(msg){errorImpl(key,msg)}:errorImpl),errorHandler[key]=fn&&function(msg){fn("[xmldom "+key+"]\t"+msg+_locator(locator))}||function(){}}return locator=locator||{},build("warning"),build("error"),build("fatalError"),errorHandler}(errorHandler,domBuilder,locator),sax.domBuilder=options.domBuilder||domBuilder,/\/x?html?$/.test(mimeType)&&(entityMap.nbsp="",entityMap.copy="",defaultNSMap[""]="http://www.w3.org/1999/xhtml"),defaultNSMap.xml=defaultNSMap.xml||"http://www.w3.org/XML/1998/namespace",source?sax.parse(source,defaultNSMap,entityMap):sax.errorHandler.error("invalid doc source"),domBuilder.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(namespaceURI,localName,qName,attrs){var doc=this.doc,el=doc.createElementNS(namespaceURI,qName||localName),len=attrs.length;appendElement(this,el),this.currentElement=el,this.locator&&position(this.locator,el);for(var i=0;i<len;i++){namespaceURI=attrs.getURI(i);var value=attrs.getValue(i),attr=(qName=attrs.getQName(i),doc.createAttributeNS(namespaceURI,qName));this.locator&&position(attrs.getLocator(i),attr),attr.value=attr.nodeValue=value,el.setAttributeNode(attr)}},endElement:function(namespaceURI,localName,qName){var current=this.currentElement;current.tagName;this.currentElement=current.parentNode},startPrefixMapping:function(prefix,uri){},endPrefixMapping:function(prefix){},processingInstruction:function(target,data){var ins=this.doc.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins),appendElement(this,ins)},ignorableWhitespace:function(ch,start,length){},characters:function(chars,start,length){if(chars=_toString.apply(this,arguments)){if(this.cdata)var charNode=this.doc.createCDATASection(chars);else charNode=this.doc.createTextNode(chars);this.currentElement?this.currentElement.appendChild(charNode):/^\s*$/.test(chars)&&this.doc.appendChild(charNode),this.locator&&position(this.locator,charNode)}},skippedEntity:function(name){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(locator){(this.locator=locator)&&(locator.lineNumber=0)},comment:function(chars,start,length){chars=_toString.apply(this,arguments);var comm=this.doc.createComment(chars);this.locator&&position(this.locator,comm),appendElement(this,comm)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(name,publicId,systemId){var impl=this.doc.implementation;if(impl&&impl.createDocumentType){var dt=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt),appendElement(this,dt)}},warning:function(error){console.warn("[xmldom warning]\t"+error,_locator(this.locator))},error:function(error){console.error("[xmldom error]\t"+error,_locator(this.locator))},fatalError:function(error){throw console.error("[xmldom fatalError]\t"+error,_locator(this.locator)),error}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(key){DOMHandler.prototype[key]=function(){return null}}));var XMLReader=__webpack_require__(114).XMLReader,DOMImplementation=exports.DOMImplementation=__webpack_require__(64).DOMImplementation;exports.XMLSerializer=__webpack_require__(64).XMLSerializer,exports.DOMParser=DOMParser},function(module,exports){function copy(src,dest){for(var p in src)dest[p]=src[p]}function _extends(Class,Super){var pt=Class.prototype;if(Object.create){var ppt=Object.create(Super.prototype);pt.__proto__=ppt}if(!(pt instanceof Super)){function t(){}t.prototype=Super.prototype,copy(pt,t=new t),Class.prototype=pt=t}pt.constructor!=Class&&("function"!=typeof Class&&console.error("unknow Class:"+Class),pt.constructor=Class)}var NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},HIERARCHY_REQUEST_ERR=(ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3)),NOT_FOUND_ERR=(ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8)),INUSE_ATTRIBUTE_ERR=(ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10));ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(code,message){if(message instanceof Error)var error=message;else error=this,Error.call(this,ExceptionMessage[code]),this.message=ExceptionMessage[code],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return error.code=code,message&&(this.message=this.message+": "+message),error}function NodeList(){}function LiveNodeList(node,refresh){this._node=node,this._refresh=refresh,_updateLiveList(this)}function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!=inc){var ls=list._refresh(list._node);__set__(list,"length",ls.length),copy(ls,list),list._inc=inc}}function NamedNodeMap(){}function _findNodeIndex(list,node){for(var i=list.length;i--;)if(list[i]===node)return i}function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr?list[_findNodeIndex(list,oldAttr)]=newAttr:list[list.length++]=newAttr,el){newAttr.ownerElement=el;var doc=el.ownerDocument;doc&&(oldAttr&&_onRemoveAttribute(doc,el,oldAttr),function(doc,el,newAttr){doc&&doc._inc++,"http://www.w3.org/2000/xmlns/"==newAttr.namespaceURI&&(el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value)}(doc,el,newAttr))}}function _removeNamedNode(el,list,attr){var i=_findNodeIndex(list,attr);if(!(i>=0))throw DOMException(NOT_FOUND_ERR,new Error(el.tagName+"@"+attr));for(var lastIndex=list.length-1;i<lastIndex;)list[i]=list[++i];if(list.length=lastIndex,el){var doc=el.ownerDocument;doc&&(_onRemoveAttribute(doc,el,attr),attr.ownerElement=null)}}function DOMImplementation(features){if(this._features={},features)for(var feature in features)this._features=features[feature]}function Node(){}function _xmlEncoder(c){return("<"==c?"&lt;":">"==c&&"&gt;")||"&"==c&&"&amp;"||'"'==c&&"&quot;"||"&#"+c.charCodeAt()+";"}function _visitNode(node,callback){if(callback(node))return!0;if(node=node.firstChild)do{if(_visitNode(node,callback))return!0}while(node=node.nextSibling)}function Document(){}function _onRemoveAttribute(doc,el,newAttr,remove){doc&&doc._inc++,"http://www.w3.org/2000/xmlns/"==newAttr.namespaceURI&&delete el._nsMap[newAttr.prefix?newAttr.localName:""]}function _onUpdateChild(doc,el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild)cs[cs.length++]=newChild;else{for(var child=el.firstChild,i=0;child;)cs[i++]=child,child=child.nextSibling;cs.length=i}}}function _removeChild(parentNode,child){var previous=child.previousSibling,next=child.nextSibling;return previous?previous.nextSibling=next:parentNode.firstChild=next,next?next.previousSibling=previous:parentNode.lastChild=previous,_onUpdateChild(parentNode.ownerDocument,parentNode),child}function _insertBefore(parentNode,newChild,nextChild){var cp=newChild.parentNode;if(cp&&cp.removeChild(newChild),newChild.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=newChild.firstChild;if(null==newFirst)return newChild;var newLast=newChild.lastChild}else newFirst=newLast=newChild;var pre=nextChild?nextChild.previousSibling:parentNode.lastChild;newFirst.previousSibling=pre,newLast.nextSibling=nextChild,pre?pre.nextSibling=newFirst:parentNode.firstChild=newFirst,null==nextChild?parentNode.lastChild=newLast:nextChild.previousSibling=newLast;do{newFirst.parentNode=parentNode}while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));return _onUpdateChild(parentNode.ownerDocument||parentNode,parentNode),newChild.nodeType==DOCUMENT_FRAGMENT_NODE&&(newChild.firstChild=newChild.lastChild=null),newChild}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(isHtml,nodeFilter){var buf=[],refNode=9==this.nodeType?this.documentElement:this,prefix=refNode.prefix,uri=refNode.namespaceURI;if(uri&&null==prefix&&null==(prefix=refNode.lookupPrefix(uri)))var visibleNamespaces=[{namespace:uri,prefix:null}];return serializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces),buf.join("")}function needNamespaceDefine(node,isHTML,visibleNamespaces){var prefix=node.prefix||"",uri=node.namespaceURI;if(!prefix&&!uri)return!1;if("xml"===prefix&&"http://www.w3.org/XML/1998/namespace"===uri||"http://www.w3.org/2000/xmlns/"==uri)return!1;for(var i=visibleNamespaces.length;i--;){var ns=visibleNamespaces[i];if(ns.prefix==prefix)return ns.namespace!=uri}return!0}function serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){if(nodeFilter){if(!(node=nodeFilter(node)))return;if("string"==typeof node)return void buf.push(node)}switch(node.nodeType){case ELEMENT_NODE:visibleNamespaces||(visibleNamespaces=[]);visibleNamespaces.length;var attrs=node.attributes,len=attrs.length,child=node.firstChild,nodeName=node.tagName;isHTML="http://www.w3.org/1999/xhtml"===node.namespaceURI||isHTML,buf.push("<",nodeName);for(var i=0;i<len;i++){"xmlns"==(attr=attrs.item(i)).prefix?visibleNamespaces.push({prefix:attr.localName,namespace:attr.value}):"xmlns"==attr.nodeName&&visibleNamespaces.push({prefix:"",namespace:attr.value})}for(i=0;i<len;i++){var attr;if(needNamespaceDefine(attr=attrs.item(i),0,visibleNamespaces)){var prefix=attr.prefix||"",uri=attr.namespaceURI,ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,'="',uri,'"'),visibleNamespaces.push({prefix:prefix,namespace:uri})}serializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces)}if(needNamespaceDefine(node,0,visibleNamespaces)){prefix=node.prefix||"",uri=node.namespaceURI,ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,'="',uri,'"'),visibleNamespaces.push({prefix:prefix,namespace:uri})}if(child||isHTML&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){if(buf.push(">"),isHTML&&/^script$/i.test(nodeName))for(;child;)child.data?buf.push(child.data):serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces),child=child.nextSibling;else for(;child;)serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces),child=child.nextSibling;buf.push("</",nodeName,">")}else buf.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(child=node.firstChild;child;)serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces),child=child.nextSibling;return;case ATTRIBUTE_NODE:return buf.push(" ",node.name,'="',node.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return buf.push(node.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]>");case COMMENT_NODE:return buf.push("\x3c!--",node.data,"--\x3e");case DOCUMENT_TYPE_NODE:var pubid=node.publicId,sysid=node.systemId;if(buf.push("<!DOCTYPE ",node.name),pubid)buf.push(' PUBLIC "',pubid),sysid&&"."!=sysid&&buf.push('" "',sysid),buf.push('">');else if(sysid&&"."!=sysid)buf.push(' SYSTEM "',sysid,'">');else{var sub=node.internalSubset;sub&&buf.push(" [",sub,"]"),buf.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",node.nodeName,";");default:buf.push("??",node.nodeName)}}function __set__(object,key,value){object[key]=value}DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(index){return this[index]||null},toString:function(isHTML,nodeFilter){for(var buf=[],i=0;i<this.length;i++)serializeToString(this[i],buf,isHTML,nodeFilter);return buf.join("")}},LiveNodeList.prototype.item=function(i){return _updateLiveList(this),this[i]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(key){for(var i=this.length;i--;){var attr=this[i];if(attr.nodeName==key)return attr}},setNamedItem:function(attr){var el=attr.ownerElement;if(el&&el!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var oldAttr=this.getNamedItem(attr.nodeName);return _addNamedNode(this._ownerElement,this,attr,oldAttr),oldAttr},setNamedItemNS:function(attr){var oldAttr,el=attr.ownerElement;if(el&&el!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName),_addNamedNode(this._ownerElement,this,attr,oldAttr),oldAttr},removeNamedItem:function(key){var attr=this.getNamedItem(key);return _removeNamedNode(this._ownerElement,this,attr),attr},removeNamedItemNS:function(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);return _removeNamedNode(this._ownerElement,this,attr),attr},getNamedItemNS:function(namespaceURI,localName){for(var i=this.length;i--;){var node=this[i];if(node.localName==localName&&node.namespaceURI==namespaceURI)return node}return null}},DOMImplementation.prototype={hasFeature:function(feature,version){var versions=this._features[feature.toLowerCase()];return!(!versions||version&&!(version in versions))},createDocument:function(namespaceURI,qualifiedName,doctype){var doc=new Document;if(doc.implementation=this,doc.childNodes=new NodeList,doc.doctype=doctype,doctype&&doc.appendChild(doctype),qualifiedName){var root=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root)}return doc},createDocumentType:function(qualifiedName,publicId,systemId){var node=new DocumentType;return node.name=qualifiedName,node.nodeName=qualifiedName,node.publicId=publicId,node.systemId=systemId,node}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(newChild,refChild){return _insertBefore(this,newChild,refChild)},replaceChild:function(newChild,oldChild){this.insertBefore(newChild,oldChild),oldChild&&this.removeChild(oldChild)},removeChild:function(oldChild){return _removeChild(this,oldChild)},appendChild:function(newChild){return this.insertBefore(newChild,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(deep){return function cloneNode(doc,node,deep){var node2=new node.constructor;for(var n in node){var v=node[n];"object"!=typeof v&&v!=node2[n]&&(node2[n]=v)}node.childNodes&&(node2.childNodes=new NodeList);switch(node2.ownerDocument=doc,node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes,attrs2=node2.attributes=new NamedNodeMap,len=attrs.length;attrs2._ownerElement=node2;for(var i=0;i<len;i++)node2.setAttributeNode(cloneNode(doc,attrs.item(i),!0));break;case ATTRIBUTE_NODE:deep=!0}if(deep)for(var child=node.firstChild;child;)node2.appendChild(cloneNode(doc,child,deep)),child=child.nextSibling;return node2}(this.ownerDocument||this,this,deep)},normalize:function(){for(var child=this.firstChild;child;){var next=child.nextSibling;next&&next.nodeType==TEXT_NODE&&child.nodeType==TEXT_NODE?(this.removeChild(next),child.appendData(next.data)):(child.normalize(),child=next)}},isSupported:function(feature,version){return this.ownerDocument.implementation.hasFeature(feature,version)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(namespaceURI){for(var el=this;el;){var map=el._nsMap;if(map)for(var n in map)if(map[n]==namespaceURI)return n;el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},lookupNamespaceURI:function(prefix){for(var el=this;el;){var map=el._nsMap;if(map&&prefix in map)return map[prefix];el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},isDefaultNamespace:function(namespaceURI){return null==this.lookupPrefix(namespaceURI)}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){for(var child=newChild.firstChild;child;){var next=child.nextSibling;this.insertBefore(child,refChild),child=next}return newChild}return null==this.documentElement&&newChild.nodeType==ELEMENT_NODE&&(this.documentElement=newChild),_insertBefore(this,newChild,refChild),newChild.ownerDocument=this,newChild},removeChild:function(oldChild){return this.documentElement==oldChild&&(this.documentElement=null),_removeChild(this,oldChild)},importNode:function(importedNode,deep){return function importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:(node2=node.cloneNode(!1)).ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=!0}node2||(node2=node.cloneNode(!1));if(node2.ownerDocument=doc,node2.parentNode=null,deep)for(var child=node.firstChild;child;)node2.appendChild(importNode(doc,child,deep)),child=child.nextSibling;return node2}(this,importedNode,deep)},getElementById:function(id){var rtv=null;return _visitNode(this.documentElement,(function(node){if(node.nodeType==ELEMENT_NODE&&node.getAttribute("id")==id)return rtv=node,!0})),rtv},createElement:function(tagName){var node=new Element;return node.ownerDocument=this,node.nodeName=tagName,node.tagName=tagName,node.childNodes=new NodeList,(node.attributes=new NamedNodeMap)._ownerElement=node,node},createDocumentFragment:function(){var node=new DocumentFragment;return node.ownerDocument=this,node.childNodes=new NodeList,node},createTextNode:function(data){var node=new Text;return node.ownerDocument=this,node.appendData(data),node},createComment:function(data){var node=new Comment;return node.ownerDocument=this,node.appendData(data),node},createCDATASection:function(data){var node=new CDATASection;return node.ownerDocument=this,node.appendData(data),node},createProcessingInstruction:function(target,data){var node=new ProcessingInstruction;return node.ownerDocument=this,node.tagName=node.target=target,node.nodeValue=node.data=data,node},createAttribute:function(name){var node=new Attr;return node.ownerDocument=this,node.name=name,node.nodeName=name,node.localName=name,node.specified=!0,node},createEntityReference:function(name){var node=new EntityReference;return node.ownerDocument=this,node.nodeName=name,node},createElementNS:function(namespaceURI,qualifiedName){var node=new Element,pl=qualifiedName.split(":"),attrs=node.attributes=new NamedNodeMap;return node.childNodes=new NodeList,node.ownerDocument=this,node.nodeName=qualifiedName,node.tagName=qualifiedName,node.namespaceURI=namespaceURI,2==pl.length?(node.prefix=pl[0],node.localName=pl[1]):node.localName=qualifiedName,attrs._ownerElement=node,node},createAttributeNS:function(namespaceURI,qualifiedName){var node=new Attr,pl=qualifiedName.split(":");return node.ownerDocument=this,node.nodeName=qualifiedName,node.name=qualifiedName,node.namespaceURI=namespaceURI,node.specified=!0,2==pl.length?(node.prefix=pl[0],node.localName=pl[1]):node.localName=qualifiedName,node}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(name){return null!=this.getAttributeNode(name)},getAttribute:function(name){var attr=this.getAttributeNode(name);return attr&&attr.value||""},getAttributeNode:function(name){return this.attributes.getNamedItem(name)},setAttribute:function(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value,this.setAttributeNode(attr)},removeAttribute:function(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr)},appendChild:function(newChild){return newChild.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(newChild,null):function(parentNode,newChild){var cp=newChild.parentNode;if(cp){var pre=parentNode.lastChild;cp.removeChild(newChild);pre=parentNode.lastChild}return pre=parentNode.lastChild,newChild.parentNode=parentNode,newChild.previousSibling=pre,newChild.nextSibling=null,pre?pre.nextSibling=newChild:parentNode.firstChild=newChild,parentNode.lastChild=newChild,_onUpdateChild(parentNode.ownerDocument,parentNode,newChild),newChild}(this,newChild)},setAttributeNode:function(newAttr){return this.attributes.setNamedItem(newAttr)},setAttributeNodeNS:function(newAttr){return this.attributes.setNamedItemNS(newAttr)},removeAttributeNode:function(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName)},removeAttributeNS:function(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old)},hasAttributeNS:function(namespaceURI,localName){return null!=this.getAttributeNodeNS(namespaceURI,localName)},getAttributeNS:function(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||""},setAttributeNS:function(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,qualifiedName);attr.value=attr.nodeValue=""+value,this.setAttributeNode(attr)},getAttributeNodeNS:function(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName)},getElementsByTagName:function(tagName){return new LiveNodeList(this,(function(base){var ls=[];return _visitNode(base,(function(node){node===base||node.nodeType!=ELEMENT_NODE||"*"!==tagName&&node.tagName!=tagName||ls.push(node)})),ls}))},getElementsByTagNameNS:function(namespaceURI,localName){return new LiveNodeList(this,(function(base){var ls=[];return _visitNode(base,(function(node){node===base||node.nodeType!==ELEMENT_NODE||"*"!==namespaceURI&&node.namespaceURI!==namespaceURI||"*"!==localName&&node.localName!=localName||ls.push(node)})),ls}))}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(offset,count){return this.data.substring(offset,offset+count)},appendData:function(text){text=this.data+text,this.nodeValue=this.data=text,this.length=text.length},insertData:function(offset,text){this.replaceData(offset,0,text)},appendChild:function(newChild){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(offset,count){this.replaceData(offset,count,"")},replaceData:function(offset,count,text){text=this.data.substring(0,offset)+text+this.data.substring(offset+count),this.nodeValue=this.data=text,this.length=text.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(offset){var text=this.data,newText=text.substring(offset);text=text.substring(0,offset),this.data=this.nodeValue=text,this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);return this.parentNode&&this.parentNode.insertBefore(newNode,this.nextSibling),newNode}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(node,isHtml,nodeFilter){return nodeSerializeToString.call(node,isHtml,nodeFilter)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return function getTextContent(node){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var buf=[];for(node=node.firstChild;node;)7!==node.nodeType&&8!==node.nodeType&&buf.push(getTextContent(node)),node=node.nextSibling;return buf.join("");default:return node.nodeValue}}(this)},set:function(data){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(data||String(data))&&this.appendChild(this.ownerDocument.createTextNode(data));break;default:this.data=data,this.value=data,this.nodeValue=data}}}),__set__=function(object,key,value){object["$$"+key]=value}}}catch(e){}exports.DOMImplementation=DOMImplementation,exports.XMLSerializer=XMLSerializer},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(11))},function(module,exports,__webpack_require__){var isObject=__webpack_require__(20),isSymbol=__webpack_require__(28),reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function(value){if("number"==typeof value)return value;if(isSymbol(value))return NaN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}},function(module,exports){module.exports=function(value,other){return value===other||value!=value&&other!=other}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(21),isObject=__webpack_require__(20);module.exports=function(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}},function(module,exports){var funcToString=Function.prototype.toString;module.exports=function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(159),arraySome=__webpack_require__(162),cacheHas=__webpack_require__(163);module.exports=function(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(10),stubFalse=__webpack_require__(180),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer}).call(this,__webpack_require__(72)(module))},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(182),baseUnary=__webpack_require__(183),nodeUtil=__webpack_require__(184),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports){module.exports=function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}},function(module,exports,__webpack_require__){var debounce=__webpack_require__(56),isObject=__webpack_require__(20);module.exports=function(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(130);module.exports=function(value,other){return baseIsEqual(value,other)}},function(module,exports,__webpack_require__){var baseClamp=__webpack_require__(205),toNumber=__webpack_require__(66);module.exports=function(number,lower,upper){return void 0===upper&&(upper=lower,lower=void 0),void 0!==upper&&(upper=(upper=toNumber(upper))==upper?upper:0),void 0!==lower&&(lower=(lower=toNumber(lower))==lower?lower:0),baseClamp(toNumber(number),lower,upper)}},function(module,exports,__webpack_require__){var factory;factory=function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=6)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return toArray})),__webpack_require__.d(__webpack_exports__,"b",(function(){return arrayFind}));var toArray=function(a){for(var ret=Array(a.length),i=0;i<a.length;++i)ret[i]=a[i];return ret},arrayFind=function(array,search){return array.filter((function(a){return a===search}))[0]}},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_require__.d(__webpack_exports__,"FOCUS_GROUP",(function(){return FOCUS_GROUP})),__webpack_require__.d(__webpack_exports__,"FOCUS_DISABLED",(function(){return FOCUS_DISABLED})),__webpack_require__.d(__webpack_exports__,"FOCUS_ALLOW",(function(){return FOCUS_ALLOW})),__webpack_require__.d(__webpack_exports__,"FOCUS_AUTO",(function(){return FOCUS_AUTO}));var FOCUS_GROUP="data-focus-lock",FOCUS_DISABLED="data-focus-lock-disabled",FOCUS_ALLOW="data-no-focus-lock",FOCUS_AUTO="data-autofocus-inside"},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__constants__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__array__=__webpack_require__(0);__webpack_exports__.a=function(node){var group=node.getAttribute(__WEBPACK_IMPORTED_MODULE_0__constants__.FOCUS_GROUP);return group?function filterNested(nodes){var l=nodes.length,i=void 0,j=void 0;for(i=0;i<l;i+=1)for(j=0;j<l;j+=1)if(i!==j&&nodes[i].contains(nodes[j]))return filterNested(nodes.filter((function(x){return x!==nodes[j]})));return nodes}(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__array__.a)(function getTopParent(node){return node.parentNode?getTopParent(node.parentNode):node}(node).querySelectorAll("["+__WEBPACK_IMPORTED_MODULE_0__constants__.FOCUS_GROUP+'="'+group+'"]:not(['+__WEBPACK_IMPORTED_MODULE_0__constants__.FOCUS_DISABLED+'="disabled"])'))):[node]}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__utils_DOMutils__=__webpack_require__(12),__WEBPACK_IMPORTED_MODULE_1__utils_firstFocus__=__webpack_require__(13),__WEBPACK_IMPORTED_MODULE_2__utils_all_affected__=__webpack_require__(2),notAGuard=function(node){return!(node.dataset&&node.dataset.focusGuard)};__webpack_exports__.a=function(topNode,lastNode){var activeElement=document&&document.activeElement,entries=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_all_affected__.a)(topNode).filter(notAGuard),commonParent=function(activeElement,entry,entries){var topCommon=entry;return entries.forEach((function(subEntry){var common=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_DOMutils__.a)(activeElement,subEntry);common&&(topCommon=common.contains(topCommon)?common:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_DOMutils__.a)(common,topCommon))})),topCommon}(activeElement||topNode,topNode,entries),innerElements=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_DOMutils__.c)(entries).filter((function(_ref){var node=_ref.node;return notAGuard(node)}));if(innerElements[0]||(innerElements=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_DOMutils__.d)(entries).filter((function(_ref2){var node=_ref2.node;return notAGuard(node)})))[0]){var autoFocusables,innerNodes=innerElements.map((function(_ref3){return _ref3.node})),newId=function(innerNodes,outerNodes,activeElement,lastNode,autoFocused){var cnt=innerNodes.length,firstFocus=innerNodes[0],lastFocus=innerNodes[cnt-1];if(!(innerNodes.indexOf(activeElement)>=0)){var activeIndex=outerNodes.indexOf(activeElement),lastIndex=outerNodes.indexOf(lastNode||activeIndex),lastNodeInside=innerNodes.indexOf(lastNode),indexDiff=activeIndex-lastIndex,firstNodeIndex=outerNodes.indexOf(firstFocus),lastNodeIndex=outerNodes.indexOf(lastFocus);return-1===activeIndex||-1===lastNodeInside?innerNodes.indexOf(autoFocused.length?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_firstFocus__.a)(autoFocused):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_firstFocus__.a)(innerNodes)):!indexDiff&&lastNodeInside>=0||indexDiff&&Math.abs(indexDiff)>1?lastNodeInside:activeIndex<=firstNodeIndex?cnt-1:activeIndex>lastNodeIndex?0:indexDiff?Math.abs(indexDiff)>1?lastNodeInside:(cnt+lastNodeInside+indexDiff)%cnt:void 0}}(innerNodes,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_DOMutils__.c)([commonParent]).map((function(_ref4){return _ref4.node})),activeElement,lastNode,innerNodes.filter((autoFocusables=function(entries){return entries.reduce((function(acc,node){return acc.concat(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_DOMutils__.b)(node))}),[])}(entries),function(node){return!!node.autofocus||node.dataset&&!!node.dataset.autofocus||autoFocusables.indexOf(node)>=0})));return void 0===newId?newId:innerElements[newId]}}},function(module,exports,__webpack_require__){var Component=__webpack_require__(17)(__webpack_require__(5),__webpack_require__(18),null,null);Component.options.__file="/Users/akorzunov/dev/Z/mellis/github/focus/vue-focus-lock/src/Lock.vue",Component.esModule&&Object.keys(Component.esModule).some((function(key){return"default"!==key&&"__esModule"!==key}))&&console.error("named exports are not supported in *.vue files."),Component.options.functional&&console.error("[vue-loader] Lock.vue: functional components are not supported with templates, they should use render functions."),module.exports=Component.exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_focusLock=__webpack_require__(9),_focusLock2=(obj=_focusLock)&&obj.__esModule?obj:{default:obj};function deferAction(action){var setImmediate=window.setImmediate;void 0!==setImmediate?setImmediate(action):setTimeout(action,1)}var lastActiveTrap=0,lastActiveFocus=null,focusWasOutsideWindow=!1,isFreeFocus=function(){return document&&document.activeElement===document.body||(0,_focusLock.focusIsHidden)()},activateTrap=function(){var result=!1;if(lastActiveTrap){var _lastActiveTrap=lastActiveTrap,observed=_lastActiveTrap.observed,onActivation=_lastActiveTrap.onActivation;!focusWasOutsideWindow&&isFreeFocus()&&lastActiveFocus||(observed&&!(0,_focusLock.focusInside)(observed)&&(onActivation(),result=(0,_focusLock2.default)(observed,lastActiveFocus)),focusWasOutsideWindow=!1,lastActiveFocus=document&&document.activeElement)}return result},instances=[],emitChange=function(){var trap;trap=instances.filter((function(_ref){return!_ref.disabled})).slice(-1)[0],lastActiveTrap!==trap&&(lastActiveTrap=null),lastActiveTrap=trap,trap&&(activateTrap(),deferAction(activateTrap))},onTrap=function(event){activateTrap()&&event&&(event.stopPropagation(),event.preventDefault())},onBlur=function(){deferAction(activateTrap)},onWindowBlur=function(){focusWasOutsideWindow=!0};exports.default={name:"Lock",props:{returnFocus:{type:Boolean},disabled:{type:Boolean},noFocusGuards:{type:[Boolean,String],default:!1},group:{type:String}},data:function(){return{data:{},hidden:""}},computed:{groupAttr:function(){return function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},_focusLock.constants.FOCUS_GROUP,this.group)},hasLeadingGuards:function(){return!0!==this.noFocusGuards},hasTailingGuards:function(){return this.hasLeadingGuards&&"tail"!==this.noFocusGuards}},watch:{disabled:function(){this.data.disabled=this.disabled,emitChange()}},methods:{onBlur:function(){deferAction(emitChange)}},mounted:function(){var _this=this;this.data.vue=this,this.data.observed=this.$el.querySelector("[data-lock]"),this.data.disabled=this.disabled,this.data.onActivation=function(){_this.originalFocusedElement=_this.originalFocusedElement||document&&document.activeElement},instances.length||(document.addEventListener("focusin",onTrap,!0),document.addEventListener("focusout",onBlur),window.addEventListener("blur",onWindowBlur)),instances.push(this.data),emitChange()},destroyed:function(){var _this2=this;(instances=instances.filter((function(_ref3){return _ref3.vue!==_this2}))).length||(document.removeEventListener("focusin",onTrap,!0),document.removeEventListener("focusout",onBlur),window.removeEventListener("blur",onWindowBlur)),this.returnFocus&&this.originalFocusedElement&&this.originalFocusedElement.focus&&this.originalFocusedElement.focus(),emitChange()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_Lock=__webpack_require__(4),_Lock2=(obj=_Lock)&&obj.__esModule?obj:{default:obj};exports.default=_Lock2.default},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__utils_all_affected__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_1__utils_array__=__webpack_require__(0),focusInFrame=function(frame){return frame===document.activeElement};__webpack_exports__.a=function(topNode){var activeElement=document&&document.activeElement;return!(!activeElement||activeElement.dataset&&activeElement.dataset.focusGuard)&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_all_affected__.a)(topNode).reduce((function(result,node){return result||node.contains(activeElement)||function(topNode){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_all_affected__.a)(topNode).reduce((function(result,node){return result||!!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_array__.b)(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_array__.a)(node.querySelectorAll("iframe")),focusInFrame)}),!1)}(topNode)}),!1)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__utils_array__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__constants__=__webpack_require__(1);__webpack_exports__.a=function(){return document&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_array__.a)(document.querySelectorAll("["+__WEBPACK_IMPORTED_MODULE_1__constants__.FOCUS_ALLOW+"]")).some((function(node){return node.contains(document.activeElement)}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__tabHook__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_1__focusMerge__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_2__focusInside__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_3__focusIsHidden__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_4__setFocus__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_5__constants__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_6__utils_all_affected__=__webpack_require__(2);__webpack_require__.d(__webpack_exports__,"tabHook",(function(){return __WEBPACK_IMPORTED_MODULE_0__tabHook__.a})),__webpack_require__.d(__webpack_exports__,"focusInside",(function(){return __WEBPACK_IMPORTED_MODULE_2__focusInside__.a})),__webpack_require__.d(__webpack_exports__,"focusIsHidden",(function(){return __WEBPACK_IMPORTED_MODULE_3__focusIsHidden__.a})),__webpack_require__.d(__webpack_exports__,"focusMerge",(function(){return __WEBPACK_IMPORTED_MODULE_1__focusMerge__.a})),__webpack_require__.d(__webpack_exports__,"constants",(function(){return __WEBPACK_IMPORTED_MODULE_5__constants__})),__webpack_require__.d(__webpack_exports__,"getAllAffectedNodes",(function(){return __WEBPACK_IMPORTED_MODULE_6__utils_all_affected__.a})),__webpack_exports__.default=__WEBPACK_IMPORTED_MODULE_4__setFocus__.a},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__focusMerge__=__webpack_require__(3),guardCount=0;__webpack_exports__.a=function(topNode,lastNode){var target,focusable=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__focusMerge__.a)(topNode,lastNode);if(focusable){if(guardCount>2)return;guardCount++,(target=focusable.node).focus(),target.contentWindow&&target.contentWindow.focus(),guardCount--}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={attach:function(node,enabled){},detach:function(){}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getCommonParent})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTabbableNodes})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getAllTabbableNodes})),__webpack_require__.d(__webpack_exports__,"b",(function(){return parentAutofocusables}));var __WEBPACK_IMPORTED_MODULE_0__tabOrder__=__webpack_require__(14),__WEBPACK_IMPORTED_MODULE_1__tabUtils__=__webpack_require__(15),__WEBPACK_IMPORTED_MODULE_2__array__=__webpack_require__(0),getParents=function getParents(node){var parents=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return parents.push(node),node.parentNode&&getParents(node.parentNode,parents),parents},getCommonParent=function(nodea,nodeb){for(var parentsA=getParents(nodea),parentsB=getParents(nodeb),i=0;i<parentsA.length;i+=1){var currentParent=parentsA[i];if(parentsB.indexOf(currentParent)>=0)return currentParent}return!1},filterFocusable=function(nodes){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__array__.a)(nodes).filter((function(node){return function isVisible(node){return!node||node===document||!((computedStyle=window.getComputedStyle(node,null))&&computedStyle.getPropertyValue&&("none"===computedStyle.getPropertyValue("display")||"hidden"===computedStyle.getPropertyValue("visibility")))&&isVisible(node.parentNode);var computedStyle}(node)})).filter((function(node){return function(node){return!(("INPUT"===node.tagName||"BUTTON"===node.tagName)&&("hidden"===node.type||node.disabled))}(node)}))},getTabbableNodes=function(topNodes){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__tabOrder__.a)(filterFocusable(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__tabUtils__.a)(topNodes)),!0)},getAllTabbableNodes=function(topNodes){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__tabOrder__.a)(filterFocusable(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__tabUtils__.a)(topNodes)),!1)},parentAutofocusables=function(topNode){return filterFocusable(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__tabUtils__.b)(topNode))}},function(module,__webpack_exports__,__webpack_require__){"use strict";var isRadio=function(node){return"INPUT"===node.tagName&&"radio"===node.type};__webpack_exports__.a=function(nodes){return nodes[0]&&nodes.length>1&&isRadio(nodes[0])&&nodes[0].name?function(node,nodes){return nodes.filter(isRadio).filter((function(el){return el.name===node.name})).filter((function(el){return el.checked}))[0]||node}(nodes[0],nodes):nodes[0]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return orderByTabIndex}));var __WEBPACK_IMPORTED_MODULE_0__array__=__webpack_require__(0),tabSort=function(a,b){var tabDiff=a.tabIndex-b.tabIndex,indexDiff=a.index-b.index;if(tabDiff){if(!a.tabIndex)return 1;if(!b.tabIndex)return-1}return tabDiff||indexDiff},orderByTabIndex=function(nodes,filterNegative){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__array__.a)(nodes).map((function(node,index){return{node:node,index:index,tabIndex:node.tabIndex}})).filter((function(data){return!filterNegative||data.tabIndex>=0})).sort(tabSort)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getFocusables})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getParentAutofocusables}));var __WEBPACK_IMPORTED_MODULE_0__tabbables__=__webpack_require__(16),__WEBPACK_IMPORTED_MODULE_1__array__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_2__constants__=__webpack_require__(1),getFocusables=function(parents){return parents.reduce((function(acc,parent){return acc.concat(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__array__.a)(parent.querySelectorAll(__WEBPACK_IMPORTED_MODULE_0__tabbables__.a.join(","))))}),[])},getParentAutofocusables=function(parent){var parentFocus=parent.querySelectorAll("["+__WEBPACK_IMPORTED_MODULE_2__constants__.FOCUS_AUTO+"]");return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__array__.a)(parentFocus).map((function(node){return getFocusables([node])})).reduce((function(acc,nodes){return acc.concat(nodes)}),[])}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=["button:enabled:not([readonly])","select:enabled:not([readonly])","textarea:enabled:not([readonly])","input:enabled:not([readonly])","a[href]","area[href]","iframe","object","embed","[tabindex]","[contenteditable]","[autofocus]"]},function(module,exports){module.exports=function(rawScriptExports,compiledTemplate,scopeId,cssModules){var esModule,scriptExports=rawScriptExports=rawScriptExports||{},type=typeof rawScriptExports.default;"object"!==type&&"function"!==type||(esModule=rawScriptExports,scriptExports=rawScriptExports.default);var options="function"==typeof scriptExports?scriptExports.options:scriptExports;if(compiledTemplate&&(options.render=compiledTemplate.render,options.staticRenderFns=compiledTemplate.staticRenderFns),scopeId&&(options._scopeId=scopeId),cssModules){var computed=Object.create(options.computed||null);Object.keys(cssModules).forEach((function(key){var module=cssModules[key];computed[key]=function(){return module}})),options.computed=computed}return{esModule:esModule,exports:scriptExports,options:options}}},function(module,exports,__webpack_require__){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.hasLeadingGuards?_c("div",{style:_vm.hidden,attrs:{tabIndex:_vm.disabled?-1:0}}):_vm._e(),_vm._v(" "),_vm.hasLeadingGuards?_c("div",{style:_vm.hidden,attrs:{tabIndex:_vm.disabled?-1:1}}):_vm._e(),_vm._v(" "),_c("div",_vm._b({attrs:{"data-lock":""},on:{focusout:_vm.onBlur}},"div",_vm.groupAttr,!1),[_vm._t("default")],2),_vm._v(" "),_vm.hasTailingGuards?_c("div",{style:_vm.hidden,attrs:{tabIndex:_vm.disabled?-1:0}}):_vm._e()])},staticRenderFns:[]},module.exports.render._withStripped=!0}])},module.exports=factory()},function(module,exports){module.exports=kolibriCoreAppGlobal.lib.vuex},function(module,exports){module.exports=kolibriCoreAppGlobal.coreVue.components.CoreFullscreen},function(module,exports){module.exports=kolibriCoreAppGlobal.coreVue.mixins.responsiveElementMixin},function(module,exports){module.exports=kolibriCoreAppGlobal.coreVue.mixins.responsiveWindowMixin},function(module,exports){module.exports=kolibriCoreAppGlobal.coreVue.components.UiAlert},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,definition){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var noop=function(){},isIE="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),logMethods=["trace","debug","info","warn","error"];function bindMethod(obj,methodName){var method=obj[methodName];if("function"==typeof method.bind)return method.bind(obj);try{return Function.prototype.bind.call(method,obj)}catch(e){return function(){return Function.prototype.apply.apply(method,[obj,arguments])}}}function traceForIE(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function realMethod(methodName){return"debug"===methodName&&(methodName="log"),"undefined"!=typeof console&&("trace"===methodName&&isIE?traceForIE:void 0!==console[methodName]?bindMethod(console,methodName):void 0!==console.log?bindMethod(console,"log"):noop)}function replaceLoggingMethods(level,loggerName){for(var i=0;i<logMethods.length;i++){var methodName=logMethods[i];this[methodName]=i<level?noop:this.methodFactory(methodName,level,loggerName)}this.log=this.debug}function enableLoggingWhenConsoleArrives(methodName,level,loggerName){return function(){"undefined"!=typeof console&&(replaceLoggingMethods.call(this,level,loggerName),this[methodName].apply(this,arguments))}}function defaultMethodFactory(methodName,level,loggerName){return realMethod(methodName)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(name,defaultLevel,factory){var currentLevel,self=this,storageKey="loglevel";function getPersistedLevel(){var storedLevel;if("undefined"!=typeof window){try{storedLevel=window.localStorage[storageKey]}catch(ignore){}if(void 0===storedLevel)try{var cookie=window.document.cookie,location=cookie.indexOf(encodeURIComponent(storageKey)+"=");-1!==location&&(storedLevel=/^([^;]+)/.exec(cookie.slice(location))[1])}catch(ignore){}return void 0===self.levels[storedLevel]&&(storedLevel=void 0),storedLevel}}name&&(storageKey+=":"+name),self.name=name,self.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},self.methodFactory=factory||defaultMethodFactory,self.getLevel=function(){return currentLevel},self.setLevel=function(level,persist){if("string"==typeof level&&void 0!==self.levels[level.toUpperCase()]&&(level=self.levels[level.toUpperCase()]),!("number"==typeof level&&level>=0&&level<=self.levels.SILENT))throw"log.setLevel() called with invalid level: "+level;if(currentLevel=level,!1!==persist&&function(levelNum){var levelName=(logMethods[levelNum]||"silent").toUpperCase();if("undefined"!=typeof window){try{return void(window.localStorage[storageKey]=levelName)}catch(ignore){}try{window.document.cookie=encodeURIComponent(storageKey)+"="+levelName+";"}catch(ignore){}}}(level),replaceLoggingMethods.call(self,level,name),"undefined"==typeof console&&level<self.levels.SILENT)return"No console available for logging"},self.setDefaultLevel=function(level){getPersistedLevel()||self.setLevel(level,!1)},self.enableAll=function(persist){self.setLevel(self.levels.TRACE,persist)},self.disableAll=function(persist){self.setLevel(self.levels.SILENT,persist)};var initialLevel=getPersistedLevel();null==initialLevel&&(initialLevel=null==defaultLevel?"WARN":defaultLevel),self.setLevel(initialLevel,!1)}var defaultLogger=new Logger,_loggersByName={};defaultLogger.getLogger=function(name){if("string"!=typeof name||""===name)throw new TypeError("You must supply a name when creating a logger.");var logger=_loggersByName[name];return logger||(logger=_loggersByName[name]=new Logger(name,defaultLogger.getLevel(),defaultLogger.methodFactory)),logger};var _log="undefined"!=typeof window?window.log:void 0;return defaultLogger.noConflict=function(){return"undefined"!=typeof window&&window.log===defaultLogger&&(window.log=_log),defaultLogger},defaultLogger.getLoggers=function(){return _loggersByName},defaultLogger})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports){module.exports=kolibriCoreAppGlobal.lib.vue},function(module,exports){module.exports=kolibriCoreAppGlobal.urls},function(module,__webpack_exports__,__webpack_require__){"use strict";var SideBar=__webpack_require__(17),views_TableOfContentsSectionvue_type_script_lang_js_={name:"TableOfContentsSection",props:{section:{type:Object,required:!0},depth:{type:Number,required:!0},currentSection:{type:Object,required:!1}},computed:{isCurrentSection:function(){return!!this.currentSection&&(this.currentSection.href===this.section.href&&this.currentSection.label===this.section.label)},sectionId:function(){return"section_"+this.section.href.replace(/\W/g,"_")}},methods:{emitTocNavigation:function(section){this.$emit("tocNavigation",section)}}},componentNormalizer=(__webpack_require__(210),__webpack_require__(3)),TableOfContentsSection=Object(componentNormalizer.a)(views_TableOfContentsSectionvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("li",{staticClass:"toc-list-item",class:{"toc-list-item-top-level":0===_vm.depth}},[_c("KButton",{staticClass:"toc-list-item-button",class:{"toc-list-item-button-current":_vm.isCurrentSection},attrs:{id:_vm.sectionId,text:_vm.section.label.trim()||_vm.section.href,appearance:"basic-link"},on:{click:function($event){return _vm.$emit("tocNavigation",_vm.section)}}}),_vm.section.subitems&&_vm.section.subitems.length>0?_c("ul",{staticClass:"toc-list"},_vm._l(_vm.section.subitems,(function(subsection,index){return _c("TableOfContentsSection",{key:index,attrs:{section:subsection,currentSection:_vm.currentSection,depth:_vm.depth+1,"data-test":"table-of-contents-section"},on:{tocNavigation:_vm.emitTocNavigation}})})),1):_vm._e()],1)}),[],!1,null,"5ddaa595",null).exports,views_TableOfContentsSideBarvue_type_script_lang_js_={name:"TableOfContentsSideBar",components:{SideBar:SideBar.a,TableOfContentsSection:TableOfContentsSection},props:{toc:{type:Array,required:!0},currentSection:{type:Object,required:!1}},methods:{emitTocNavigation:function(section){this.$emit("tocNavigation",section)}}},TableOfContentsSideBar_component=(__webpack_require__(211),Object(componentNormalizer.a)(views_TableOfContentsSideBarvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("SideBar",[_c("nav",[_c("ul",{ref:"tocList",staticClass:"toc-list"},[_vm._l(_vm.toc,(function(section,index){return[_c("TableOfContentsSection",{key:"toc-section-"+index,attrs:{section:section,depth:0,currentSection:_vm.currentSection},on:{tocNavigation:_vm.emitTocNavigation}})]}))],2)])])}),[],!1,null,"f0dc335a",null));__webpack_exports__.a=TableOfContentsSideBar_component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var views_LoadingScreenvue_type_script_lang_js_={name:"LoadingScreen",computed:{backgroundStyle:function(){return{backgroundColor:this.$themeTokens.surface}}},$trs:{loadingBook:"Loading book"}},componentNormalizer=(__webpack_require__(206),__webpack_require__(3)),component=Object(componentNormalizer.a)(views_LoadingScreenvue_type_script_lang_js_,(function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"loading-screen",style:this.backgroundStyle},[_c("div",{staticClass:"loading-status"},[_c("KCircularLoader",{attrs:{type:"indeterminate",delay:!1}}),_c("p",[this._v(this._s(this.$tr("loadingBook")))])],1)])}),[],!1,null,"639cf3c4",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var external_kolibriCoreAppGlobal_coreVue_components_UiAlert_=__webpack_require__(83),views_LoadingErrorvue_type_script_lang_js_={name:"LoadingError",components:{UiAlert:__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_UiAlert_).a},props:{loaded:{type:Boolean,default:!1}},$trs:{couldNotLoadThisBook:"Could not load this book"}},componentNormalizer=(__webpack_require__(207),__webpack_require__(3)),component=Object(componentNormalizer.a)(views_LoadingErrorvue_type_script_lang_js_,(function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"epub-renderer-error",class:{loaded:this.loaded},style:{background:this.$themeTokens.surface}},[_c("UiAlert",{attrs:{type:"error",dismissible:!1}},[this._v("\n    "+this._s(this.$tr("couldNotLoadThisBook"))+"\n  ")])],1)}),[],!1,null,"0fd949cf",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var TocButton=__webpack_require__(48),SettingsButton=__webpack_require__(49),SearchButton=__webpack_require__(50),views_TopBarvue_type_script_lang_js_={name:"TopBar",components:{TocButton:TocButton.a,SettingsButton:SettingsButton.a,SearchButton:SearchButton.a},props:{title:{type:String,required:!1},isInFullscreen:{type:Boolean,required:!0}},methods:{focusOnTocButton:function(){this.$refs.tocButton.$el.focus()},focusOnSettingsButton:function(){this.$refs.settingsButton.$el.focus()},focusOnSearchButton:function(){this.$refs.searchButton.$el.focus()}},$trs:{toggleFullscreen:"Toggle fullscreen"}},componentNormalizer=(__webpack_require__(208),__webpack_require__(3)),component=Object(componentNormalizer.a)(views_TopBarvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"top-bar",style:{backgroundColor:_vm.$themePalette.grey.v_200}},[_c("KGrid",[_c("KGridItem",{attrs:{layout4:{span:1},layout8:{span:2},layout12:{span:3}}},[_c("TocButton",{ref:"tocButton",on:{click:function($event){return _vm.$emit("tableOfContentsButtonClicked")}}})],1),_c("KGridItem",{attrs:{layout:{alignment:"center"},layout4:{span:1},layout8:{span:4},layout12:{span:6}}},[_vm.title?_c("h2",{staticClass:"top-bar-title"},[_vm._v("\n        "+_vm._s(_vm.title)+"\n      ")]):_vm._e()]),_c("KGridItem",{attrs:{layout:{alignment:"right"},layout4:{span:2},layout8:{span:2},layout12:{span:3}}},[_c("SettingsButton",{ref:"settingsButton",on:{click:function($event){return _vm.$emit("settingsButtonClicked")}}}),_c("SearchButton",{ref:"searchButton",on:{click:function($event){return _vm.$emit("searchButtonClicked")}}}),_c("KIconButton",{ref:"fullscreenButton",attrs:{icon:_vm.isInFullscreen?"fullscreen_exit":"fullscreen",ariaLabel:_vm.$tr("toggleFullscreen"),size:"small"},on:{click:function($event){return _vm.$emit("fullscreenButtonClicked")}}})],1)],1)],1)}),[],!1,null,"70e04298",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var views_NextButtonvue_type_script_lang_js_={name:"NextButton",props:{color:{type:String,required:!0,validator:function(val){return["black","white"].includes(val)}}},$trs:{goToNextPage:"Go to next page"}},componentNormalizer=(__webpack_require__(216),__webpack_require__(3)),component=Object(componentNormalizer.a)(views_NextButtonvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement;return(_vm._self._c||_h)("KIconButton",{staticClass:"next-button",class:{"next-button-white":"white"===_vm.color},attrs:{icon:_vm.isRtl?"chevronLeft":"chevronRight",ariaLabel:_vm.$tr("goToNextPage"),color:_vm.color},on:{click:function($event){return _vm.$emit("goToNextPage")}}})}),[],!1,null,"4f517ecc",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var views_PreviousButtonvue_type_script_lang_js_={name:"PreviousButton",props:{color:{type:String,required:!0,validator:function(val){return["black","white"].includes(val)}}},$trs:{goToPreviousPage:"Go to previous page"}},componentNormalizer=(__webpack_require__(215),__webpack_require__(3)),component=Object(componentNormalizer.a)(views_PreviousButtonvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement;return(_vm._self._c||_h)("KIconButton",{staticClass:"previous-button",class:{"previous-button-white":"white"===_vm.color},attrs:{icon:_vm.isRtl?"chevronRight":"chevronLeft",color:_vm.color,ariaLabel:_vm.$tr("goToPreviousPage")},on:{click:function($event){return _vm.$emit("goToPreviousPage")}}})}),[],!1,null,"b6b4a0d8",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var mark=__webpack_require__(47),mark_default=__webpack_require__.n(mark),SideBar=__webpack_require__(17);function searchThroughEntireBook(book,searchQuery,maxSearchResults){return book.spine.spineItems.reduce((function(promiseChain,currentSpineItem){return promiseChain.then((function(totalSearchResults){return function(spineItem,searchQuery,numOfTotalSearchResultsSoFar){return new Promise((function(resolve){if(numOfTotalSearchResultsSoFar>maxSearchResults)resolve([]);else{var final=function(searchResults){return spineItem.unload(),searchResults||[]};spineItem.load(book.load.bind(book)).then((function(){return spineItem.find(searchQuery)})).then(final,final).then((function(searchResults){return resolve(searchResults)}))}}))}(currentSpineItem,searchQuery,totalSearchResults.length).then((function(currentSpineItemSearchResults){return totalSearchResults.concat(currentSpineItemSearchResults)}))}))}),Promise.resolve([]))}var views_SearchSideBarvue_type_script_lang_js_={name:"SearchSideBar",components:{SideBar:SideBar.a},props:{book:{type:Object,required:!0}},data:function(){return{searchResults:[],searchQuery:"",searchIsLoading:!1,maxSearchResultsExceeded:!1,searchHasBeenMade:!1,markInstance:null}},computed:{numberOfSearchResults:function(){return this.maxSearchResultsExceeded?this.$tr("overCertainNumberOfSearchResults",{num:500}):this.$tr("numberOfSearchResults",{num:this.searchResults.length})},paragraphStyle:function(){return{color:this.$themeTokens.annotation}}},methods:{focusOnInput:function(){this.$refs.searchInput.focus()},submitSearch:function(){var this$1=this,searchQuery=this.searchQuery.toLowerCase();searchQuery.length>0&&!1===this.searchIsLoading&&(this.searchIsLoading=!0,this.searchHasBeenMade=!0,this.maxSearchResultsExceeded=!1,searchThroughEntireBook(this.book,searchQuery,500).then((function(searchResults){searchResults.length>500&&(this$1.maxSearchResultsExceeded=!0),this$1.searchResults=searchResults.slice(0,500),this$1.$nextTick().then((function(){this$1.markInstance?this$1.markInstance.unmark({done:function(){return this$1.createMarks(searchQuery)}}):this$1.createMarks(searchQuery)}))})))},createMarks:function(searchQuery){var this$1=this;this.markInstance=new mark_default.a(this.$refs.searchResultsList),this.markInstance.mark(searchQuery,{separateWordSearch:!1,done:function(){this$1.$emit("newSearchQuery",searchQuery),this$1.searchIsLoading=!1}})}},$trs:{searchThroughBook:"Search through book",noSearchResults:"No results",loadingResults:"Loading results",overCertainNumberOfSearchResults:"Over {num, number, integer} {num, plural, one {result} other {results}}",numberOfSearchResults:"{num, number, integer} {num, plural, one {result} other {results}}",enterSearchQuery:"Enter search query",submitSearchQuery:"Submit search query"}},componentNormalizer=(__webpack_require__(213),__webpack_require__(3)),component=Object(componentNormalizer.a)(views_SearchSideBarvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("SideBar",[_c("form",{staticClass:"d-t",on:{submit:function($event){return $event.preventDefault(),_vm.submitSearch($event)}}},[_c("div",{staticClass:"d-tr"},[_c("input",{directives:[{name:"model",rawName:"v-model.trim",value:_vm.searchQuery,expression:"searchQuery",modifiers:{trim:!0}}],ref:"searchInput",staticClass:"d-tc search-input",attrs:{type:"search","aria-label":_vm.$tr("enterSearchQuery")},domProps:{value:_vm.searchQuery},on:{keyup:function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"esc",27,$event.key,["Esc","Escape"]))return null;$event.stopPropagation()},input:function($event){$event.target.composing||(_vm.searchQuery=$event.target.value.trim())},blur:function($event){return _vm.$forceUpdate()}}}),_c("KIconButton",{staticClass:"d-tc",staticStyle:{position:"relative",top:"4px",left:"8px"},attrs:{icon:"search",buttonType:"submit",ariaLabel:_vm.$tr("submitSearchQuery"),size:"small"}})],1)]),_c("transition",{attrs:{mode:"out-in"}},[_vm.searchHasBeenMade?_vm.searchIsLoading?_c("div",{key:"loading-true"},[_c("p",{style:_vm.paragraphStyle},[_vm._v("\n        "+_vm._s(_vm.$tr("loadingResults"))+"\n      ")]),_c("KCircularLoader",{attrs:{delay:!1}})],1):0===_vm.searchResults.length?_c("p",{key:"results-false",style:_vm.paragraphStyle},[_vm._v("\n      "+_vm._s(_vm.$tr("noSearchResults"))+"\n    ")]):_vm.searchResults.length>0?_c("p",{key:"results-true",style:_vm.paragraphStyle},[_vm._v("\n      "+_vm._s(_vm.numberOfSearchResults)+"\n    ")]):_vm._e():_c("p",{key:"no-search",style:_vm.paragraphStyle},[_vm._v("\n      "+_vm._s(_vm.$tr("searchThroughBook"))+"\n    ")])]),_c("ol",{directives:[{name:"show",rawName:"v-show",value:_vm.searchHasBeenMade&&!_vm.searchIsLoading&&_vm.searchResults.length>0,expression:"searchHasBeenMade && !searchIsLoading && searchResults.length > 0"}],ref:"searchResultsList",staticClass:"search-results-list"},_vm._l(_vm.searchResults,(function(item,index){return _c("li",{key:index,staticClass:"search-results-list-item",style:{borderTop:"solid 1px "+_vm.$themeTokens.fineLine}},[_c("KButton",{staticClass:"search-results-list-item-button",attrs:{text:item.excerpt,appearance:"basic-link"},on:{click:function($event){return _vm.$emit("navigateToSearchResult",item)}}})],1)})),0)],1)}),[],!1,null,"cf11c65c",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var views_BottomBarvue_type_script_lang_js_={name:"BottomBar",props:{heading:{type:String,required:!1},sliderValue:{type:Number,required:!0},sliderStep:{type:Number,required:!0},locationsAreReady:{type:Boolean,required:!0}},methods:{handleChange:function(newValue){this.$emit("sliderChanged",Number(newValue))}},$trs:{progress:"{progress, number, percent}",jumpToPositionInBook:"Jump to position in book",preparingSlider:"Preparing slider"}},componentNormalizer=(__webpack_require__(214),__webpack_require__(3)),component=Object(componentNormalizer.a)(views_BottomBarvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"bottom-bar",style:{backgroundColor:_vm.$themePalette.grey.v_200}},[_c("div",{staticClass:"bottom-bar-heading"},[_vm.heading?_c("h3",[_vm._v("\n      "+_vm._s(_vm.heading)+"\n    ")]):_vm._e()]),_c("transition",{attrs:{mode:"in-out"}},[_vm.locationsAreReady?_c("div",[_c("div",{staticClass:"d-t"},[_c("div",{staticClass:"d-t-r"},[_c("div",{staticClass:"bottom-bar-progress-container d-t-c"},[_c("div",{staticClass:"bottom-bar-progress"},[_vm._v("\n              "+_vm._s(_vm.$tr("progress",{progress:_vm.sliderValue/100}))+"\n            ")])]),_c("div",{staticClass:"d-t-c full-width"},[_c("input",{staticClass:"full-width",attrs:{type:"range",min:0,max:100,step:_vm.sliderStep,"aria-label":_vm.$tr("jumpToPositionInBook")},domProps:{value:_vm.sliderValue},on:{change:function($event){return _vm.handleChange($event.target.value)}}})])])])]):_c("div",{staticClass:"loader-container"},[_c("KLinearLoader",{staticClass:"loader",attrs:{type:"indeterminate",delay:!1}}),_c("span",[_vm._v(_vm._s(_vm.$tr("preparingSlider")))])],1)])],1)}),[],!1,null,"31aa40a6",null);__webpack_exports__.a=component.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var EpubConstants=__webpack_require__(26),views_SettingsSideBarvue_type_script_lang_js_={name:"SettingsSideBar",components:{SideBar:__webpack_require__(17).a},props:{theme:{type:Object,required:!0},decreaseFontSizeDisabled:{type:Boolean,required:!1,default:!1},increaseFontSizeDisabled:{type:Boolean,required:!1,default:!1}},computed:{themes:function(){return EpubConstants.a},settingsButtonFocus:function(){return{":focus":Object.assign({},this.$coreOutline,{outlineOffset:"0px",outlineWidth:"2px"})}}},methods:{generateThemeAriaLabel:function(themeName){switch(themeName){case"WHITE":return this.$tr("setWhiteTheme");case"BEIGE":return this.$tr("setBeigeTheme");case"GREY":return this.$tr("setGreyTheme");case"BLACK":return this.$tr("setBlackTheme");default:return""}},isCurrentlySelectedTheme:function(theme){return theme.backgroundColor===this.theme.backgroundColor&&theme.textColor===this.theme.textColor},generateStyle:function(theme){return Object.assign({},this.settingsButtonFocus,{backgroundColor:theme.backgroundColor,":hover":{backgroundColor:theme.hoverColor}})}},$trs:{textSize:"Text size",decrease:"Decrease",increase:"Increase",theme:"Theme",setWhiteTheme:"Set white theme",setBeigeTheme:"Set beige theme",setGreyTheme:"Set grey theme",setBlackTheme:"Set black theme"}},componentNormalizer=(__webpack_require__(212),__webpack_require__(3)),component=Object(componentNormalizer.a)(views_SettingsSideBarvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("SideBar",[_c("div",{staticClass:"o-f-h"},[_c("h3",[_vm._v(_vm._s(_vm.$tr("textSize")))]),_c("KFixedGrid",{attrs:{numCols:"2",gutter:"8"}},[_c("KFixedGridItem",{attrs:{span:"1"}},[_c("KButton",{ref:"decreaseFontSizeButton",class:["settings-button",_vm.$computedClass(_vm.settingsButtonFocus)],attrs:{disabled:_vm.decreaseFontSizeDisabled},on:{click:function($event){return _vm.$emit("decreaseFontSize")}}},[_c("KIcon",{staticStyle:{top:"0",width:"24px",height:"24px"},attrs:{slot:"icon",icon:"minus"},slot:"icon"}),_c("div",{staticClass:"truncate"},[_vm._v("\n            "+_vm._s(_vm.$tr("decrease"))+"\n          ")])],1)],1),_c("KFixedGridItem",{attrs:{span:"1"}},[_c("KButton",{ref:"increaseFontSizeButton",class:["settings-button",_vm.$computedClass(_vm.settingsButtonFocus)],attrs:{disabled:_vm.increaseFontSizeDisabled},on:{click:function($event){return _vm.$emit("increaseFontSize")}}},[_c("KIcon",{staticStyle:{top:"0",width:"24px",height:"24px"},attrs:{slot:"icon",icon:"plus"},slot:"icon"}),_c("div",{staticClass:"truncate"},[_vm._v("\n            "+_vm._s(_vm.$tr("increase"))+"\n          ")])],1)],1)],1)],1),_c("div",{staticClass:"o-f-h"},[_c("h3",[_vm._v(_vm._s(_vm.$tr("theme")))]),_c("KFixedGrid",{attrs:{numCols:"4",gutter:"8"}},_vm._l(_vm.themes,(function(value,key){return _c("KFixedGridItem",{key:key,attrs:{span:"1"}},[_c("KButton",{staticClass:"settings-button theme-button",attrs:{"aria-label":_vm.generateThemeAriaLabel(key),appearanceOverrides:_vm.generateStyle(value)},on:{click:function($event){return _vm.$emit("setTheme",value)}}},[_vm.isCurrentlySelectedTheme(value)?_c("KIcon",{staticStyle:{top:"0",width:"24px",height:"24px"},style:{fill:value.textColor},attrs:{icon:"check"}}):_vm._e()],1)],1)})),1)],1)])}),[],!1,null,"5033e2ae",null);__webpack_exports__.a=component.exports},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(62),isPlainFunction=__webpack_require__(97),assign=__webpack_require__(101),normalizeOpts=__webpack_require__(109),contains=__webpack_require__(110);(module.exports=function(dscr,value){var c,e,w,options,desc;return arguments.length<2||"string"!=typeof dscr?(options=value,value=dscr,dscr=null):options=arguments[2],isValue(dscr)?(c=contains.call(dscr,"c"),e=contains.call(dscr,"e"),w=contains.call(dscr,"w")):(c=w=!0,e=!1),desc={value:value,configurable:c,enumerable:e,writable:w},options?assign(normalizeOpts(options),desc):desc}).gs=function(dscr,get,set){var c,e,options,desc;return"string"!=typeof dscr?(options=set,set=get,get=dscr,dscr=null):options=arguments[3],isValue(get)?isPlainFunction(get)?isValue(set)?isPlainFunction(set)||(options=set,set=void 0):set=void 0:(options=get,get=set=void 0):get=void 0,isValue(dscr)?(c=contains.call(dscr,"c"),e=contains.call(dscr,"e")):(c=!0,e=!1),desc={get:get,set:set,configurable:c,enumerable:e},options?assign(normalizeOpts(options),desc):desc}},function(module,exports,__webpack_require__){"use strict";var isFunction=__webpack_require__(98),classRe=/^\s*class[\s{/}]/,functionToString=Function.prototype.toString;module.exports=function(value){return!!isFunction(value)&&!classRe.test(functionToString.call(value))}},function(module,exports,__webpack_require__){"use strict";var isPrototype=__webpack_require__(99);module.exports=function(value){if("function"!=typeof value)return!1;if(!hasOwnProperty.call(value,"length"))return!1;try{if("number"!=typeof value.length)return!1;if("function"!=typeof value.call)return!1;if("function"!=typeof value.apply)return!1}catch(error){return!1}return!isPrototype(value)}},function(module,exports,__webpack_require__){"use strict";var isObject=__webpack_require__(100);module.exports=function(value){if(!isObject(value))return!1;try{return!!value.constructor&&value.constructor.prototype===value}catch(error){return!1}}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(62),possibleTypes={object:!0,function:!0,undefined:!0};module.exports=function(value){return!!isValue(value)&&hasOwnProperty.call(possibleTypes,typeof value)}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(102)()?Object.assign:__webpack_require__(103)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var obj,assign=Object.assign;return"function"==typeof assign&&(assign(obj={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),obj.foo+obj.bar+obj.trzy==="razdwatrzy")}},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(104),value=__webpack_require__(108),max=Math.max;module.exports=function(dest,src){var error,i,assign,arguments$1=arguments,length=max(arguments.length,2);for(dest=Object(value(dest)),assign=function(key){try{dest[key]=src[key]}catch(e){error||(error=e)}},i=1;i<length;++i)src=arguments$1[i],keys(src).forEach(assign);if(void 0!==error)throw error;return dest}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(105)()?Object.keys:__webpack_require__(106)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(53),keys=Object.keys;module.exports=function(object){return keys(isValue(object)?Object(object):object)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(53);module.exports=function(value){if(!isValue(value))throw new TypeError("Cannot use null or undefined");return value}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(53),forEach=Array.prototype.forEach,create=Object.create,process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(opts1){var result=create(null);return forEach.call(arguments,(function(options){isValue(options)&&process(Object(options),result)})),result}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(111)()?String.prototype.contains:__webpack_require__(112)},function(module,exports,__webpack_require__){"use strict";var str="razdwatrzy";module.exports=function(){return"function"==typeof str.contains&&(!0===str.contains("dwa")&&!1===str.contains("foo"))}},function(module,exports,__webpack_require__){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn){if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return fn}},function(module,exports){var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$");function XMLReader(){}function copyLocator(f,t){return t.lineNumber=f.lineNumber,t.columnNumber=f.columnNumber,t}function parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){for(var attrName,p=++start,s=0;;){var c=source.charAt(p);switch(c){case"=":if(1===s)attrName=source.slice(start,p),s=3;else{if(2!==s)throw new Error("attribute equal must after attrName");s=3}break;case"'":case'"':if(3===s||1===s){if(1===s&&(errorHandler.warning('attribute value must after "="'),attrName=source.slice(start,p)),start=p+1,!((p=source.indexOf(c,start))>0))throw new Error("attribute value no end '"+c+"' match");value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer),el.add(attrName,value,start-1),s=5}else{if(4!=s)throw new Error('attribute value must after "="');value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer),el.add(attrName,value,start),errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+")!!"),start=p+1,s=5}break;case"/":switch(s){case 0:el.setTagName(source.slice(start,p));case 5:case 6:case 7:s=7,el.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return errorHandler.error("unexpected end of input"),0==s&&el.setTagName(source.slice(start,p)),p;case">":switch(s){case 0:el.setTagName(source.slice(start,p));case 5:case 6:case 7:break;case 4:case 1:"/"===(value=source.slice(start,p)).slice(-1)&&(el.closed=!0,value=value.slice(0,-1));case 2:2===s&&(value=attrName),4==s?(errorHandler.warning('attribute "'+value+'" missed quot(")!!'),el.add(attrName,value.replace(/&#?\w+;/g,entityReplacer),start)):("http://www.w3.org/1999/xhtml"===currentNSMap[""]&&value.match(/^(?:disabled|checked|selected)$/i)||errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!'),el.add(value,value,start));break;case 3:throw new Error("attribute value missed!!")}return p;case"":c=" ";default:if(c<=" ")switch(s){case 0:el.setTagName(source.slice(start,p)),s=6;break;case 1:attrName=source.slice(start,p),s=2;break;case 4:var value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);errorHandler.warning('attribute "'+value+'" missed quot(")!!'),el.add(attrName,value,start);case 5:s=6}else switch(s){case 2:el.tagName;"http://www.w3.org/1999/xhtml"===currentNSMap[""]&&attrName.match(/^(?:disabled|checked|selected)$/i)||errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead2!!'),el.add(attrName,attrName,start),start=p,s=1;break;case 5:errorHandler.warning('attribute space is required"'+attrName+'"!!');case 6:s=1,start=p;break;case 3:s=4,start=p;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}p++}}function appendElement(el,domBuilder,currentNSMap){for(var tagName=el.tagName,localNSMap=null,i=el.length;i--;){var a=el[i],qName=a.qName,value=a.value;if((nsp=qName.indexOf(":"))>0)var prefix=a.prefix=qName.slice(0,nsp),localName=qName.slice(nsp+1),nsPrefix="xmlns"===prefix&&localName;else localName=qName,prefix=null,nsPrefix="xmlns"===qName&&"";a.localName=localName,!1!==nsPrefix&&(null==localNSMap&&(localNSMap={},_copy(currentNSMap,currentNSMap={})),currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value,a.uri="http://www.w3.org/2000/xmlns/",domBuilder.startPrefixMapping(nsPrefix,value))}for(i=el.length;i--;){(prefix=(a=el[i]).prefix)&&("xml"===prefix&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==prefix&&(a.uri=currentNSMap[prefix||""]))}var nsp;(nsp=tagName.indexOf(":"))>0?(prefix=el.prefix=tagName.slice(0,nsp),localName=el.localName=tagName.slice(nsp+1)):(prefix=null,localName=el.localName=tagName);var ns=el.uri=currentNSMap[prefix||""];if(domBuilder.startElement(ns,localName,tagName,el),!el.closed)return el.currentNSMap=currentNSMap,el.localNSMap=localNSMap,!0;if(domBuilder.endElement(ns,localName,tagName),localNSMap)for(prefix in localNSMap)domBuilder.endPrefixMapping(prefix)}function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd),text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text))return/^script$/i.test(tagName)?(domBuilder.characters(text,0,text.length),elEndStart):(text=text.replace(/&#?\w+;/g,entityReplacer),domBuilder.characters(text,0,text.length),elEndStart)}return elStartEnd+1}function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];return null==pos&&((pos=source.lastIndexOf("</"+tagName+">"))<elStartEnd&&(pos=source.lastIndexOf("</"+tagName)),closeMap[tagName]=pos),pos<elStartEnd}function _copy(source,target){for(var n in source)target[n]=source[n]}function parseDCC(source,start,domBuilder,errorHandler){switch(source.charAt(start+2)){case"-":return"-"===source.charAt(start+3)?(end=source.indexOf("--\x3e",start+4))>start?(domBuilder.comment(source,start+4,end-start-4),end+3):(errorHandler.error("Unclosed comment"),-1):-1;default:if("CDATA["==source.substr(start+3,6)){var end=source.indexOf("]]>",start+9);return domBuilder.startCDATA(),domBuilder.characters(source,start+9,end-start-9),domBuilder.endCDATA(),end+3}var matchs=function(source,start){var match,buf=[],reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;reg.lastIndex=start,reg.exec(source);for(;match=reg.exec(source);)if(buf.push(match),match[1])return buf}(source,start),len=matchs.length;if(len>1&&/!doctype/i.test(matchs[0][0])){var name=matchs[1][0],pubid=len>3&&/^public$/i.test(matchs[2][0])&&matchs[3][0],sysid=len>4&&matchs[4][0],lastMatch=matchs[len-1];return domBuilder.startDTD(name,pubid&&pubid.replace(/^(['"])(.*?)\1$/,"$2"),sysid&&sysid.replace(/^(['"])(.*?)\1$/,"$2")),domBuilder.endDTD(),lastMatch.index+lastMatch[0].length}}return-1}function parseInstruction(source,start,domBuilder){var end=source.indexOf("?>",start);if(end){var match=source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(match){match[0].length;return domBuilder.processingInstruction(match[1],match[2]),end+2}return-1}return-1}function ElementAttributes(source){}function _set_proto_(thiz,parent){return thiz.__proto__=parent,thiz}XMLReader.prototype={parse:function(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument(),_copy(defaultNSMap,defaultNSMap={}),function(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function entityReplacer(a){var k=a.slice(1,-1);return k in entityMap?entityMap[k]:"#"===k.charAt(0)?function(code){if(code>65535){var surrogate1=55296+((code-=65536)>>10),surrogate2=56320+(1023&code);return String.fromCharCode(surrogate1,surrogate2)}return String.fromCharCode(code)}(parseInt(k.substr(1).replace("x","0x"))):(errorHandler.error("entity not found:"+a),a)}function appendText(end){if(end>start){var xt=source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);locator&&position(start),domBuilder.characters(xt,0,end-start),start=end}}function position(p,m){for(;p>=lineEnd&&(m=linePattern.exec(source));)lineStart=m.index,lineEnd=lineStart+m[0].length,locator.lineNumber++;locator.columnNumber=p-lineStart+1}var lineStart=0,lineEnd=0,linePattern=/.*(?:\r\n?|\n)|.*$/g,locator=domBuilder.locator,parseStack=[{currentNSMap:defaultNSMapCopy}],closeMap={},start=0;for(;;){try{var tagStart=source.indexOf("<",start);if(tagStart<0){if(!source.substr(start).match(/^\s*$/)){var doc=domBuilder.doc,text=doc.createTextNode(source.substr(start));doc.appendChild(text),domBuilder.currentElement=text}return}switch(tagStart>start&&appendText(tagStart),source.charAt(tagStart+1)){case"/":var end=source.indexOf(">",tagStart+3),tagName=source.substring(tagStart+2,end),config=parseStack.pop();end<0?(tagName=source.substring(tagStart+2).replace(/[\s<].*/,""),errorHandler.error("end tag name: "+tagName+" is not complete:"+config.tagName),end=tagStart+1+tagName.length):tagName.match(/\s</)&&(tagName=tagName.replace(/[\s<].*/,""),errorHandler.error("end tag name: "+tagName+" maybe not complete"),end=tagStart+1+tagName.length);var localNSMap=config.localNSMap,endMatch=config.tagName==tagName;if(endMatch||config.tagName&&config.tagName.toLowerCase()==tagName.toLowerCase()){if(domBuilder.endElement(config.uri,config.localName,tagName),localNSMap)for(var prefix in localNSMap)domBuilder.endPrefixMapping(prefix);endMatch||errorHandler.fatalError("end tag name: "+tagName+" is not match the current start tagName:"+config.tagName)}else parseStack.push(config);end++;break;case"?":locator&&position(tagStart),end=parseInstruction(source,tagStart,domBuilder);break;case"!":locator&&position(tagStart),end=parseDCC(source,tagStart,domBuilder,errorHandler);break;default:locator&&position(tagStart);var el=new ElementAttributes,currentNSMap=parseStack[parseStack.length-1].currentNSMap,len=(end=parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler),el.length);if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)&&(el.closed=!0,entityMap.nbsp||errorHandler.warning("unclosed xml attribute")),locator&&len){for(var locator2=copyLocator(locator,{}),i=0;i<len;i++){var a=el[i];position(a.offset),a.locator=copyLocator(locator,{})}domBuilder.locator=locator2,appendElement(el,domBuilder,currentNSMap)&&parseStack.push(el),domBuilder.locator=locator}else appendElement(el,domBuilder,currentNSMap)&&parseStack.push(el);"http://www.w3.org/1999/xhtml"!==el.uri||el.closed?end++:end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)}}catch(e){errorHandler.error("element parse error: "+e),end=-1}end>start?start=end:appendText(Math.max(tagStart,start)+1)}}(source,defaultNSMap,entityMap,domBuilder,this.errorHandler),domBuilder.endDocument()}},ElementAttributes.prototype={setTagName:function(tagName){if(!tagNamePattern.test(tagName))throw new Error("invalid tagName:"+tagName);this.tagName=tagName},add:function(qName,value,offset){if(!tagNamePattern.test(qName))throw new Error("invalid attribute:"+qName);this[this.length++]={qName:qName,value:value,offset:offset}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(thiz,parent){function p(){}for(parent in p.prototype=parent,p=new p,thiz)p[parent]=thiz[parent];return p}),exports.XMLReader=XMLReader},function(module,exports,__webpack_require__){"use strict";function createElement(name){return document.createElementNS("http://www.w3.org/2000/svg",name)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createElement=createElement,exports.default={createElement:createElement}},function(module,exports,__webpack_require__){"use strict";function proxyMouse(target,tracked){function dispatch(e){for(var i=tracked.length-1;i>=0;i--){var t=tracked[i],x=e.clientX,y=e.clientY;if(e.touches&&e.touches.length&&(x=e.touches[0].clientX,y=e.touches[0].clientY),contains(t,target,x,y)){t.dispatchEvent(clone(e));break}}}if("iframe"===target.nodeName||"IFRAME"===target.nodeName)try{this.target=target.contentDocument}catch(err){this.target=target}else this.target=target;for(var _arr=["mouseup","mousedown","click","touchstart"],_i=0;_i<_arr.length;_i++){var ev=_arr[_i];this.target.addEventListener(ev,(function(e){return dispatch(e)}),!1)}}function clone(e){var opts=Object.assign({},e,{bubbles:!1});try{return new MouseEvent(e.type,opts)}catch(err){var copy=document.createEvent("MouseEvents");return copy.initMouseEvent(e.type,!1,opts.cancelable,opts.view,opts.detail,opts.screenX,opts.screenY,opts.clientX,opts.clientY,opts.ctrlKey,opts.altKey,opts.shiftKey,opts.metaKey,opts.button,opts.relatedTarget),copy}}function contains(item,target,x,y){var offset=target.getBoundingClientRect();function rectContains(r,x,y){var top=r.top-offset.top,left=r.left-offset.left,bottom=top+r.height,right=left+r.width;return top<=y&&left<=x&&bottom>y&&right>x}if(!rectContains(item.getBoundingClientRect(),x,y))return!1;for(var rects=item.getClientRects(),i=0,len=rects.length;i<len;i++)if(rectContains(rects[i],x,y))return!0;return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.proxyMouse=proxyMouse,exports.clone=clone,exports.default={proxyMouse:proxyMouse}},function(module,exports,__webpack_require__){var root=__webpack_require__(10);module.exports=function(){return root.Date.now()}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(29),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function(value){return nativeObjectToString.call(value)}},function(module,exports,__webpack_require__){(function(Buffer,global,setImmediate){module.exports=function s(a,o,h){function u(r,t){if(!o[r]){if(!a[r]){if(l)return l(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var n=o[r]={exports:{}};a[r][0].call(n.exports,(function(t){return u(a[r][1][t]||t)}),n,n.exports,s,a,o,h)}return o[r].exports}for(var l=!1,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,r){"use strict";var c=t("./utils"),d=t("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,n,s,a,o,h=[],u=0,l=t.length,f=l,d="string"!==c.getTypeOf(t);u<t.length;)f=l-u,i=d?(e=t[u++],r=u<l?t[u++]:0,u<l?t[u++]:0):(e=t.charCodeAt(u++),r=u<l?t.charCodeAt(u++):0,u<l?t.charCodeAt(u++):0),n=e>>2,s=(3&e)<<4|r>>4,a=1<f?(15&r)<<2|i>>6:64,o=2<f?63&i:64,h.push(p.charAt(n)+p.charAt(s)+p.charAt(a)+p.charAt(o));return h.join("")},r.decode=function(t){var e,r,i,n,s,a,o=0,h=0,u="data:";if(t.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var l,f=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===p.charAt(64)&&f--,t.charAt(t.length-2)===p.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=d.uint8array?new Uint8Array(0|f):new Array(0|f);o<t.length;)e=p.indexOf(t.charAt(o++))<<2|(n=p.indexOf(t.charAt(o++)))>>4,r=(15&n)<<4|(s=p.indexOf(t.charAt(o++)))>>2,i=(3&s)<<6|(a=p.indexOf(t.charAt(o++))),l[h++]=e,64!==s&&(l[h++]=r),64!==a&&(l[h++]=i);return l}},{"./support":30,"./utils":32}],2:[function(t,e,r){"use strict";var i=t("./external"),n=t("./stream/DataWorker"),s=t("./stream/DataLengthProbe"),a=t("./stream/Crc32Probe");function o(t,e,r,i,n){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=i,this.compressedContent=n}s=t("./stream/DataLengthProbe"),o.prototype={getContentWorker:function(){var t=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(t,e,r){return t.pipe(new a).pipe(new s("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){"use strict";var i=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(t){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){"use strict";var i=t("./utils"),o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,r,i){var n=o,s=0+r;t^=-1;for(var a=0;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}(0|e,t,t.length):function(t,e,r,i){var n=o,s=0+r;t^=-1;for(var a=0;a<s;a++)t=t>>>8^n[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){"use strict";var i;i="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=t("pako"),s=t("./utils"),a=t("./stream/GenericWorker"),o=i?"uint8array":"array";function h(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic="\b\0",s.inherits(h,a),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,t.data),!1)},h.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(t){return new h("Deflate",t)},r.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){"use strict";function A(t,e){var r,i="";for(r=0;r<e;r++)i+=String.fromCharCode(255&t),t>>>=8;return i}function i(t,e,r,i,n,s){var a,o,h=t.file,u=t.compression,l=s!==O.utf8encode,f=I.transformTo("string",s(h.name)),d=I.transformTo("string",O.utf8encode(h.name)),c=h.comment,p=I.transformTo("string",s(c)),m=I.transformTo("string",O.utf8encode(c)),_=d.length!==h.name.length,g=m.length!==c.length,b="",v="",y="",w=h.dir,k=h.date,x={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(x.crc32=t.crc32,x.compressedSize=t.compressedSize,x.uncompressedSize=t.uncompressedSize);var S=0;e&&(S|=8),l||!_&&!g||(S|=2048);var z=0,C=0;w&&(z|=16),"UNIX"===n?(C=798,z|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16}(h.unixPermissions,w)):(C=20,z|=function(t){return 63&(t||0)}(h.dosPermissions)),a=k.getUTCHours(),a<<=6,a|=k.getUTCMinutes(),a<<=5,a|=k.getUTCSeconds()/2,o=k.getUTCFullYear()-1980,o<<=4,o|=k.getUTCMonth()+1,o<<=5,o|=k.getUTCDate(),_&&(v=A(1,1)+A(B(f),4)+d,b+="up"+A(v.length,2)+v),g&&(y=A(1,1)+A(B(p),4)+m,b+="uc"+A(y.length,2)+y);var E="";return E+="\n\0",E+=A(S,2),E+=u.magic,E+=A(a,2),E+=A(o,2),E+=A(x.crc32,4),E+=A(x.compressedSize,4),E+=A(x.uncompressedSize,4),E+=A(f.length,2),E+=A(b.length,2),{fileRecord:R.LOCAL_FILE_HEADER+E+f+b,dirRecord:R.CENTRAL_FILE_HEADER+A(C,2)+E+A(p.length,2)+"\0\0\0\0"+A(z,4)+A(i,4)+f+b+p}}var I=t("../utils"),n=t("../stream/GenericWorker"),O=t("../utf8"),B=t("../crc32"),R=t("../signature");function s(t,e,r,i){n.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}I.inherits(s,n),s.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,n.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-i-1))/r:100}}))},s.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(t){return R.DATA_DESCRIPTOR+A(t.crc32,4)+A(t.compressedSize,4)+A(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,n){var s=I.transformTo("string",n(i));return R.CENTRAL_DIRECTORY_END+"\0\0\0\0"+A(t,2)+A(t,2)+A(e,4)+A(r,4)+A(s.length,2)+s}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(t){var e=this._sources;if(!n.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},s.prototype.lock=function(){n.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=s},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){"use strict";var u=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(t,a,e){var o=new i(a.streamFiles,e,a.platform,a.encodeFileName),h=0;try{t.forEach((function(t,e){h++;var r=function(t,e){var r=t||e,i=u[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(e.options.compression,a.compression),i=e.options.compressionOptions||a.compressionOptions||{},n=e.dir,s=e.date;e._compressWorker(r,i).withStreamInfo("file",{name:t,dir:n,date:s,comment:e.comment||"",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(o)})),o.entriesCount=h}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.4.0",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){"use strict";var i=t("./utils"),n=t("./external"),o=t("./utf8"),h=(i=t("./utils"),t("./zipEntries")),s=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function l(i){return new n.Promise((function(t,e){var r=i.decompressed.getContentWorker().pipe(new s);r.on("error",(function(t){e(t)})).on("end",(function(){r.streamInfo.crc32!==i.decompressed.crc32?e(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}e.exports=function(t,s){var a=this;return s=i.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,s.optimizedBinaryString,s.base64).then((function(t){var e=new h(s);return e.load(t),e})).then((function(t){var e=[n.Promise.resolve(t)],r=t.files;if(s.checkCRC32)for(var i=0;i<r.length;i++)e.push(l(r[i]));return n.Promise.all(e)})).then((function(t){for(var e=t.shift(),r=e.files,i=0;i<r.length;i++){var n=r[i];a.file(n.fileNameStr,n.decompressed,{binary:!0,optimizedBinaryString:!0,date:n.date,dir:n.dir,comment:n.fileCommentStr.length?n.fileCommentStr:null,unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions,createFolders:s.createFolders})}return e.zipComment.length&&(a.comment=e.zipComment),a}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){"use strict";var i=t("../utils"),n=t("../stream/GenericWorker");function s(t,e){n.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(s,n),s.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},s.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){"use strict";var n=t("readable-stream").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),r&&r(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){"use strict";e.exports={isNode:void 0!==Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,r){"use strict";function s(t,e,r){var i,n=u.getTypeOf(e),s=u.extend(r||{},f);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=g(t)),s.createFolders&&(i=_(t))&&b.call(this,i,!0);var o,a="string"===n&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!a),(e instanceof d&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",n="string"),o=e instanceof d||e instanceof l?e:p.isNode&&p.isStream(e)?new m(t,e):u.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var h=new c(t,o,s);this.files[t]=h}var n=t("./utf8"),u=t("./utils"),l=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),f=t("./defaults"),d=t("./compressedObject"),c=t("./zipObject"),o=t("./generate"),p=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),_=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},b=function(t,e){return e=void 0!==e?e:f.createFolders,t=g(t),this.files[t]||s.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function h(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var i={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,i))},filter:function(r){var i=[];return this.forEach((function(t,e){r(t,e)&&i.push(e)})),i},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,s.call(this,t,e,r),this;if(h(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var n=this.files[this.root+t];return n&&!n.dir?n:null},folder:function(r){if(!r)return this;if(h(r))return this.filter((function(t,e){return e.dir&&r.test(t)}));var t=this.root+r,e=b.call(this,t),i=this.clone();return i.root=e.name,i},remove:function(r){r=this.root+r;var t=this.files[r];if(t||("/"!==r.slice(-1)&&(r+="/"),t=this.files[r]),t&&!t.dir)delete this.files[r];else for(var e=this.filter((function(t,e){return e.name.slice(0,r.length)===r})),i=0;i<e.length;i++)delete this.files[e[i].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if((r=u.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");u.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var i=r.comment||this.comment||"";e=o.generateWorker(this,r,i)}catch(t){(e=new l("error")).error(t)}return new a(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=i},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){"use strict";var i=t("./DataReader");function n(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(n,i),n.prototype.byteAt=function(t){return this.data[this.zero+t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===e&&this.data[s+1]===r&&this.data[s+2]===i&&this.data[s+3]===n)return s-this.zero;return-1},n.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&r===s[1]&&i===s[2]&&n===s[3]},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){"use strict";var i=t("../utils");function n(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=n},{"../utils":32}],19:[function(t,e,r){"use strict";var i=t("./Uint8ArrayReader");function n(t){i.call(this,t)}t("../utils").inherits(n,i),n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){"use strict";var i=t("./DataReader");function n(t){i.call(this,t)}t("../utils").inherits(n,i),n.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},n.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){"use strict";var i=t("./ArrayReader");function n(t){i.call(this,t)}t("../utils").inherits(n,i),n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){"use strict";var i=t("../utils"),n=t("../support"),s=t("./ArrayReader"),a=t("./StringReader"),o=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||n.uint8array?"nodebuffer"===e?new o(t):n.uint8array?new h(i.transformTo("uint8array",t)):new s(i.transformTo("array",t)):new a(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,r){"use strict";var i=t("./GenericWorker"),n=t("../utils");function s(t){i.call(this,"ConvertWorker to "+t),this.destType=t}n.inherits(s,i),s.prototype.processChunk=function(t){this.push({data:n.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){"use strict";var i=t("./GenericWorker"),n=t("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,i),s.prototype.processChunk=function(t){this.streamInfo.crc32=n(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){"use strict";var i=t("../utils"),n=t("./GenericWorker");function s(t){n.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(s,n),s.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}n.prototype.processChunk.call(this,t)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){"use strict";var i=t("../utils"),n=t("./GenericWorker");function s(t){n.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}i.inherits(s,n),s.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){"use strict";function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=i},{}],29:[function(t,e,r){"use strict";var h=t("../utils"),n=t("./ConvertWorker"),s=t("./GenericWorker"),u=t("../base64"),i=t("../support"),a=t("../external"),o=null;if(i.nodestream)try{o=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function f(t,e,r){var i=e;switch(e){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=e,this._mimeType=r,h.checkSupport(i),this._worker=t.pipe(new n(i)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}f.prototype={accumulate:function(t){return function(t,o){return new a.Promise((function(e,r){var i=[],n=t._internalType,s=t._outputType,a=t._mimeType;t.on("data",(function(t,e){i.push(t),o&&o(e)})).on("error",(function(t){i=[],r(t)})).on("end",(function(){try{var t=function(t,e,r){switch(t){case"blob":return h.newBlob(h.transformTo("arraybuffer",e),r);case"base64":return u.encode(e);default:return h.transformTo(t,e)}}(s,function(t,e){var r,i=0,n=null,s=0;for(r=0;r<e.length;r++)s+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(n=new Uint8Array(s),r=0;r<e.length;r++)n.set(e[r],i),i+=e[r].length;return n;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(n,i),a);e(t)}catch(t){r(t)}i=[]})).resume()}))}(this,t)},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){h.delay(e,arguments,r)})),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(h.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new o(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),r.blob=0===n.getBlob("application/zip").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(t){r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,s){"use strict";for(var o=t("./utils"),h=t("./support"),r=t("./nodejsUtils"),i=t("./stream/GenericWorker"),u=new Array(256),n=0;n<256;n++)u[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function a(){i.call(this,"utf-8 decode"),this.leftOver=null}function l(){i.call(this,"utf-8 encode")}u[254]=u[254]=1,s.utf8encode=function(t){return h.nodebuffer?r.newBufferFrom(t,"utf-8"):function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=h.uint8array?new Uint8Array(o):new Array(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e}(t)},s.utf8decode=function(t){return h.nodebuffer?o.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,i,n,s=t.length,a=new Array(2*s);for(e=r=0;e<s;)if((i=t[e++])<128)a[r++]=i;else if(4<(n=u[i]))a[r++]=65533,e+=n-1;else{for(i&=2===n?31:3===n?15:7;1<n&&e<s;)i=i<<6|63&t[e++],n--;1<n?a[r++]=65533:i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|1023&i)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),o.applyFromCharCode(a)}(t=o.transformTo(h.uint8array?"uint8array":"array",t))},o.inherits(a,i),a.prototype.processChunk=function(t){var e=o.transformTo(h.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var r=e;(e=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),e.set(r,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var i=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+u[t[r]]>e?r:e}(e),n=e;i!==e.length&&(h.uint8array?(n=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(n=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:s.utf8decode(n),meta:t.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=a,o.inherits(l,i),l.prototype.processChunk=function(t){this.push({data:s.utf8encode(t.data),meta:t.meta})},s.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,a){"use strict";var o=t("./support"),h=t("./base64"),r=t("./nodejsUtils"),i=t("set-immediate-shim"),u=t("./external");function n(t){return t}function l(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}a.newBlob=function(e,r){a.checkSupport("blob");try{return new Blob([e],{type:r})}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(r)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var s={stringifyByChunk:function(t,e,r){var i=[],n=0,s=t.length;if(s<=r)return String.fromCharCode.apply(null,t);for(;n<s;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(n,Math.min(n+r,s)))):i.push(String.fromCharCode.apply(null,t.subarray(n,Math.min(n+r,s)))),n+=r;return i.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(t){return!1}}()}};function f(t){var e=65536,r=a.getTypeOf(t),i=!0;if("uint8array"===r?i=s.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=s.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return s.stringifyByChunk(t,r,e)}catch(t){e=Math.floor(e/2)}return s.stringifyByChar(t)}function d(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}a.applyFromCharCode=f;var c={};c.string={string:n,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,r.allocBuffer(t.length))}},c.array={string:f,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(t)}},c.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(new Uint8Array(t))}},c.uint8array={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return r.newBufferFrom(t)}},c.nodebuffer={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:n},a.transformTo=function(t,e){if(e=e||"",!t)return e;a.checkSupport(t);var r=a.getTypeOf(e);return c[r][t](e)},a.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.nodebuffer&&r.isBuffer(t)?"nodebuffer":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(t){if(!o[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(t){var e,r,i="";for(r=0;r<(t||"").length;r++)i+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return i},a.delay=function(t,e,r){i((function(){t.apply(r||null,e||[])}))},a.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},a.extend=function(){var t,e,arguments$1=arguments,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments$1[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments$1[t][e]);return r},a.prepareContent=function(r,t,i,n,s){return u.Promise.resolve(t).then((function(i){return o.blob&&(i instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(i)))&&"undefined"!=typeof FileReader?new u.Promise((function(e,r){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){r(t.target.error)},t.readAsArrayBuffer(i)})):i})).then((function(t){var e=a.getTypeOf(t);return e?("arraybuffer"===e?t=a.transformTo("uint8array",t):"string"===e&&(s?t=h.decode(t):i&&!0!==n&&(t=function(t){return l(t,o.uint8array?new Uint8Array(t.length):new Array(t.length))}(t))),t):u.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,r){"use strict";var i=t("./reader/readerFor"),n=t("./utils"),s=t("./signature"),a=t("./zipEntry"),o=(t("./utf8"),t("./support"));function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(e)+", expected "+n.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=o.uint8array?"uint8array":"array",r=n.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=e-r;if(0<i)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){"use strict";var i=t("./reader/readerFor"),s=t("./utils"),n=t("./compressedObject"),a=t("./crc32"),o=t("./utf8"),h=t("./compressions"),u=t("./support");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,i,n=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<n;)e=t.readInt(2),r=t.readInt(2),i=t.readData(r),this.extraFields[e]={id:e,length:r,value:i}},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=s.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var n=s.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||a(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||a(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){"use strict";function i(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var s=t("./stream/StreamHelper"),n=t("./stream/DataWorker"),a=t("./utf8"),o=t("./compressedObject"),h=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(e=e.pipe(new a.Utf8EncodeWorker)),!n&&i&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new h("error")).error(t)}return new s(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof h?this._data:new n(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<u.length;f++)i.prototype[u[f]]=l;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,l,e){(function(e){"use strict";var r,i,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var n=0,s=new t(u),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),r=function(){a.data=n=++n%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var o=new e.MessageChannel;o.port1.onmessage=u,r=function(){o.port2.postMessage(0)}}var h=[];function u(){var t,e;i=!0;for(var r=h.length;r;){for(e=h,h=[],t=-1;++t<r;)e[t]();r=h.length}i=!1}l.exports=function(t){1!==h.push(t)||i||r()}}).call(this,void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,r){"use strict";var n=t("immediate");function u(){}var l={},s=["REJECTED"],a=["FULFILLED"],i=["PENDING"];function o(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=i,this.queue=[],this.outcome=void 0,t!==u&&c(this,t)}function h(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,r,i){n((function(){var t;try{t=r(i)}catch(t){return l.reject(e,t)}t===e?l.reject(e,new TypeError("Cannot resolve promise with itself")):l.resolve(e,t)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function c(e,t){var r=!1;function i(t){r||(r=!0,l.reject(e,t))}function n(t){r||(r=!0,l.resolve(e,t))}var s=p((function(){t(n,i)}));"error"===s.status&&i(s.value)}function p(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}(e.exports=o).prototype.finally=function(e){if("function"!=typeof e)return this;var r=this.constructor;return this.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))}))},o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var r=new this.constructor(u);return this.state!==i?f(r,this.state===a?t:e,this.outcome):this.queue.push(new h(r,t,e)),r},h.prototype.callFulfilled=function(t){l.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){l.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},l.resolve=function(t,e){var r=p(d,e);if("error"===r.status)return l.reject(t,r.value);var i=r.value;if(i)c(t,i);else{t.state=a,t.outcome=e;for(var n=-1,s=t.queue.length;++n<s;)t.queue[n].callFulfilled(e)}return t},l.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,i=t.queue.length;++r<i;)t.queue[r].callRejected(e);return t},o.resolve=function(t){return t instanceof this?t:l.resolve(new this(u),t)},o.reject=function(t){var e=new this(u);return l.reject(e,t)},o.all=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,e=-1,o=new this(u);++e<i;)h(t[e],e);return o;function h(t,e){r.resolve(t).then((function(t){s[e]=t,++a!==i||n||(n=!0,l.resolve(o,s))}),(function(t){n||(n=!0,l.reject(o,t))}))}},o.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,i=!1;if(!r)return this.resolve([]);for(var a,n=-1,s=new this(u);++n<r;)a=t[n],this.resolve(a).then((function(t){i||(i=!0,l.resolve(s,t))}),(function(t){i||(i=!0,l.reject(s,t))}));return s}},{immediate:36}],38:[function(t,e,r){"use strict";var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){"use strict";var a=t("./zlib/deflate"),o=t("./utils/common"),h=t("./utils/strings"),n=t("./zlib/messages"),s=t("./zlib/zstream"),u=Object.prototype.toString;function p(t){if(!(this instanceof p))return new p(t);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(n[r]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?h.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=a.deflateSetDictionary(this.strm,i)))throw new Error(n[r]);this._dict_set=!0}}function i(t,e){var r=new p(e);if(r.push(t,!0),r.err)throw r.msg||n[r.err];return r.result}p.prototype.push=function(t,e){var r,i,n=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?n.input=h.string2buf(t):"[object ArrayBuffer]"===u.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(s),n.next_out=0,n.avail_out=s),1!==(r=a.deflate(n,i))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(h.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==r);return 4===i?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==i||(this.onEnd(0),!(n.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=p,r.deflate=i,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){"use strict";var d=t("./zlib/inflate"),c=t("./utils/common"),p=t("./utils/strings"),m=t("./zlib/constants"),i=t("./zlib/messages"),n=t("./zlib/zstream"),s=t("./zlib/gzheader"),_=Object.prototype.toString;function a(t){if(!(this instanceof a))return new a(t);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var r=d.inflateInit2(this.strm,e.windowBits);if(r!==m.Z_OK)throw new Error(i[r]);this.header=new s,d.inflateGetHeader(this.strm,this.header)}function o(t,e){var r=new a(e);if(r.push(t,!0),r.err)throw r.msg||i[r.err];return r.result}a.prototype.push=function(t,e){var r,i,n,s,a,o,h=this.strm,u=this.options.chunkSize,l=this.options.dictionary,f=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?m.Z_FINISH:m.Z_NO_FLUSH,"string"==typeof t?h.input=p.binstring2buf(t):"[object ArrayBuffer]"===_.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new c.Buf8(u),h.next_out=0,h.avail_out=u),(r=d.inflate(h,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&l&&(o="string"==typeof l?p.string2buf(l):"[object ArrayBuffer]"===_.call(l)?new Uint8Array(l):l,r=d.inflateSetDictionary(this.strm,o)),r===m.Z_BUF_ERROR&&!0===f&&(r=m.Z_OK,f=!1),r!==m.Z_STREAM_END&&r!==m.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==m.Z_STREAM_END&&(0!==h.avail_in||i!==m.Z_FINISH&&i!==m.Z_SYNC_FLUSH)||("string"===this.options.to?(n=p.utf8border(h.output,h.next_out),s=h.next_out-n,a=p.buf2string(h.output,n),h.next_out=s,h.avail_out=u-s,s&&c.arraySet(h.output,h.output,n,s,0),this.onData(a)):this.onData(c.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(f=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==m.Z_STREAM_END);return r===m.Z_STREAM_END&&(i=m.Z_FINISH),i===m.Z_FINISH?(r=d.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===m.Z_OK):i!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(h.avail_out=0))},a.prototype.onData=function(t){this.chunks.push(t)},a.prototype.onEnd=function(t){t===m.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=a,r.inflate=o,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},r.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+i),n);else for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){var e,r,i,n,s,a;for(e=i=0,r=t.length;e<r;e++)i+=t[e].length;for(a=new Uint8Array(i),e=n=0,r=t.length;e<r;e++)s=t[e],a.set(s,n),n+=s.length;return a}},s={arraySet:function(t,e,r,i,n){for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(i)},{}],42:[function(t,e,r){"use strict";var h=t("./common"),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var u=new h.Buf8(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function l(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&n))return String.fromCharCode.apply(null,h.shrinkBuf(t,e));for(var r="",i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}u[254]=u[254]=1,r.string2buf=function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new h.Buf8(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return l(t,t.length)},r.binstring2buf=function(t){for(var e=new h.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,n,s,a=e||t.length,o=new Array(2*a);for(r=i=0;r<a;)if((n=t[r++])<128)o[i++]=n;else if(4<(s=u[n]))o[i++]=65533,r+=s-1;else{for(n&=2===s?31:3===s?15:7;1<s&&r<a;)n=n<<6|63&t[r++],s--;1<s?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return l(o,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+u[t[r]]>e?r:e}},{"./common":41}],43:[function(t,e,r){"use strict";e.exports=function(t,e,r,i){for(var n=65535&t|0,s=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(n=n+e[i++]|0)|0,--a;);n%=65521,s%=65521}return n|s<<16|0}},{}],44:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){"use strict";var o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,r){"use strict";var h,d=t("../utils/common"),u=t("./trees"),c=t("./adler32"),p=t("./crc32"),i=t("./messages"),_=-2,S=258,z=262,E=113;function R(t,e){return t.msg=i[e],e}function T(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function F(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(d.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function N(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,F(t.strm)}function U(t,e){t.pending_buf[t.pending++]=e}function P(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var r,i,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-z?t.strstart-(t.w_size-z):0,u=t.window,l=t.w_mask,f=t.prev,d=t.strstart+S,c=u[s+a-1],p=u[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(r=e)+a]===p&&u[r+a-1]===c&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(i=S-(d-s),s=d-S,a<i){if(t.match_start=e,o<=(a=i))break;c=u[s+a-1],p=u[s+a]}}}while((e=f[e&l])>h&&0!=--n);return a<=t.lookahead?a:t.lookahead}function j(t){var e,r,i,n,s,a,o,h,u,l,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-z)){for(d.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=r=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--r;);for(e=r=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--r;);n+=f}if(0===t.strm.avail_in)break;if(a=t.strm,o=t.window,h=t.strstart+t.lookahead,l=void 0,(u=n)<(l=a.avail_in)&&(l=u),r=0===l?0:(a.avail_in-=l,d.arraySet(o,a.input,a.next_in,l,h),1===a.state.wrap?a.adler=c(a.adler,o,l,h):2===a.state.wrap&&(a.adler=p(a.adler,o,l,h)),a.next_in+=l,a.total_in+=l,l),t.lookahead+=r,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+3-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<z&&0!==t.strm.avail_in)}function Z(t,e){for(var r,i;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r)),t.match_length>=3)if(i=u._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(N(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(N(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?1:2}function W(t,e){for(var r,i,n;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-3,i=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(N(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=u._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(N(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?1:2}function M(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(1146),this.dyn_dtree=new d.Buf16(122),this.bl_tree=new d.Buf16(78),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(16),this.heap=new d.Buf16(573),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(573),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:E,t.adler=2===e.wrap?0:1,e.last_flush=0,u._tr_init(e),0):R(t,_)}function K(t){var e=G(t);return 0===e&&function(t){t.window_size=2*t.w_size,D(t.head),t.max_lazy_match=h[t.level].max_lazy,t.good_match=h[t.level].good_length,t.nice_match=h[t.level].nice_length,t.max_chain_length=h[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function Y(t,e,r,i,n,s){if(!t)return _;var a=1;if(-1===e&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),n<1||9<n||8!==r||i<8||15<i||e<0||9<e||s<0||4<s)return R(t,_);8===i&&(i=9);var o=new H;return(t.state=o).strm=t,o.wrap=a,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new d.Buf8(2*o.w_size),o.head=new d.Buf16(o.hash_size),o.prev=new d.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new d.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,K(t)}h=[new M(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(j(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,N(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-z&&(N(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(N(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(N(t,!1),t.strm.avail_out),1)})),new M(4,4,8,4,Z),new M(4,5,16,8,Z),new M(4,6,32,32,Z),new M(4,4,16,16,W),new M(8,16,32,32,W),new M(8,16,128,128,W),new M(8,32,128,256,W),new M(32,128,258,1024,W),new M(32,258,258,4096,W)],r.deflateInit=function(t,e){return Y(t,e,8,15,8,0)},r.deflateInit2=Y,r.deflateReset=K,r.deflateResetKeep=G,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?_:(t.state.gzhead=e,0):_},r.deflate=function(t,e){var r,i,n,s;if(!t||!t.state||5<e||e<0)return t?R(t,_):_;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return R(t,0===t.avail_out?-5:_);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,U(i,31),U(i,139),U(i,8),i.gzhead?(U(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),U(i,255&i.gzhead.time),U(i,i.gzhead.time>>8&255),U(i,i.gzhead.time>>16&255),U(i,i.gzhead.time>>24&255),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(U(i,255&i.gzhead.extra.length),U(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=p(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(U(i,0),U(i,0),U(i,0),U(i,0),U(i,0),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,3),i.status=E);else{var a=8+(i.w_bits-8<<4)<<8;a|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=32),a+=31-a%31,i.status=E,P(i,a),0!==i.strstart&&(P(i,t.adler>>>16),P(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending!==i.pending_buf_size));)U(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&F(t),i.pending+2<=i.pending_buf_size&&(U(i,255&t.adler),U(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(F(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&T(e)<=T(r)&&4!==e)return R(t,-5);if(666===i.status&&0!==t.avail_in)return R(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var o=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(j(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(N(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(N(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,i,n,s,a=t.window;;){if(t.lookahead<=S){if(j(t),t.lookahead<=S&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(i=a[n=t.strstart-1])===a[++n]&&i===a[++n]&&i===a[++n]){s=t.strstart+S;do{}while(i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&n<s);t.match_length=S-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=u._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(N(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(N(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?1:2}(i,e):h[i.level].func(i,e);if(3!==o&&4!==o||(i.status=666),1===o||3===o)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===o&&(1===e?u._tr_align(i):5!==e&&(u._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),F(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(U(i,255&t.adler),U(i,t.adler>>8&255),U(i,t.adler>>16&255),U(i,t.adler>>24&255),U(i,255&t.total_in),U(i,t.total_in>>8&255),U(i,t.total_in>>16&255),U(i,t.total_in>>24&255)):(P(i,t.adler>>>16),P(i,65535&t.adler)),F(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?R(t,_):(t.state=null,e===E?R(t,-3):0):_},r.deflateSetDictionary=function(t,e){var r,i,n,s,a,o,h,u,l=e.length;if(!t||!t.state)return _;if(2===(s=(r=t.state).wrap)||1===s&&42!==r.status||r.lookahead)return _;for(1===s&&(t.adler=c(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new d.Buf8(r.w_size),d.arraySet(u,e,l-r.w_size,r.w_size,0),e=u,l=r.w_size),a=t.avail_in,o=t.next_in,h=t.input,t.avail_in=l,t.next_in=0,t.input=e,j(r);r.lookahead>=3;){for(i=r.strstart,n=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--n;);r.strstart=i,r.lookahead=2,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=a,r.wrap=s,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){"use strict";e.exports=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C;r=t.state,i=t.next_in,z=t.input,n=i+(t.avail_in-5),s=t.next_out,C=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,d=r.window,c=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=m[c&g];e:for(;;){if(c>>>=y=v>>>24,p-=y,0==(y=v>>>16&255))C[s++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=m[(65535&v)+(c&(1<<y)-1)];continue e}if(32&y){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&v,(y&=15)&&(p<y&&(c+=z[i++]<<p,p+=8),w+=c&(1<<y)-1,c>>>=y,p-=y),p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=_[c&b];r:for(;;){if(c>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=_[(65535&v)+(c&(1<<y)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(k=65535&v,p<(y&=15)&&(c+=z[i++]<<p,(p+=8)<y&&(c+=z[i++]<<p,p+=8)),h<(k+=c&(1<<y)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(c>>>=y,p-=y,(y=s-a)<k){if(l<(y=k-y)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(S=d,(x=0)===f){if(x+=u-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}}else if(f<y){if(x+=u+f-y,(y-=f)<w){for(w-=y;C[s++]=d[x++],--y;);if(x=0,f<w){for(w-=y=f;C[s++]=d[x++],--y;);x=s-k,S=C}}}else if(x+=f-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}for(;2<w;)C[s++]=S[x++],C[s++]=S[x++],C[s++]=S[x++],w-=3;w&&(C[s++]=S[x++],1<w&&(C[s++]=S[x++]))}else{for(x=s-k;C[s++]=C[x++],C[s++]=C[x++],C[s++]=C[x++],2<(w-=3););w&&(C[s++]=C[x++],1<w&&(C[s++]=C[x++]))}break}}break}}while(i<n&&s<o);i-=w=p>>3,c&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<o?o-s+257:257-(s-o),r.hold=c,r.bits=p}},{}],49:[function(t,e,r){"use strict";var I=t("../utils/common"),O=t("./adler32"),B=t("./crc32"),R=t("./inffast"),T=t("./inftrees"),U=-2;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new I.Buf32(852),e.distcode=e.distdyn=new I.Buf32(592),e.sane=1,e.back=-1,0):U}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,a(t)):U}function h(t,e){var r,i;return t&&t.state?(i=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?U:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,o(t))):U}function u(t,e){var r,i;return t?(i=new s,(t.state=i).window=null,0!==(r=h(t,e))&&(t.state=null),r):U}var l,f,d=!0;function j(t){if(d){var e;for(l=new I.Buf32(512),f=new I.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(T(1,t.lens,0,288,l,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;T(2,t.lens,0,32,f,0,t.work,{bits:5}),d=!1}t.lencode=l,t.lenbits=9,t.distcode=f,t.distbits=5}function Z(t,e,r,i){var n,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new I.Buf8(s.wsize)),i>=s.wsize?(I.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(n=s.wsize-s.wnext)&&(n=i),I.arraySet(s.window,e,r-i,n,s.wnext),(i-=n)?(I.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}r.inflateReset=o,r.inflateReset2=h,r.inflateResetKeep=a,r.inflateInit=function(t){return u(t,15)},r.inflateInit2=u,r.inflate=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C=0,E=new I.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return U;12===(r=t.state).mode&&(r.mode=13),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,f=o,d=h,x=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(2&r.wrap&&35615===u){E[r.check=0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0),l=u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&u)){t.msg="unknown compression method",r.mode=30;break}if(l-=4,k=8+(15&(u>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<k,t.adler=r.check=1,r.mode=512&u?10:12,l=u=0;break;case 2:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.flags=u,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=3;case 3:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=B(r.check,E,4,0)),l=u=0,r.mode=4;case 4:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(o<(c=r.length)&&(c=o),c&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),I.arraySet(r.head.extra,i,s,c,k)),512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,r.length-=c),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}l=u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}t.adler=r.check=L(u),l=u=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){u>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}switch(r.last=1&u,l-=1,3&(u>>>=1)){case 0:r.mode=14;break;case 1:if(j(r),r.mode=20,6!==e)break;u>>>=2,l-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&u,l=u=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(c=r.length){if(o<c&&(c=o),h<c&&(c=h),0===c)break t;I.arraySet(n,i,s,c,a),o-=c,s+=c,h-=c,a+=c,r.length-=c;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.lens[A[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},x=T(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(b<16)u>>>=_,l-=_,r.lens[r.have++]=b;else{if(16===b){for(z=_+2;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u>>>=_,l-=_,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}k=r.lens[r.have-1],c=3+(3&u),u>>>=2,l-=2}else if(17===b){for(z=_+3;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=3+(7&(u>>>=_)),u>>>=3,l-=3}else{for(z=_+7;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=11+(127&(u>>>=_)),u>>>=7,l-=7}if(r.have+c>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;c--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},x=T(1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},x=T(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,x){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=o&&258<=h){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,R(t,d),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(g&&0==(240&g)){for(v=_,y=g,w=b;g=(C=r.lencode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,r.length=b,0===g){r.mode=26;break}if(32&g){r.back=-1,r.mode=12;break}if(64&g){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&g,r.mode=22;case 22:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;g=(C=r.distcode[u&(1<<r.distbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(0==(240&g)){for(v=_,y=g,w=b;g=(C=r.distcode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,64&g){t.msg="invalid distance code",r.mode=30;break}r.offset=b,r.extra=15&g,r.mode=24;case 24:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===h)break t;if(c=d-h,r.offset>c){if((c=r.offset-c)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}p=c>r.wnext?(c-=r.wnext,r.wsize-c):r.wnext-c,c>r.length&&(c=r.length),m=r.window}else m=n,p=a-r.offset,c=r.length;for(h<c&&(c=h),h-=c,r.length-=c;n[a++]=m[p++],--c;);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;n[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break t;o--,u|=i[s++]<<l,l+=8}if(d-=h,t.total_out+=d,r.total+=d,d&&(t.adler=r.check=r.flags?B(r.check,n,d,a-d):O(r.check,n,d,a-d)),d=h,(r.flags?u:L(u))!==r.check){t.msg="incorrect data check",r.mode=30;break}l=u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}l=u=0}r.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return U}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,(r.wsize||d!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&Z(t,t.output,t.next_out,d-t.avail_out)?(r.mode=31,-4):(f-=t.avail_in,d-=t.avail_out,t.total_in+=f,t.total_out+=d,r.total+=d,r.wrap&&d&&(t.adler=r.check=r.flags?B(r.check,n,d,t.next_out-d):O(r.check,n,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==f&&0===d||4===e)&&0===x&&(x=-5),x)},r.inflateEnd=function(t){if(!t||!t.state)return U;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?U:((r.head=e).done=!1,0):U},r.inflateSetDictionary=function(t,e){var r,i=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?U:11===r.mode&&O(1,e,i,0)!==r.check?-3:Z(t,e,i,i)?(r.mode=31,-4):(r.havedict=1,0):U},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){"use strict";var D=t("../utils/common"),F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,i,n,s,a,o){var h,u,l,f,d,c,p,m,_,g=o.bits,b=0,v=0,y=0,w=0,k=0,x=0,S=0,z=0,C=0,E=0,A=null,I=0,O=new D.Buf16(16),B=new D.Buf16(16),R=null,T=0;for(b=0;b<=15;b++)O[b]=0;for(v=0;v<i;v++)O[e[r+v]]++;for(k=g,w=15;1<=w&&0===O[w];w--);if(w<k&&(k=w),0===w)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(y=1;y<w&&0===O[y];y++);for(k<y&&(k=y),b=z=1;b<=15;b++)if(z<<=1,(z-=O[b])<0)return-1;if(0<z&&(0===t||1!==w))return-1;for(B[1]=0,b=1;b<15;b++)B[b+1]=B[b]+O[b];for(v=0;v<i;v++)0!==e[r+v]&&(a[B[e[r+v]]++]=v);if(c=0===t?(A=R=a,19):1===t?(A=F,I-=257,R=N,T-=257,256):(A=U,R=P,-1),b=y,d=s,S=v=E=0,l=-1,f=(C=1<<(x=k))-1,1===t&&852<C||2===t&&592<C)return 1;for(;;){for(p=b-S,_=a[v]<c?(m=0,a[v]):a[v]>c?(m=R[T+a[v]],A[I+a[v]]):(m=96,0),h=1<<b-S,y=u=1<<x;n[d+(E>>S)+(u-=h)]=p<<24|m<<16|_|0,0!==u;);for(h=1<<b-1;E&h;)h>>=1;if(0!==h?(E&=h-1,E+=h):E=0,v++,0==--O[b]){if(b===w)break;b=e[r+a[v]]}if(k<b&&(E&f)!==l){for(0===S&&(S=k),d+=y,z=1<<(x=b-S);x+S<w&&!((z-=O[x+S])<=0);)x++,z<<=1;if(C+=1<<x,1===t&&852<C||2===t&&592<C)return 1;n[l=E&f]=k<<24|x<<16|d-s|0}}return 0!==E&&(n[d+E]=b-S<<24|64<<16|0),o.bits=k,0}},{"../utils/common":41}],51:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){"use strict";var n=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var u=256,l=286,f=30,g=15,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(576);i(z);var C=new Array(60);i(C);var E=new Array(512);i(E);var A=new Array(256);i(A);var I=new Array(29);i(I);var O,B,R,T=new Array(f);function D(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function F(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function N(t){return t<256?E[t]:E[256+(t>>>7)]}function U(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function P(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,U(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function L(t,e,r){P(t,r[2*e],r[2*e+1])}function j(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function Z(t,e,r){var i,n,s=new Array(16),a=0;for(i=1;i<=g;i++)s[i]=a=a+r[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=j(s[o]++,o))}}function W(t){var e;for(e=0;e<l;e++)t.dyn_ltree[2*e]=0;for(e=0;e<f;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?U(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function H(t,e,r,i){var n=2*e,s=2*r;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]}function G(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&H(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!H(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function K(t,e,r){var i,n,s,a,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(s=A[n])+u+1,e),0!==(a=w[s])&&P(t,n-=I[s],a),L(t,s=N(--i),r),0!==(a=k[s])&&P(t,i-=T[s],a)),o<t.last_lit;);L(t,256,e)}function Y(t,e){var r,i,n,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<h;r++)0!==s[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):s[2*r+1]=0;for(;t.heap_len<2;)s[2*(n=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=a[2*n+1]);for(e.max_code=u,r=t.heap_len>>1;1<=r;r--)G(t,s,r);for(n=h;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],G(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=i,s[2*n]=s[2*r]+s[2*i],t.depth[n]=(t.depth[r]>=t.depth[i]?t.depth[r]:t.depth[i])+1,s[2*r+1]=s[2*i+1]=n,t.heap[1]=n++,G(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,i,n,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(s=0;s<=g;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)p<(s=h[2*h[2*(i=t.heap[r])+1]+1]+1)&&(s=p,m++),h[2*i+1]=s,u<i||(t.bl_count[s]++,a=0,c<=i&&(a=d[i-c]),o=h[2*i],t.opt_len+=o*(s+a),f&&(t.static_len+=o*(l[2*i+1]+a)));if(0!==m){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,m-=2}while(0<m);for(s=p;0!==s;s--)for(i=t.bl_count[s];0!==i;)u<(n=t.heap[--r])||(h[2*n+1]!==s&&(t.opt_len+=(s-h[2*n+1])*h[2*n],h[2*n+1]=s),i--)}}(t,e),Z(s,u,t.bl_count)}function X(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=e[2*(i+1)+1],++o<h&&n===a||(o<u?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4))}function V(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),i=0;i<=r;i++)if(n=a,a=e[2*(i+1)+1],!(++o<h&&n===a)){if(o<u)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==s&&(L(t,n,t.bl_tree),o--),L(t,16,t.bl_tree),P(t,o-3,2)):o<=10?(L(t,17,t.bl_tree),P(t,o-3,3)):(L(t,18,t.bl_tree),P(t,o-11,7));s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4)}}i(T);var q=!1;function J(t,e,r,i){P(t,0+(i?1:0),3),function(t,e,r,i){M(t),U(t,r),U(t,~r),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r)}r._tr_init=function(t){q||(function(){var t,e,r,i,n,s=new Array(16);for(i=r=0;i<28;i++)for(I[i]=r,t=0;t<1<<w[i];t++)A[r++]=i;for(A[r-1]=i,i=n=0;i<16;i++)for(T[i]=n,t=0;t<1<<k[i];t++)E[n++]=i;for(n>>=7;i<f;i++)for(T[i]=n<<7,t=0;t<1<<k[i]-7;t++)E[256+n++]=i;for(e=0;e<=g;e++)s[e]=0;for(t=0;t<=143;)z[2*t+1]=8,t++,s[8]++;for(;t<=255;)z[2*t+1]=9,t++,s[9]++;for(;t<=279;)z[2*t+1]=7,t++,s[7]++;for(;t<=287;)z[2*t+1]=8,t++,s[8]++;for(Z(z,287,s),t=0;t<f;t++)C[2*t+1]=5,C[2*t]=j(t,5);O=new D(z,w,257,l,g),B=new D(C,k,0,f,g),R=new D(new Array(0),x,0,19,7)}(),q=!0),t.l_desc=new F(t.dyn_ltree,O),t.d_desc=new F(t.dyn_dtree,B),t.bl_desc=new F(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,W(t)},r._tr_stored_block=J,r._tr_flush_block=function(t,e,r,i){var n,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<u;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),Y(t,t.l_desc),Y(t,t.d_desc),a=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*S[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==e?J(t,e,r,i):4===t.strategy||s===n?(P(t,2+(i?1:0),3),K(t,z,C)):(P(t,4+(i?1:0),3),function(t,e,r,i){var n;for(P(t,e-257,5),P(t,r-1,5),P(t,i-4,4),n=0;n<i;n++)P(t,t.bl_tree[2*S[n]+1],3);V(t,t.dyn_ltree,e-1),V(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),K(t,t.dyn_ltree,t.dyn_dtree)),W(t),i&&M(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(A[r]+u+1)]++,t.dyn_dtree[2*N(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){P(t,2,3),L(t,256,z),function(t){16===t.bi_valid?(U(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){"use strict";e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)}).call(this,__webpack_require__(121).Buffer,__webpack_require__(11),__webpack_require__(125).setImmediate)},function(module,exports,__webpack_require__){"use strict";(function(global){var base64=__webpack_require__(122),ieee754=__webpack_require__(123),isArray=__webpack_require__(124);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding),actual=(that=createBuffer(that,length)).write(string,encoding);actual!==length&&(that=that.slice(0,actual));return that}(that,value,encodingOrOffset):function(that,obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length||obj.copy(that,0,0,len),that}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||(val=obj.length)!=val?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}var val;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function(codePoints){var len=codePoints.length;if(len<=4096)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=4096));return res}(res)}exports.Buffer=Buffer,exports.SlowBuffer=function(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return function(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function(start,end){var newBuf,len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function(str){if((str=function(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}}).call(this,__webpack_require__(11))},function(module,exports,__webpack_require__){"use strict";exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function(b64){var tmp,i,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen;for(i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports,__webpack_require__){(function(global){var scope=void 0!==global&&global||"undefined"!=typeof self&&self||window,apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout((function(){item._onTimeout&&item._onTimeout()}),msecs))},__webpack_require__(126),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(11))},function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,html,channel,messagePrefix,onGlobalMessage,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?registerImmediate=function(handle){process.nextTick((function(){runIfPresent(handle)}))}:!function(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?((channel=new MessageChannel).port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}):doc&&"onreadystatechange"in doc.createElement("script")?(html=doc.documentElement,registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}):registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}:(messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))},global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}),attachTo.setImmediate=function(callback){var arguments$1=arguments;"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments$1[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(void 0,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(this,__webpack_require__(11),__webpack_require__(127))},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var arguments$1=arguments,args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments$1[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){(function(global){module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){(function(global){"use strict";var scheduleDrain,draining,Mutation=global.MutationObserver||global.WebKitMutationObserver;if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode("");observer.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(global.setImmediate||void 0===global.MessageChannel)scheduleDrain="document"in global&&"onreadystatechange"in global.document.createElement("script")?function(){var scriptEl=global.document.createElement("script");scriptEl.onreadystatechange=function(){nextTick(),scriptEl.onreadystatechange=null,scriptEl.parentNode.removeChild(scriptEl),scriptEl=null},global.document.documentElement.appendChild(scriptEl)}:function(){setTimeout(nextTick,0)};else{var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=function(){channel.port2.postMessage(0)}}var queue=[];function nextTick(){var i,oldQueue;draining=!0;for(var len=queue.length;len;){for(oldQueue=queue,queue=[],i=-1;++i<len;)oldQueue[i]();len=queue.length}draining=!1}module.exports=function(task){1!==queue.push(task)||draining||scheduleDrain()}}).call(this,void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(_dereq_,module,exports){"use strict";var immediate=_dereq_(1);function INTERNAL(){}var handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"];function Promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function");this.state=PENDING,this.queue=[],this.outcome=void 0,resolver!==INTERNAL&&safelyResolveThenable(this,resolver)}function QueueItem(promise,onFulfilled,onRejected){this.promise=promise,"function"==typeof onFulfilled&&(this.onFulfilled=onFulfilled,this.callFulfilled=this.otherCallFulfilled),"function"==typeof onRejected&&(this.onRejected=onRejected,this.callRejected=this.otherCallRejected)}function unwrap(promise,func,value){immediate((function(){var returnValue;try{returnValue=func(value)}catch(e){return handlers.reject(promise,e)}returnValue===promise?handlers.reject(promise,new TypeError("Cannot resolve promise with itself")):handlers.resolve(promise,returnValue)}))}function getThen(obj){var then=obj&&obj.then;if(obj&&("object"==typeof obj||"function"==typeof obj)&&"function"==typeof then)return function(){then.apply(obj,arguments)}}function safelyResolveThenable(self,thenable){var called=!1;function onError(value){called||(called=!0,handlers.reject(self,value))}function onSuccess(value){called||(called=!0,handlers.resolve(self,value))}var result=tryCatch((function(){thenable(onSuccess,onError)}));"error"===result.status&&onError(result.value)}function tryCatch(func,value){var out={};try{out.value=func(value),out.status="success"}catch(e){out.status="error",out.value=e}return out}module.exports=Promise,Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){if("function"!=typeof onFulfilled&&this.state===FULFILLED||"function"!=typeof onRejected&&this.state===REJECTED)return this;var promise=new this.constructor(INTERNAL);return this.state!==PENDING?unwrap(promise,this.state===FULFILLED?onFulfilled:onRejected,this.outcome):this.queue.push(new QueueItem(promise,onFulfilled,onRejected)),promise},QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)},QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)},QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)},QueueItem.prototype.otherCallRejected=function(value){unwrap(this.promise,this.onRejected,value)},handlers.resolve=function(self,value){var result=tryCatch(getThen,value);if("error"===result.status)return handlers.reject(self,result.value);var thenable=result.value;if(thenable)safelyResolveThenable(self,thenable);else{self.state=FULFILLED,self.outcome=value;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callFulfilled(value)}return self},handlers.reject=function(self,error){self.state=REJECTED,self.outcome=error;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callRejected(error);return self},Promise.resolve=function(value){return value instanceof this?value:handlers.resolve(new this(INTERNAL),value)},Promise.reject=function(reason){var promise=new this(INTERNAL);return handlers.reject(promise,reason)},Promise.all=function(iterable){var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var values=new Array(len),resolved=0,i=-1,promise=new this(INTERNAL);++i<len;)allResolver(iterable[i],i);return promise;function allResolver(value,i){self.resolve(value).then((function(outValue){values[i]=outValue,++resolved!==len||called||(called=!0,handlers.resolve(promise,values))}),(function(error){called||(called=!0,handlers.reject(promise,error))}))}},Promise.race=function(iterable){var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var value,i=-1,promise=new this(INTERNAL);++i<len;)value=iterable[i],self.resolve(value).then((function(response){called||(called=!0,handlers.resolve(promise,response))}),(function(error){called||(called=!0,handlers.reject(promise,error))}));return promise}},{1:1}],3:[function(_dereq_,module,exports){(function(global){"use strict";"function"!=typeof global.Promise&&(global.Promise=_dereq_(2))}).call(this,void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(_dereq_,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},idb=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function createBlob(parts,properties){parts=parts||[],properties=properties||{};try{return new Blob(parts,properties)}catch(e){if("TypeError"!==e.name)throw e;for(var builder=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<parts.length;i+=1)builder.append(parts[i]);return builder.getBlob(properties.type)}}"undefined"==typeof Promise&&_dereq_(3);var Promise$1=Promise;function executeCallback(promise,callback){callback&&promise.then((function(result){callback(null,result)}),(function(error){callback(error)}))}function executeTwoCallbacks(promise,callback,errorCallback){"function"==typeof callback&&promise.then(callback),"function"==typeof errorCallback&&promise.catch(errorCallback)}function normalizeKey(key){return"string"!=typeof key&&(console.warn(key+" used as a key, but it is not a string."),key=String(key)),key}function getCallback(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var supportsBlobs=void 0,dbContexts={},toString=Object.prototype.toString;function _checkBlobSupport(idb){return"boolean"==typeof supportsBlobs?Promise$1.resolve(supportsBlobs):function(idb){return new Promise$1((function(resolve){var txn=idb.transaction("local-forage-detect-blob-support","readwrite"),blob=createBlob([""]);txn.objectStore("local-forage-detect-blob-support").put(blob,"key"),txn.onabort=function(e){e.preventDefault(),e.stopPropagation(),resolve(!1)},txn.oncomplete=function(){var matchedChrome=navigator.userAgent.match(/Chrome\/(\d+)/),matchedEdge=navigator.userAgent.match(/Edge\//);resolve(matchedEdge||!matchedChrome||parseInt(matchedChrome[1],10)>=43)}})).catch((function(){return!1}))}(idb).then((function(value){return supportsBlobs=value}))}function _deferReadiness(dbInfo){var dbContext=dbContexts[dbInfo.name],deferredOperation={};deferredOperation.promise=new Promise$1((function(resolve,reject){deferredOperation.resolve=resolve,deferredOperation.reject=reject})),dbContext.deferredOperations.push(deferredOperation),dbContext.dbReady?dbContext.dbReady=dbContext.dbReady.then((function(){return deferredOperation.promise})):dbContext.dbReady=deferredOperation.promise}function _advanceReadiness(dbInfo){var deferredOperation=dbContexts[dbInfo.name].deferredOperations.pop();if(deferredOperation)return deferredOperation.resolve(),deferredOperation.promise}function _rejectReadiness(dbInfo,err){var deferredOperation=dbContexts[dbInfo.name].deferredOperations.pop();if(deferredOperation)return deferredOperation.reject(err),deferredOperation.promise}function _getConnection(dbInfo,upgradeNeeded){return new Promise$1((function(resolve,reject){if(dbContexts[dbInfo.name]=dbContexts[dbInfo.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},dbInfo.db){if(!upgradeNeeded)return resolve(dbInfo.db);_deferReadiness(dbInfo),dbInfo.db.close()}var dbArgs=[dbInfo.name];upgradeNeeded&&dbArgs.push(dbInfo.version);var openreq=idb.open.apply(idb,dbArgs);upgradeNeeded&&(openreq.onupgradeneeded=function(e){var db=openreq.result;try{db.createObjectStore(dbInfo.storeName),e.oldVersion<=1&&db.createObjectStore("local-forage-detect-blob-support")}catch(ex){if("ConstraintError"!==ex.name)throw ex;console.warn('The database "'+dbInfo.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+dbInfo.storeName+'" already exists.')}}),openreq.onerror=function(e){e.preventDefault(),reject(openreq.error)},openreq.onsuccess=function(){resolve(openreq.result),_advanceReadiness(dbInfo)}}))}function _getOriginalConnection(dbInfo){return _getConnection(dbInfo,!1)}function _getUpgradedConnection(dbInfo){return _getConnection(dbInfo,!0)}function _isUpgradeNeeded(dbInfo,defaultVersion){if(!dbInfo.db)return!0;var isNewStore=!dbInfo.db.objectStoreNames.contains(dbInfo.storeName),isDowngrade=dbInfo.version<dbInfo.db.version,isUpgrade=dbInfo.version>dbInfo.db.version;if(isDowngrade&&(dbInfo.version!==defaultVersion&&console.warn('The database "'+dbInfo.name+"\" can't be downgraded from version "+dbInfo.db.version+" to version "+dbInfo.version+"."),dbInfo.version=dbInfo.db.version),isUpgrade||isNewStore){if(isNewStore){var incVersion=dbInfo.db.version+1;incVersion>dbInfo.version&&(dbInfo.version=incVersion)}return!0}return!1}function _decodeBlob(encodedBlob){return createBlob([function(bin){for(var length=bin.length,buf=new ArrayBuffer(length),arr=new Uint8Array(buf),i=0;i<length;i++)arr[i]=bin.charCodeAt(i);return buf}(atob(encodedBlob.data))],{type:encodedBlob.type})}function _isEncodedBlob(value){return value&&value.__local_forage_encoded_blob}function _fullyReady(callback){var self=this,promise=self._initReady().then((function(){var dbContext=dbContexts[self._dbInfo.name];if(dbContext&&dbContext.dbReady)return dbContext.dbReady}));return executeTwoCallbacks(promise,callback,callback),promise}function createTransaction(dbInfo,mode,callback,retries){void 0===retries&&(retries=1);try{var tx=dbInfo.db.transaction(dbInfo.storeName,mode);callback(null,tx)}catch(err){if(retries>0&&(!dbInfo.db||"InvalidStateError"===err.name||"NotFoundError"===err.name))return Promise$1.resolve().then((function(){if(!dbInfo.db||"NotFoundError"===err.name&&!dbInfo.db.objectStoreNames.contains(dbInfo.storeName)&&dbInfo.version<=dbInfo.db.version)return dbInfo.db&&(dbInfo.version=dbInfo.db.version+1),_getUpgradedConnection(dbInfo)})).then((function(){return function(dbInfo){_deferReadiness(dbInfo);for(var dbContext=dbContexts[dbInfo.name],forages=dbContext.forages,i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db&&(forage._dbInfo.db.close(),forage._dbInfo.db=null)}return dbInfo.db=null,_getOriginalConnection(dbInfo).then((function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo)?_getUpgradedConnection(dbInfo):db})).then((function(db){dbInfo.db=dbContext.db=db;for(var i=0;i<forages.length;i++)forages[i]._dbInfo.db=db})).catch((function(err){throw _rejectReadiness(dbInfo,err),err}))}(dbInfo).then((function(){createTransaction(dbInfo,mode,callback,retries-1)}))})).catch(callback);callback(err)}}var asyncStorage={_driver:"asyncStorage",_initStorage:function(options){var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]=options[i];var dbContext=dbContexts[dbInfo.name];dbContext||(dbContext={forages:[],db:null,dbReady:null,deferredOperations:[]},dbContexts[dbInfo.name]=dbContext),dbContext.forages.push(self),self._initReady||(self._initReady=self.ready,self.ready=_fullyReady);var initPromises=[];function ignoreErrors(){return Promise$1.resolve()}for(var j=0;j<dbContext.forages.length;j++){var forage=dbContext.forages[j];forage!==self&&initPromises.push(forage._initReady().catch(ignoreErrors))}var forages=dbContext.forages.slice(0);return Promise$1.all(initPromises).then((function(){return dbInfo.db=dbContext.db,_getOriginalConnection(dbInfo)})).then((function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo,self._defaultConfig.version)?_getUpgradedConnection(dbInfo):db})).then((function(db){dbInfo.db=dbContext.db=db,self._dbInfo=dbInfo;for(var k=0;k<forages.length;k++){var forage=forages[k];forage!==self&&(forage._dbInfo.db=dbInfo.db,forage._dbInfo.version=dbInfo.version)}}))},_support:function(){try{if(!idb)return!1;var isSafari="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),hasFetch="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!isSafari||hasFetch)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(iterator,callback){var self=this,promise=new Promise$1((function(resolve,reject){self.ready().then((function(){createTransaction(self._dbInfo,"readonly",(function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).openCursor(),iterationNumber=1;req.onsuccess=function(){var cursor=req.result;if(cursor){var value=cursor.value;_isEncodedBlob(value)&&(value=_decodeBlob(value));var result=iterator(value,cursor.key,iterationNumber++);void 0!==result?resolve(result):cursor.continue()}else resolve()},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}}))})).catch(reject)}));return executeCallback(promise,callback),promise},getItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1((function(resolve,reject){self.ready().then((function(){createTransaction(self._dbInfo,"readonly",(function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).get(key);req.onsuccess=function(){var value=req.result;void 0===value&&(value=null),_isEncodedBlob(value)&&(value=_decodeBlob(value)),resolve(value)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}}))})).catch(reject)}));return executeCallback(promise,callback),promise},setItem:function(key,value,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1((function(resolve,reject){var dbInfo;self.ready().then((function(){return dbInfo=self._dbInfo,"[object Blob]"===toString.call(value)?_checkBlobSupport(dbInfo.db).then((function(blobSupport){return blobSupport?value:(blob=value,new Promise$1((function(resolve,reject){var reader=new FileReader;reader.onerror=reject,reader.onloadend=function(e){var base64=btoa(e.target.result||"");resolve({__local_forage_encoded_blob:!0,data:base64,type:blob.type})},reader.readAsBinaryString(blob)})));var blob})):value})).then((function(value){createTransaction(self._dbInfo,"readwrite",(function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self._dbInfo.storeName);null===value&&(value=void 0);var req=store.put(value,key);transaction.oncomplete=function(){void 0===value&&(value=null),resolve(value)},transaction.onabort=transaction.onerror=function(){var err=req.error?req.error:req.transaction.error;reject(err)}}catch(e){reject(e)}}))})).catch(reject)}));return executeCallback(promise,callback),promise},removeItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1((function(resolve,reject){self.ready().then((function(){createTransaction(self._dbInfo,"readwrite",(function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).delete(key);transaction.oncomplete=function(){resolve()},transaction.onerror=function(){reject(req.error)},transaction.onabort=function(){var err=req.error?req.error:req.transaction.error;reject(err)}}catch(e){reject(e)}}))})).catch(reject)}));return executeCallback(promise,callback),promise},clear:function(callback){var self=this,promise=new Promise$1((function(resolve,reject){self.ready().then((function(){createTransaction(self._dbInfo,"readwrite",(function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).clear();transaction.oncomplete=function(){resolve()},transaction.onabort=transaction.onerror=function(){var err=req.error?req.error:req.transaction.error;reject(err)}}catch(e){reject(e)}}))})).catch(reject)}));return executeCallback(promise,callback),promise},length:function(callback){var self=this,promise=new Promise$1((function(resolve,reject){self.ready().then((function(){createTransaction(self._dbInfo,"readonly",(function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).count();req.onsuccess=function(){resolve(req.result)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}}))})).catch(reject)}));return executeCallback(promise,callback),promise},key:function(n,callback){var self=this,promise=new Promise$1((function(resolve,reject){n<0?resolve(null):self.ready().then((function(){createTransaction(self._dbInfo,"readonly",(function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self._dbInfo.storeName),advanced=!1,req=store.openCursor();req.onsuccess=function(){var cursor=req.result;cursor?0===n||advanced?resolve(cursor.key):(advanced=!0,cursor.advance(n)):resolve(null)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}}))})).catch(reject)}));return executeCallback(promise,callback),promise},keys:function(callback){var self=this,promise=new Promise$1((function(resolve,reject){self.ready().then((function(){createTransaction(self._dbInfo,"readonly",(function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).openCursor(),keys=[];req.onsuccess=function(){var cursor=req.result;cursor?(keys.push(cursor.key),cursor.continue()):resolve(keys)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}}))})).catch(reject)}));return executeCallback(promise,callback),promise},dropInstance:function(options,callback){callback=getCallback.apply(this,arguments);var currentConfig=this.config();(options="function"!=typeof options&&options||{}).name||(options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName);var promise,self=this;if(options.name){var isCurrentDb=options.name===currentConfig.name&&self._dbInfo.db,dbPromise=isCurrentDb?Promise$1.resolve(self._dbInfo.db):_getOriginalConnection(options).then((function(db){var dbContext=dbContexts[options.name],forages=dbContext.forages;dbContext.db=db;for(var i=0;i<forages.length;i++)forages[i]._dbInfo.db=db;return db}));promise=options.storeName?dbPromise.then((function(db){if(db.objectStoreNames.contains(options.storeName)){var newVersion=db.version+1;_deferReadiness(options);var dbContext=dbContexts[options.name],forages=dbContext.forages;db.close();for(var i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db=null,forage._dbInfo.version=newVersion}return new Promise$1((function(resolve,reject){var req=idb.open(options.name,newVersion);req.onerror=function(err){req.result.close(),reject(err)},req.onupgradeneeded=function(){req.result.deleteObjectStore(options.storeName)},req.onsuccess=function(){var db=req.result;db.close(),resolve(db)}})).then((function(db){dbContext.db=db;for(var j=0;j<forages.length;j++){var _forage2=forages[j];_forage2._dbInfo.db=db,_advanceReadiness(_forage2._dbInfo)}})).catch((function(err){throw(_rejectReadiness(options,err)||Promise$1.resolve()).catch((function(){})),err}))}})):dbPromise.then((function(db){_deferReadiness(options);var dbContext=dbContexts[options.name],forages=dbContext.forages;db.close();for(var i=0;i<forages.length;i++)forages[i]._dbInfo.db=null;return new Promise$1((function(resolve,reject){var req=idb.deleteDatabase(options.name);req.onerror=req.onblocked=function(err){var db=req.result;db&&db.close(),reject(err)},req.onsuccess=function(){var db=req.result;db&&db.close(),resolve(db)}})).then((function(db){dbContext.db=db;for(var i=0;i<forages.length;i++)_advanceReadiness(forages[i]._dbInfo)})).catch((function(err){throw(_rejectReadiness(options,err)||Promise$1.resolve()).catch((function(){})),err}))}))}else promise=Promise$1.reject("Invalid arguments");return executeCallback(promise,callback),promise}},BASE_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BLOB_TYPE_PREFIX_REGEX=/^~~local_forage_type~([^~]+)~/,SERIALIZED_MARKER_LENGTH="__lfsc__:".length,TYPE_SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER_LENGTH+"arbf".length,toString$1=Object.prototype.toString;function stringToBuffer(serializedString){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*serializedString.length,len=serializedString.length,p=0;"="===serializedString[serializedString.length-1]&&(bufferLength--,"="===serializedString[serializedString.length-2]&&bufferLength--);var buffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(buffer);for(i=0;i<len;i+=4)encoded1=BASE_CHARS.indexOf(serializedString[i]),encoded2=BASE_CHARS.indexOf(serializedString[i+1]),encoded3=BASE_CHARS.indexOf(serializedString[i+2]),encoded4=BASE_CHARS.indexOf(serializedString[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return buffer}function bufferToString(buffer){var i,bytes=new Uint8Array(buffer),base64String="";for(i=0;i<bytes.length;i+=3)base64String+=BASE_CHARS[bytes[i]>>2],base64String+=BASE_CHARS[(3&bytes[i])<<4|bytes[i+1]>>4],base64String+=BASE_CHARS[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64String+=BASE_CHARS[63&bytes[i+2]];return bytes.length%3==2?base64String=base64String.substring(0,base64String.length-1)+"=":bytes.length%3==1&&(base64String=base64String.substring(0,base64String.length-2)+"=="),base64String}var localforageSerializer={serialize:function(value,callback){var valueType="";if(value&&(valueType=toString$1.call(value)),value&&("[object ArrayBuffer]"===valueType||value.buffer&&"[object ArrayBuffer]"===toString$1.call(value.buffer))){var buffer,marker="__lfsc__:";value instanceof ArrayBuffer?(buffer=value,marker+="arbf"):(buffer=value.buffer,"[object Int8Array]"===valueType?marker+="si08":"[object Uint8Array]"===valueType?marker+="ui08":"[object Uint8ClampedArray]"===valueType?marker+="uic8":"[object Int16Array]"===valueType?marker+="si16":"[object Uint16Array]"===valueType?marker+="ur16":"[object Int32Array]"===valueType?marker+="si32":"[object Uint32Array]"===valueType?marker+="ui32":"[object Float32Array]"===valueType?marker+="fl32":"[object Float64Array]"===valueType?marker+="fl64":callback(new Error("Failed to get type for BinaryArray"))),callback(marker+bufferToString(buffer))}else if("[object Blob]"===valueType){var fileReader=new FileReader;fileReader.onload=function(){var str="~~local_forage_type~"+value.type+"~"+bufferToString(this.result);callback("__lfsc__:blob"+str)},fileReader.readAsArrayBuffer(value)}else try{callback(JSON.stringify(value))}catch(e){console.error("Couldn't convert value into a JSON string: ",value),callback(null,e)}},deserialize:function(value){if("__lfsc__:"!==value.substring(0,SERIALIZED_MARKER_LENGTH))return JSON.parse(value);var blobType,serializedString=value.substring(TYPE_SERIALIZED_MARKER_LENGTH),type=value.substring(SERIALIZED_MARKER_LENGTH,TYPE_SERIALIZED_MARKER_LENGTH);if("blob"===type&&BLOB_TYPE_PREFIX_REGEX.test(serializedString)){var matcher=serializedString.match(BLOB_TYPE_PREFIX_REGEX);blobType=matcher[1],serializedString=serializedString.substring(matcher[0].length)}var buffer=stringToBuffer(serializedString);switch(type){case"arbf":return buffer;case"blob":return createBlob([buffer],{type:blobType});case"si08":return new Int8Array(buffer);case"ui08":return new Uint8Array(buffer);case"uic8":return new Uint8ClampedArray(buffer);case"si16":return new Int16Array(buffer);case"ur16":return new Uint16Array(buffer);case"si32":return new Int32Array(buffer);case"ui32":return new Uint32Array(buffer);case"fl32":return new Float32Array(buffer);case"fl64":return new Float64Array(buffer);default:throw new Error("Unkown type: "+type)}},stringToBuffer:stringToBuffer,bufferToString:bufferToString};function createDbTable(t,dbInfo,callback,errorCallback){t.executeSql("CREATE TABLE IF NOT EXISTS "+dbInfo.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],callback,errorCallback)}function tryExecuteSql(t,dbInfo,sqlStatement,args,callback,errorCallback){t.executeSql(sqlStatement,args,callback,(function(t,error){error.code===error.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[dbInfo.storeName],(function(t,results){results.rows.length?errorCallback(t,error):createDbTable(t,dbInfo,(function(){t.executeSql(sqlStatement,args,callback,errorCallback)}),errorCallback)}),errorCallback):errorCallback(t,error)}),errorCallback)}function _setItem(key,value,callback,retriesLeft){var self=this;key=normalizeKey(key);var promise=new Promise$1((function(resolve,reject){self.ready().then((function(){void 0===value&&(value=null);var originalValue=value,dbInfo=self._dbInfo;dbInfo.serializer.serialize(value,(function(value,error){error?reject(error):dbInfo.db.transaction((function(t){tryExecuteSql(t,dbInfo,"INSERT OR REPLACE INTO "+dbInfo.storeName+" (key, value) VALUES (?, ?)",[key,value],(function(){resolve(originalValue)}),(function(t,error){reject(error)}))}),(function(sqlError){if(sqlError.code===sqlError.QUOTA_ERR){if(retriesLeft>0)return void resolve(_setItem.apply(self,[key,originalValue,callback,retriesLeft-1]));reject(sqlError)}}))}))})).catch(reject)}));return executeCallback(promise,callback),promise}function getAllStoreNames(db){return new Promise$1((function(resolve,reject){db.transaction((function(t){t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,results){for(var storeNames=[],i=0;i<results.rows.length;i++)storeNames.push(results.rows.item(i).name);resolve({db:db,storeNames:storeNames})}),(function(t,error){reject(error)}))}),(function(sqlError){reject(sqlError)}))}))}var webSQLStorage={_driver:"webSQLStorage",_initStorage:function(options){var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]="string"!=typeof options[i]?options[i].toString():options[i];var dbInfoPromise=new Promise$1((function(resolve,reject){try{dbInfo.db=openDatabase(dbInfo.name,String(dbInfo.version),dbInfo.description,dbInfo.size)}catch(e){return reject(e)}dbInfo.db.transaction((function(t){createDbTable(t,dbInfo,(function(){self._dbInfo=dbInfo,resolve()}),(function(t,error){reject(error)}))}),reject)}));return dbInfo.serializer=localforageSerializer,dbInfoPromise},_support:"function"==typeof openDatabase,iterate:function(iterator,callback){var self=this,promise=new Promise$1((function(resolve,reject){self.ready().then((function(){var dbInfo=self._dbInfo;dbInfo.db.transaction((function(t){tryExecuteSql(t,dbInfo,"SELECT * FROM "+dbInfo.storeName,[],(function(t,results){for(var rows=results.rows,length=rows.length,i=0;i<length;i++){var item=rows.item(i),result=item.value;if(result&&(result=dbInfo.serializer.deserialize(result)),void 0!==(result=iterator(result,item.key,i+1)))return void resolve(result)}resolve()}),(function(t,error){reject(error)}))}))})).catch(reject)}));return executeCallback(promise,callback),promise},getItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1((function(resolve,reject){self.ready().then((function(){var dbInfo=self._dbInfo;dbInfo.db.transaction((function(t){tryExecuteSql(t,dbInfo,"SELECT * FROM "+dbInfo.storeName+" WHERE key = ? LIMIT 1",[key],(function(t,results){var result=results.rows.length?results.rows.item(0).value:null;result&&(result=dbInfo.serializer.deserialize(result)),resolve(result)}),(function(t,error){reject(error)}))}))})).catch(reject)}));return executeCallback(promise,callback),promise},setItem:function(key,value,callback){return _setItem.apply(this,[key,value,callback,1])},removeItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1((function(resolve,reject){self.ready().then((function(){var dbInfo=self._dbInfo;dbInfo.db.transaction((function(t){tryExecuteSql(t,dbInfo,"DELETE FROM "+dbInfo.storeName+" WHERE key = ?",[key],(function(){resolve()}),(function(t,error){reject(error)}))}))})).catch(reject)}));return executeCallback(promise,callback),promise},clear:function(callback){var self=this,promise=new Promise$1((function(resolve,reject){self.ready().then((function(){var dbInfo=self._dbInfo;dbInfo.db.transaction((function(t){tryExecuteSql(t,dbInfo,"DELETE FROM "+dbInfo.storeName,[],(function(){resolve()}),(function(t,error){reject(error)}))}))})).catch(reject)}));return executeCallback(promise,callback),promise},length:function(callback){var self=this,promise=new Promise$1((function(resolve,reject){self.ready().then((function(){var dbInfo=self._dbInfo;dbInfo.db.transaction((function(t){tryExecuteSql(t,dbInfo,"SELECT COUNT(key) as c FROM "+dbInfo.storeName,[],(function(t,results){var result=results.rows.item(0).c;resolve(result)}),(function(t,error){reject(error)}))}))})).catch(reject)}));return executeCallback(promise,callback),promise},key:function(n,callback){var self=this,promise=new Promise$1((function(resolve,reject){self.ready().then((function(){var dbInfo=self._dbInfo;dbInfo.db.transaction((function(t){tryExecuteSql(t,dbInfo,"SELECT key FROM "+dbInfo.storeName+" WHERE id = ? LIMIT 1",[n+1],(function(t,results){var result=results.rows.length?results.rows.item(0).key:null;resolve(result)}),(function(t,error){reject(error)}))}))})).catch(reject)}));return executeCallback(promise,callback),promise},keys:function(callback){var self=this,promise=new Promise$1((function(resolve,reject){self.ready().then((function(){var dbInfo=self._dbInfo;dbInfo.db.transaction((function(t){tryExecuteSql(t,dbInfo,"SELECT key FROM "+dbInfo.storeName,[],(function(t,results){for(var keys=[],i=0;i<results.rows.length;i++)keys.push(results.rows.item(i).key);resolve(keys)}),(function(t,error){reject(error)}))}))})).catch(reject)}));return executeCallback(promise,callback),promise},dropInstance:function(options,callback){callback=getCallback.apply(this,arguments);var currentConfig=this.config();(options="function"!=typeof options&&options||{}).name||(options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName);var promise,self=this;return executeCallback(promise=options.name?new Promise$1((function(resolve){var db;db=options.name===currentConfig.name?self._dbInfo.db:openDatabase(options.name,"","",0),options.storeName?resolve({db:db,storeNames:[options.storeName]}):resolve(getAllStoreNames(db))})).then((function(operationInfo){return new Promise$1((function(resolve,reject){operationInfo.db.transaction((function(t){function dropTable(storeName){return new Promise$1((function(resolve,reject){t.executeSql("DROP TABLE IF EXISTS "+storeName,[],(function(){resolve()}),(function(t,error){reject(error)}))}))}for(var operations=[],i=0,len=operationInfo.storeNames.length;i<len;i++)operations.push(dropTable(operationInfo.storeNames[i]));Promise$1.all(operations).then((function(){resolve()})).catch((function(e){reject(e)}))}),(function(sqlError){reject(sqlError)}))}))})):Promise$1.reject("Invalid arguments"),callback),promise}};function _getKeyPrefix(options,defaultConfig){var keyPrefix=options.name+"/";return options.storeName!==defaultConfig.storeName&&(keyPrefix+=options.storeName+"/"),keyPrefix}function _isLocalStorageUsable(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var localStorageWrapper={_driver:"localStorageWrapper",_initStorage:function(options){var dbInfo={};if(options)for(var i in options)dbInfo[i]=options[i];return dbInfo.keyPrefix=_getKeyPrefix(options,this._defaultConfig),_isLocalStorageUsable()?(this._dbInfo=dbInfo,dbInfo.serializer=localforageSerializer,Promise$1.resolve()):Promise$1.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(iterator,callback){var self=this,promise=self.ready().then((function(){for(var dbInfo=self._dbInfo,keyPrefix=dbInfo.keyPrefix,keyPrefixLength=keyPrefix.length,length=localStorage.length,iterationNumber=1,i=0;i<length;i++){var key=localStorage.key(i);if(0===key.indexOf(keyPrefix)){var value=localStorage.getItem(key);if(value&&(value=dbInfo.serializer.deserialize(value)),void 0!==(value=iterator(value,key.substring(keyPrefixLength),iterationNumber++)))return value}}}));return executeCallback(promise,callback),promise},getItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=self.ready().then((function(){var dbInfo=self._dbInfo,result=localStorage.getItem(dbInfo.keyPrefix+key);return result&&(result=dbInfo.serializer.deserialize(result)),result}));return executeCallback(promise,callback),promise},setItem:function(key,value,callback){var self=this;key=normalizeKey(key);var promise=self.ready().then((function(){void 0===value&&(value=null);var originalValue=value;return new Promise$1((function(resolve,reject){var dbInfo=self._dbInfo;dbInfo.serializer.serialize(value,(function(value,error){if(error)reject(error);else try{localStorage.setItem(dbInfo.keyPrefix+key,value),resolve(originalValue)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||reject(e),reject(e)}}))}))}));return executeCallback(promise,callback),promise},removeItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=self.ready().then((function(){var dbInfo=self._dbInfo;localStorage.removeItem(dbInfo.keyPrefix+key)}));return executeCallback(promise,callback),promise},clear:function(callback){var self=this,promise=self.ready().then((function(){for(var keyPrefix=self._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var key=localStorage.key(i);0===key.indexOf(keyPrefix)&&localStorage.removeItem(key)}}));return executeCallback(promise,callback),promise},length:function(callback){var promise=this.keys().then((function(keys){return keys.length}));return executeCallback(promise,callback),promise},key:function(n,callback){var self=this,promise=self.ready().then((function(){var result,dbInfo=self._dbInfo;try{result=localStorage.key(n)}catch(error){result=null}return result&&(result=result.substring(dbInfo.keyPrefix.length)),result}));return executeCallback(promise,callback),promise},keys:function(callback){var self=this,promise=self.ready().then((function(){for(var dbInfo=self._dbInfo,length=localStorage.length,keys=[],i=0;i<length;i++){var itemKey=localStorage.key(i);0===itemKey.indexOf(dbInfo.keyPrefix)&&keys.push(itemKey.substring(dbInfo.keyPrefix.length))}return keys}));return executeCallback(promise,callback),promise},dropInstance:function(options,callback){if(callback=getCallback.apply(this,arguments),!(options="function"!=typeof options&&options||{}).name){var currentConfig=this.config();options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName}var promise,self=this;return executeCallback(promise=options.name?new Promise$1((function(resolve){options.storeName?resolve(_getKeyPrefix(options,self._defaultConfig)):resolve(options.name+"/")})).then((function(keyPrefix){for(var i=localStorage.length-1;i>=0;i--){var key=localStorage.key(i);0===key.indexOf(keyPrefix)&&localStorage.removeItem(key)}})):Promise$1.reject("Invalid arguments"),callback),promise}},includes=function(array,searchElement){for(var x,y,len=array.length,i=0;i<len;){if((x=array[i])===(y=searchElement)||"number"==typeof x&&"number"==typeof y&&isNaN(x)&&isNaN(y))return!0;i++}return!1},isArray=Array.isArray||function(arg){return"[object Array]"===Object.prototype.toString.call(arg)},DefinedDrivers={},DriverSupport={},DefaultDrivers={INDEXEDDB:asyncStorage,WEBSQL:webSQLStorage,LOCALSTORAGE:localStorageWrapper},DefaultDriverOrder=[DefaultDrivers.INDEXEDDB._driver,DefaultDrivers.WEBSQL._driver,DefaultDrivers.LOCALSTORAGE._driver],OptionalDriverMethods=["dropInstance"],LibraryMethods=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(OptionalDriverMethods),DefaultConfig={description:"",driver:DefaultDriverOrder.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function callWhenReady(localForageInstance,libraryMethod){localForageInstance[libraryMethod]=function(){var _args=arguments;return localForageInstance.ready().then((function(){return localForageInstance[libraryMethod].apply(localForageInstance,_args)}))}}function extend(){for(var arguments$1=arguments,i=1;i<arguments.length;i++){var arg=arguments$1[i];if(arg)for(var _key in arg)arg.hasOwnProperty(_key)&&(isArray(arg[_key])?arguments$1[0][_key]=arg[_key].slice():arguments$1[0][_key]=arg[_key])}return arguments[0]}var localforage_js=new(function(){function LocalForage(options){for(var driverTypeKey in function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LocalForage),DefaultDrivers)if(DefaultDrivers.hasOwnProperty(driverTypeKey)){var driver=DefaultDrivers[driverTypeKey],driverName=driver._driver;this[driverTypeKey]=driverName,DefinedDrivers[driverName]||this.defineDriver(driver)}this._defaultConfig=extend({},DefaultConfig),this._config=extend({},this._defaultConfig,options),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return LocalForage.prototype.config=function(options){if("object"===(void 0===options?"undefined":_typeof(options))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in options){if("storeName"===i&&(options[i]=options[i].replace(/\W/g,"_")),"version"===i&&"number"!=typeof options[i])return new Error("Database version must be a number.");this._config[i]=options[i]}return!("driver"in options)||!options.driver||this.setDriver(this._config.driver)}return"string"==typeof options?this._config[options]:this._config},LocalForage.prototype.defineDriver=function(driverObject,callback,errorCallback){var promise=new Promise$1((function(resolve,reject){try{var driverName=driverObject._driver,complianceError=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!driverObject._driver)return void reject(complianceError);for(var driverMethods=LibraryMethods.concat("_initStorage"),i=0,len=driverMethods.length;i<len;i++){var driverMethodName=driverMethods[i];if((!includes(OptionalDriverMethods,driverMethodName)||driverObject[driverMethodName])&&"function"!=typeof driverObject[driverMethodName])return void reject(complianceError)}!function(){for(var methodNotImplementedFactory=function(methodName){return function(){var error=new Error("Method "+methodName+" is not implemented by the current driver"),promise=Promise$1.reject(error);return executeCallback(promise,arguments[arguments.length-1]),promise}},_i=0,_len=OptionalDriverMethods.length;_i<_len;_i++){var optionalDriverMethod=OptionalDriverMethods[_i];driverObject[optionalDriverMethod]||(driverObject[optionalDriverMethod]=methodNotImplementedFactory(optionalDriverMethod))}}();var setDriverSupport=function(support){DefinedDrivers[driverName]&&console.info("Redefining LocalForage driver: "+driverName),DefinedDrivers[driverName]=driverObject,DriverSupport[driverName]=support,resolve()};"_support"in driverObject?driverObject._support&&"function"==typeof driverObject._support?driverObject._support().then(setDriverSupport,reject):setDriverSupport(!!driverObject._support):setDriverSupport(!0)}catch(e){reject(e)}}));return executeTwoCallbacks(promise,callback,errorCallback),promise},LocalForage.prototype.driver=function(){return this._driver||null},LocalForage.prototype.getDriver=function(driverName,callback,errorCallback){var getDriverPromise=DefinedDrivers[driverName]?Promise$1.resolve(DefinedDrivers[driverName]):Promise$1.reject(new Error("Driver not found."));return executeTwoCallbacks(getDriverPromise,callback,errorCallback),getDriverPromise},LocalForage.prototype.getSerializer=function(callback){var serializerPromise=Promise$1.resolve(localforageSerializer);return executeTwoCallbacks(serializerPromise,callback),serializerPromise},LocalForage.prototype.ready=function(callback){var self=this,promise=self._driverSet.then((function(){return null===self._ready&&(self._ready=self._initDriver()),self._ready}));return executeTwoCallbacks(promise,callback,callback),promise},LocalForage.prototype.setDriver=function(drivers,callback,errorCallback){var self=this;isArray(drivers)||(drivers=[drivers]);var supportedDrivers=this._getSupportedDrivers(drivers);function setDriverToConfig(){self._config.driver=self.driver()}function extendSelfWithDriver(driver){return self._extend(driver),setDriverToConfig(),self._ready=self._initStorage(self._config),self._ready}var oldDriverSetDone=null!==this._driverSet?this._driverSet.catch((function(){return Promise$1.resolve()})):Promise$1.resolve();return this._driverSet=oldDriverSetDone.then((function(){var driverName=supportedDrivers[0];return self._dbInfo=null,self._ready=null,self.getDriver(driverName).then((function(driver){self._driver=driver._driver,setDriverToConfig(),self._wrapLibraryMethodsWithReady(),self._initDriver=function(supportedDrivers){return function(){var currentDriverIndex=0;return function driverPromiseLoop(){for(;currentDriverIndex<supportedDrivers.length;){var driverName=supportedDrivers[currentDriverIndex];return currentDriverIndex++,self._dbInfo=null,self._ready=null,self.getDriver(driverName).then(extendSelfWithDriver).catch(driverPromiseLoop)}setDriverToConfig();var error=new Error("No available storage method found.");return self._driverSet=Promise$1.reject(error),self._driverSet}()}}(supportedDrivers)}))})).catch((function(){setDriverToConfig();var error=new Error("No available storage method found.");return self._driverSet=Promise$1.reject(error),self._driverSet})),executeTwoCallbacks(this._driverSet,callback,errorCallback),this._driverSet},LocalForage.prototype.supports=function(driverName){return!!DriverSupport[driverName]},LocalForage.prototype._extend=function(libraryMethodsAndProperties){extend(this,libraryMethodsAndProperties)},LocalForage.prototype._getSupportedDrivers=function(drivers){for(var supportedDrivers=[],i=0,len=drivers.length;i<len;i++){var driverName=drivers[i];this.supports(driverName)&&supportedDrivers.push(driverName)}return supportedDrivers},LocalForage.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,len=LibraryMethods.length;i<len;i++)callWhenReady(this,LibraryMethods[i])},LocalForage.prototype.createInstance=function(options){return new LocalForage(options)},LocalForage}());module.exports=localforage_js},{3:3}]},{},[4])(4)}).call(this,__webpack_require__(11))},function(module,exports,__webpack_require__){(function(global){!function(global){var iteratorSupported=function(){try{return!!Symbol.iterator}catch(error){return!1}}(),createIterator=function(items){var iterator={next:function(){var value=items.shift();return{done:void 0===value,value:value}}};return iteratorSupported&&(iterator[Symbol.iterator]=function(){return iterator}),iterator},serializeParam=function(value){return encodeURIComponent(value).replace(/%20/g,"+")},deserializeParam=function(value){return decodeURIComponent(String(value).replace(/\+/g," "))};(function(){try{var URLSearchParams=global.URLSearchParams;return"a=1"===new URLSearchParams("?a=1").toString()&&"function"==typeof URLSearchParams.prototype.set}catch(e){return!1}})()||function(){var URLSearchParams=function(searchString){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var typeofSearchString=typeof searchString;if("undefined"===typeofSearchString);else if("string"===typeofSearchString)""!==searchString&&this._fromString(searchString);else if(searchString instanceof URLSearchParams){var _this=this;searchString.forEach((function(value,name){_this.append(name,value)}))}else{if(null===searchString||"object"!==typeofSearchString)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(searchString))for(var i=0;i<searchString.length;i++){var entry=searchString[i];if("[object Array]"!==Object.prototype.toString.call(entry)&&2===entry.length)throw new TypeError("Expected [string, any] as entry at index "+i+" of URLSearchParams's input");this.append(entry[0],entry[1])}else for(var key in searchString)searchString.hasOwnProperty(key)&&this.append(key,searchString[key])}},proto=URLSearchParams.prototype;proto.append=function(name,value){name in this._entries?this._entries[name].push(String(value)):this._entries[name]=[String(value)]},proto.delete=function(name){delete this._entries[name]},proto.get=function(name){return name in this._entries?this._entries[name][0]:null},proto.getAll=function(name){return name in this._entries?this._entries[name].slice(0):[]},proto.has=function(name){return name in this._entries},proto.set=function(name,value){this._entries[name]=[String(value)]},proto.forEach=function(callback,thisArg){var entries;for(var name in this._entries)if(this._entries.hasOwnProperty(name)){entries=this._entries[name];for(var i=0;i<entries.length;i++)callback.call(thisArg,entries[i],name,this)}},proto.keys=function(){var items=[];return this.forEach((function(value,name){items.push(name)})),createIterator(items)},proto.values=function(){var items=[];return this.forEach((function(value){items.push(value)})),createIterator(items)},proto.entries=function(){var items=[];return this.forEach((function(value,name){items.push([name,value])})),createIterator(items)},iteratorSupported&&(proto[Symbol.iterator]=proto.entries),proto.toString=function(){var searchArray=[];return this.forEach((function(value,name){searchArray.push(serializeParam(name)+"="+serializeParam(value))})),searchArray.join("&")},global.URLSearchParams=URLSearchParams}();var proto=global.URLSearchParams.prototype;"function"!=typeof proto.sort&&(proto.sort=function(){var _this=this,items=[];this.forEach((function(value,name){items.push([name,value]),_this._entries||_this.delete(name)})),items.sort((function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0})),_this._entries&&(_this._entries={});for(var i=0;i<items.length;i++)this.append(items[i][0],items[i][1])}),"function"!=typeof proto._fromString&&Object.defineProperty(proto,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(searchString){if(this._entries)this._entries={};else{var keys=[];this.forEach((function(value,name){keys.push(name)}));for(var i=0;i<keys.length;i++)this.delete(keys[i])}var attribute,attributes=(searchString=searchString.replace(/^\?/,"")).split("&");for(i=0;i<attributes.length;i++)attribute=attributes[i].split("="),this.append(deserializeParam(attribute[0]),attribute.length>1?deserializeParam(attribute[1]):"")}})}(void 0!==global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(global){if(function(){try{var u=new global.URL("b","http://a");return u.pathname="c d","http://a/c%20d"===u.href&&u.searchParams}catch(e){return!1}}()||function(){var _URL=global.URL,URL=function(url,base){"string"!=typeof url&&(url=String(url));var baseElement,doc=document;if(base&&(void 0===global.location||base!==global.location.href)){(baseElement=(doc=document.implementation.createHTMLDocument("")).createElement("base")).href=base,doc.head.appendChild(baseElement);try{if(0!==baseElement.href.indexOf(base))throw new Error(baseElement.href)}catch(err){throw new Error("URL unable to set base "+base+" due to "+err)}}var anchorElement=doc.createElement("a");anchorElement.href=url,baseElement&&(doc.body.appendChild(anchorElement),anchorElement.href=anchorElement.href);var inputElement=doc.createElement("input");if(inputElement.type="url",inputElement.value=url,":"===anchorElement.protocol||!/:/.test(anchorElement.href)||!inputElement.checkValidity()&&!base)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:anchorElement});var searchParams=new global.URLSearchParams(this.search),enableSearchUpdate=!0,enableSearchParamsUpdate=!0,_this=this;["append","delete","set"].forEach((function(methodName){var method=searchParams[methodName];searchParams[methodName]=function(){method.apply(searchParams,arguments),enableSearchUpdate&&(enableSearchParamsUpdate=!1,_this.search=searchParams.toString(),enableSearchParamsUpdate=!0)}})),Object.defineProperty(this,"searchParams",{value:searchParams,enumerable:!0});var search=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==search&&(search=this.search,enableSearchParamsUpdate&&(enableSearchUpdate=!1,this.searchParams._fromString(this.search),enableSearchUpdate=!0))}})},proto=URL.prototype;["hash","host","hostname","port","protocol"].forEach((function(attributeName){!function(attributeName){Object.defineProperty(proto,attributeName,{get:function(){return this._anchorElement[attributeName]},set:function(value){this._anchorElement[attributeName]=value},enumerable:!0})}(attributeName)})),Object.defineProperty(proto,"search",{get:function(){return this._anchorElement.search},set:function(value){this._anchorElement.search=value,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(proto,{toString:{get:function(){var _this=this;return function(){return _this.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(value){this._anchorElement.href=value,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(value){this._anchorElement.pathname=value},enumerable:!0},origin:{get:function(){var expectedPort={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],addPortToOrigin=this._anchorElement.port!=expectedPort&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(addPortToOrigin?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(value){},enumerable:!0},username:{get:function(){return""},set:function(value){},enumerable:!0}}),URL.createObjectURL=function(blob){return _URL.createObjectURL.apply(_URL,arguments)},URL.revokeObjectURL=function(url){return _URL.revokeObjectURL.apply(_URL,arguments)},global.URL=URL}(),void 0!==global.location&&!("origin"in global.location)){var getOrigin=function(){return global.location.protocol+"//"+global.location.hostname+(global.location.port?":"+global.location.port:"")};try{Object.defineProperty(global.location,"origin",{get:getOrigin,enumerable:!0})}catch(e){setInterval((function(){global.location.origin=getOrigin()}),100)}}}(void 0!==global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(this,__webpack_require__(11))},function(module,exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(131),isObjectLike=__webpack_require__(22);module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(132),equalArrays=__webpack_require__(70),equalByTag=__webpack_require__(164),equalObjects=__webpack_require__(168),getTag=__webpack_require__(190),isArray=__webpack_require__(15),isBuffer=__webpack_require__(71),isTypedArray=__webpack_require__(73),objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other),objIsObj=(objTag="[object Arguments]"==objTag?objectTag:objTag)==objectTag,othIsObj=(othTag="[object Arguments]"==othTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(30),stackClear=__webpack_require__(138),stackDelete=__webpack_require__(139),stackGet=__webpack_require__(140),stackHas=__webpack_require__(141),stackSet=__webpack_require__(142);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},function(module,exports){module.exports=function(){this.__data__=[],this.size=0}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(31),splice=Array.prototype.splice;module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(31);module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(31);module.exports=function(key){return assocIndexOf(this.__data__,key)>-1}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(31);module.exports=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(30);module.exports=function(){this.__data__=new ListCache,this.size=0}},function(module,exports){module.exports=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},function(module,exports){module.exports=function(key){return this.__data__.get(key)}},function(module,exports){module.exports=function(key){return this.__data__.has(key)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(30),Map=__webpack_require__(54),MapCache=__webpack_require__(55);module.exports=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(68),isMasked=__webpack_require__(144),isObject=__webpack_require__(20),toSource=__webpack_require__(69),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},function(module,exports,__webpack_require__){var uid,coreJsData=__webpack_require__(145),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function(func){return!!maskSrcKey&&maskSrcKey in func}},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(10)["__core-js_shared__"];module.exports=coreJsData},function(module,exports){module.exports=function(object,key){return null==object?void 0:object[key]}},function(module,exports,__webpack_require__){var Hash=__webpack_require__(148),ListCache=__webpack_require__(30),Map=__webpack_require__(54);module.exports=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(149),hashDelete=__webpack_require__(150),hashGet=__webpack_require__(151),hashHas=__webpack_require__(152),hashSet=__webpack_require__(153);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(32);module.exports=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},function(module,exports){module.exports=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(32),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(32),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(32);module.exports=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(33);module.exports=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},function(module,exports){module.exports=function(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(33);module.exports=function(key){return getMapData(this,key).get(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(33);module.exports=function(key){return getMapData(this,key).has(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(33);module.exports=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(55),setCacheAdd=__webpack_require__(160),setCacheHas=__webpack_require__(161);function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},function(module,exports){module.exports=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this}},function(module,exports){module.exports=function(value){return this.__data__.has(value)}},function(module,exports){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},function(module,exports){module.exports=function(cache,key){return cache.has(key)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(29),Uint8Array=__webpack_require__(165),eq=__webpack_require__(67),equalArrays=__webpack_require__(70),mapToArray=__webpack_require__(166),setToArray=__webpack_require__(167),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(10).Uint8Array;module.exports=Uint8Array},function(module,exports){module.exports=function(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}},function(module,exports){module.exports=function(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}},function(module,exports,__webpack_require__){var getAllKeys=__webpack_require__(169),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(170),getSymbols=__webpack_require__(172),keys=__webpack_require__(175);module.exports=function(object){return baseGetAllKeys(object,keys,getSymbols)}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(171),isArray=__webpack_require__(15);module.exports=function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},function(module,exports){module.exports=function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(173),stubArray=__webpack_require__(174),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray;module.exports=getSymbols},function(module,exports){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},function(module,exports){module.exports=function(){return[]}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(176),baseKeys=__webpack_require__(185),isArrayLike=__webpack_require__(189);module.exports=function(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(177),isArguments=__webpack_require__(178),isArray=__webpack_require__(15),isBuffer=__webpack_require__(71),isIndex=__webpack_require__(181),isTypedArray=__webpack_require__(73),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},function(module,exports){module.exports=function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(179),isObjectLike=__webpack_require__(22),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(21),isObjectLike=__webpack_require__(22);module.exports=function(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}},function(module,exports){module.exports=function(){return!1}},function(module,exports){var reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(21),isLength=__webpack_require__(74),isObjectLike=__webpack_require__(22),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},function(module,exports){module.exports=function(func){return function(value){return func(value)}}},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(65),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(this,__webpack_require__(72)(module))},function(module,exports,__webpack_require__){var isPrototype=__webpack_require__(186),nativeKeys=__webpack_require__(187),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},function(module,exports){var objectProto=Object.prototype;module.exports=function(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},function(module,exports,__webpack_require__){var nativeKeys=__webpack_require__(188)(Object.keys,Object);module.exports=nativeKeys},function(module,exports){module.exports=function(func,transform){return function(arg){return func(transform(arg))}}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(68),isLength=__webpack_require__(74);module.exports=function(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},function(module,exports,__webpack_require__){var DataView=__webpack_require__(191),Map=__webpack_require__(54),Promise=__webpack_require__(192),Set=__webpack_require__(193),WeakMap=__webpack_require__(194),baseGetTag=__webpack_require__(21),toSource=__webpack_require__(69),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},function(module,exports,__webpack_require__){var DataView=__webpack_require__(14)(__webpack_require__(10),"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var Promise=__webpack_require__(14)(__webpack_require__(10),"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var Set=__webpack_require__(14)(__webpack_require__(10),"Set");module.exports=Set},function(module,exports,__webpack_require__){var WeakMap=__webpack_require__(14)(__webpack_require__(10),"WeakMap");module.exports=WeakMap},function(module,exports,__webpack_require__){var castPath=__webpack_require__(196),toKey=__webpack_require__(204);module.exports=function(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(15),isKey=__webpack_require__(197),stringToPath=__webpack_require__(198),toString=__webpack_require__(201);module.exports=function(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(15),isSymbol=__webpack_require__(28),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(199),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(200);module.exports=function(func){var result=memoize(func,(function(key){return 500===cache.size&&cache.clear(),key})),cache=result.cache;return result}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(55);function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(202);module.exports=function(value){return null==value?"":baseToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(29),arrayMap=__webpack_require__(203),isArray=__webpack_require__(15),isSymbol=__webpack_require__(28),symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}},function(module,exports){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(28);module.exports=function(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}},function(module,exports){module.exports=function(number,lower,upper){return number==number&&(void 0!==upper&&(number=number<=upper?number:upper),void 0!==lower&&(number=number>=lower?number:lower)),number}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_LoadingScreen_vue_vue_type_style_index_0_id_639cf3c4_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(35);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_LoadingScreen_vue_vue_type_style_index_0_id_639cf3c4_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_LoadingError_vue_vue_type_style_index_0_id_0fd949cf_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(36);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_LoadingError_vue_vue_type_style_index_0_id_0fd949cf_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_TopBar_vue_vue_type_style_index_0_id_70e04298_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_TopBar_vue_vue_type_style_index_0_id_70e04298_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_SideBar_vue_vue_type_style_index_0_id_5163f282_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(38);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_SideBar_vue_vue_type_style_index_0_id_5163f282_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_TableOfContentsSection_vue_vue_type_style_index_0_id_5ddaa595_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_TableOfContentsSection_vue_vue_type_style_index_0_id_5ddaa595_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_TableOfContentsSideBar_vue_vue_type_style_index_0_id_f0dc335a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(40);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_TableOfContentsSideBar_vue_vue_type_style_index_0_id_f0dc335a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_SettingsSideBar_vue_vue_type_style_index_0_id_5033e2ae_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_SettingsSideBar_vue_vue_type_style_index_0_id_5033e2ae_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_SearchSideBar_vue_vue_type_style_index_0_id_cf11c65c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(42);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_SearchSideBar_vue_vue_type_style_index_0_id_cf11c65c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_BottomBar_vue_vue_type_style_index_0_id_31aa40a6_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(43);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_BottomBar_vue_vue_type_style_index_0_id_31aa40a6_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_PreviousButton_vue_vue_type_style_index_0_id_b6b4a0d8_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_PreviousButton_vue_vue_type_style_index_0_id_b6b4a0d8_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_NextButton_vue_vue_type_style_index_0_id_4f517ecc_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_NextButton_vue_vue_type_style_index_0_id_4f517ecc_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_EpubRendererIndex_vue_vue_type_style_index_0_id_d794da54_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(46);__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_EpubRendererIndex_vue_vue_type_style_index_0_id_d794da54_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return documentEPUBModule}));var urls,views_EpubRendererIndexvue_type_script_lang_js_=__webpack_require__(34).a,componentNormalizer=(__webpack_require__(217),__webpack_require__(3)),EpubRendererIndex=Object(componentNormalizer.a)(views_EpubRendererIndexvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("CoreFullscreen",{ref:"epubRenderer",staticClass:"epub-renderer",class:{small:_vm.windowIsSmall,scrolled:_vm.scrolled},style:_vm.epubRendererStyle,on:{changeFullscreen:function($event){_vm.isInFullscreen=$event}}},[_vm.errorLoading?_c("LoadingError",{attrs:{loaded:_vm.loaded}}):_vm.loaded?_vm._e():_c("LoadingScreen"),_c("div",{staticClass:"epub-renderer-content",attrs:{dir:_vm.contentDirection},on:{mousedown:function($event){return $event.stopPropagation(),_vm.handleMouseDown($event)},keyup:function($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"esc",27,$event.key,["Esc","Escape"])?null:_vm.closeSideBar($event)}}},[_c("TopBar",{ref:"topBar",staticClass:"top-bar-component",attrs:{isInFullscreen:_vm.isInFullscreen},on:{tableOfContentsButtonClicked:_vm.handleTocToggle,settingsButtonClicked:_vm.handleSettingToggle,searchButtonClicked:_vm.handleSearchToggle,fullscreenButtonClicked:function($event){return _vm.$refs.epubRenderer.toggleFullscreen()}}}),_c("FocusLock",{attrs:{disabled:!_vm.tocSideBarIsOpen,returnFocus:!0}},[_vm.tocSideBarIsOpen?_c("TocButton",{staticClass:"toc-button",on:{click:_vm.handleTocToggle}}):_vm._e(),_c("TableOfContentsSideBar",{directives:[{name:"show",rawName:"v-show",value:_vm.tocSideBarIsOpen,expression:"tocSideBarIsOpen"}],ref:"tocSideBar",staticClass:"side-bar side-bar-left",attrs:{toc:_vm.toc,currentSection:_vm.currentSection},on:{tocNavigation:_vm.handleTocNavigation}})],1),_c("FocusLock",{attrs:{disabled:!_vm.settingsSideBarIsOpen,returnFocus:!1}},[_vm.settingsSideBarIsOpen?_c("SettingsButton",{staticClass:"settings-button",on:{click:_vm.handleSettingToggle}}):_vm._e(),_c("SettingsSideBar",{directives:[{name:"show",rawName:"v-show",value:_vm.settingsSideBarIsOpen,expression:"settingsSideBarIsOpen"}],ref:"settingsSideBar",staticClass:"side-bar side-bar-right",attrs:{theme:_vm.theme,decreaseFontSizeDisabled:_vm.decreaseFontSizeDisabled,increaseFontSizeDisabled:_vm.increaseFontSizeDisabled},on:{decreaseFontSize:function($event){return _vm.handleChangeFontSize(-1)},increaseFontSize:function($event){return _vm.handleChangeFontSize(1)},setTheme:_vm.setTheme}})],1),_c("FocusLock",{attrs:{disabled:!_vm.searchSideBarIsOpen,returnFocus:!1}},[_vm.searchSideBarIsOpen?_c("SearchButton",{staticClass:"search-button",on:{click:_vm.handleSearchToggle}}):_vm._e(),_c("SearchSideBar",{directives:[{name:"show",rawName:"v-show",value:_vm.searchSideBarIsOpen,expression:"searchSideBarIsOpen"}],ref:"searchSideBar",staticClass:"side-bar side-bar-right",attrs:{book:_vm.book},on:{newSearchQuery:_vm.handleNewSearchQuery,navigateToSearchResult:_vm.handleNavigateToSearchResult}})],1),_c("div",{staticClass:"navigation-and-epubjs",style:{backgroundColor:_vm.backgroundColor}},[_c("div",{staticClass:"column epubjs-navigation"},[_c("PreviousButton",{directives:[{name:"show",rawName:"v-show",value:!_vm.isAtStart,expression:"!isAtStart"}],style:{backgroundColor:_vm.backgroundColor},attrs:{color:_vm.navigationButtonColor,isRtl:_vm.contentIsRtl},on:{goToPreviousPage:_vm.goToPreviousPage}})],1),_c("div",{ref:"epubjsContainer",staticClass:"column epubjs-parent",style:{backgroundColor:_vm.backgroundColor}}),_c("div",{staticClass:"column epubjs-navigation"},[_c("NextButton",{directives:[{name:"show",rawName:"v-show",value:!_vm.isAtEnd,expression:"!isAtEnd"}],style:{backgroundColor:_vm.backgroundColor},attrs:{color:_vm.navigationButtonColor,isRtl:_vm.contentIsRtl},on:{goToNextPage:_vm.goToNextPage}})],1)]),_c("BottomBar",{staticClass:"bottom-bar",attrs:{locationsAreReady:_vm.locations.length>0,heading:_vm.bottomBarHeading,sliderValue:_vm.sliderValue,sliderStep:_vm.sliderStep},on:{sliderChanged:_vm.handleSliderChanged}})],1)],1)}),[],!1,null,"d794da54",null).exports,external_kolibriCoreAppGlobal_=__webpack_require__(19),external_kolibriCoreAppGlobal_default=__webpack_require__.n(external_kolibriCoreAppGlobal_),external_kolibriCoreAppGlobal_urls_=__webpack_require__(86);urls=__webpack_require__.n(external_kolibriCoreAppGlobal_urls_).a,__webpack_require__.p=urls.static("kolibri.plugins.epub_viewer.main/");var KolibriModule=function(options){for(var ref,args=[],len=arguments.length-1;len-- >0;)args[len]=arguments[len+1];this.name="kolibri.plugins.epub_viewer.main";var safeOptions={};this.kolibriModuleOptions.forEach((function(option){options[option]&&(safeOptions[option]=options[option])})),Object.assign(this,safeOptions),(ref=this).initialize.apply(ref,[options].concat(args)),this._registerKolibriModule()},kolibri_module_prototypeAccessors={kolibriModuleOptions:{configurable:!0},Kolibri:{configurable:!0}};kolibri_module_prototypeAccessors.kolibriModuleOptions.get=function(){return[]},KolibriModule.prototype._registerKolibriModule=function(){external_kolibriCoreAppGlobal_default.a.registerKolibriModuleSync(this)},KolibriModule.prototype.initialize=function(){},KolibriModule.prototype.ready=function(){},KolibriModule.prototype.stopListening=function(event,method){external_kolibriCoreAppGlobal_default.a.stopListening(event,this,method)},KolibriModule.prototype.emit=function(){for(var args=[],len=arguments.length;len--;)args[len]=arguments[len];external_kolibriCoreAppGlobal_default.a.emit.apply(external_kolibriCoreAppGlobal_default.a,args)},kolibri_module_prototypeAccessors.Kolibri.get=function(){return external_kolibriCoreAppGlobal_default.a},Object.defineProperties(KolibriModule.prototype,kolibri_module_prototypeAccessors);var documentEPUBModule=new(function(ContentRendererModule){function DocumentEPUBModule(){ContentRendererModule.apply(this,arguments)}ContentRendererModule&&(DocumentEPUBModule.__proto__=ContentRendererModule),DocumentEPUBModule.prototype=Object.create(ContentRendererModule&&ContentRendererModule.prototype),DocumentEPUBModule.prototype.constructor=DocumentEPUBModule;var prototypeAccessors={rendererComponent:{configurable:!0}};return prototypeAccessors.rendererComponent.get=function(){return EpubRendererIndex.contentModule=this,EpubRendererIndex},Object.defineProperties(DocumentEPUBModule.prototype,prototypeAccessors),DocumentEPUBModule}(function(KolibriModule){function ContentRenderer(){KolibriModule.apply(this,arguments)}KolibriModule&&(ContentRenderer.__proto__=KolibriModule),ContentRenderer.prototype=Object.create(KolibriModule&&KolibriModule.prototype),ContentRenderer.prototype.constructor=ContentRenderer;var prototypeAccessors={rendererComponent:{configurable:!0}};return prototypeAccessors.rendererComponent.get=function(){return null},ContentRenderer.prototype.loadDirectionalCSS=function(direction){return this.Kolibri.loadDirectionalCSS(this,direction)},Object.defineProperties(ContentRenderer.prototype,prototypeAccessors),ContentRenderer}(KolibriModule)))}]);
//# sourceMappingURL=kolibri.plugins.epub_viewer.main-0.14.3.js.map